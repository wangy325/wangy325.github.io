<!doctype html><html lang=zh dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="文章介绍了在centOS7上安装mysql数据库服务的配置及简单优化过程。在服务器上安装mysql服务网络上能够找到的资源很多了，因此本文没有作详细介绍，本文的重点在于后续的优化配置方面。"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://wangy325.github.io/zh/docs/utility/db/sql/1_%E5%9C%A8centOS%E4%B8%8A%E5%AE%89%E8%A3%85%E5%B9%B6%E9%85%8D%E7%BD%AEmysql%E6%95%B0%E6%8D%AE%E5%BA%93/"><meta property="og:site_name" content="Endless River"><meta property="og:title" content="在centOS上安装并配置mysql数据库"><meta property="og:description" content="文章介绍了在centOS7上安装mysql数据库服务的配置及简单优化过程。在服务器上安装mysql服务网络上能够找到的资源很多了，因此本文没有作详细介绍，本文的重点在于后续的优化配置方面。"><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:published_time" content="2019-08-16T00:00:00+00:00"><meta property="article:modified_time" content="2019-08-16T00:00:00+00:00"><title>在centOS上安装并配置mysql数据库 | Endless River</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png><link rel=canonical href=https://wangy325.github.io/zh/docs/utility/db/sql/1_%E5%9C%A8centOS%E4%B8%8A%E5%AE%89%E8%A3%85%E5%B9%B6%E9%85%8D%E7%BD%AEmysql%E6%95%B0%E6%8D%AE%E5%BA%93/><link rel=stylesheet href=/book.min.309b7ed028807cdb68d8d61e26d609f48369c098dbf5e4d8c0dcf4cdf49feafc.css integrity="sha256-MJt+0CiAfNto2NYeJtYJ9INpwJjb9eTYwNz0zfSf6vw=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/zh.search.min.53058eed9bb7f6bcb909aee6a1345f79ee559c137121daf62d7cf974f5813c7b.js integrity="sha256-UwWO7Zu39ry5Ca7moTRfee5VnBNxIdr2LXz5dPWBPHs=" crossorigin=anonymous></script><script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js integrity="sha256-b2+Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC+NdcPIvZhzk=" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-HHNKR5H8KN"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-HHNKR5H8KN")}</script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/zh/><span>Endless River</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=搜索 aria-label=搜索 maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li class=book-section-flat><a href=/zh/docs/java/>Java核心</a><ul><li><input type=checkbox id=section-287084f81620420b7ed7e40a42c44d2f class=toggle>
<label for=section-287084f81620420b7ed7e40a42c44d2f class="flex justify-between"><a role=button>必知必会</a></label><ul><li><a href=/zh/docs/java/basic/1_%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90%E4%BF%AE%E9%A5%B0%E7%AC%A6/>访问权限修饰符</a></li><li><a href=/zh/docs/java/basic/2_static%E5%85%B3%E9%94%AE%E5%AD%97/>static关键字</a></li><li><a href=/zh/docs/java/basic/3_%E4%BC%A0%E5%80%BC%E8%BF%98%E6%98%AF%E4%BC%A0%E5%BC%95%E7%94%A8/>传值还是传引用</a></li><li><a href=/zh/docs/java/basic/4_final%E5%85%B3%E9%94%AE%E5%AD%97/>final关键字</a></li><li><a href=/zh/docs/java/basic/5_Object%E8%B6%85%E7%B1%BB/>Object超类</a></li><li><a href=/zh/docs/java/basic/5_%E5%8A%A8%E6%80%81%E7%BB%91%E5%AE%9A%E4%B8%8E%E9%9D%99%E6%80%81%E7%BB%91%E5%AE%9A/>动态绑定与静态绑定</a></li><li><a href=/zh/docs/java/basic/6_%E6%8A%BD%E8%B1%A1%E7%B1%BB%E4%B8%8E%E6%8E%A5%E5%8F%A3/>抽象类与接口</a></li><li><a href=/zh/docs/java/basic/7_lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/>Lambda表达式与函数式接口</a></li><li><a href=/zh/docs/java/basic/8_%E5%86%85%E9%83%A8%E7%B1%BB/>内部类</a></li><li><a href=/zh/docs/java/basic/11_java-new-time-api/>Java8日期和时间API</a></li><li><a href=/zh/docs/java/basic/Java%E6%8E%A5%E5%8F%A3%E5%9B%9E%E8%B0%83/>Java接口回调</a></li></ul></li><li><input type=checkbox id=section-3d2f820e49b3d97a7a712be90f9fd6ad class=toggle>
<label for=section-3d2f820e49b3d97a7a712be90f9fd6ad class="flex justify-between"><a role=button>集合框架</a></label><ul><li><a href=/zh/docs/java/collections/1_List/>List列表</a></li><li><a href=/zh/docs/java/collections/2_Queue/>Queue</a></li><li><a href=/zh/docs/java/collections/3_Set/>Set</a></li><li><a href=/zh/docs/java/collections/4_Map/>Java集合框架之Map</a></li><li><a href=/zh/docs/java/collections/5_Collections/>Collections工具类</a></li><li><a href=/zh/docs/java/collections/6_HashMap%E7%9A%84%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/>HashMap的源码分析</a></li></ul></li><li><input type=checkbox id=section-6d6d0626deeb0ce0f9826f9dabe58c16 class=toggle>
<label for=section-6d6d0626deeb0ce0f9826f9dabe58c16 class="flex justify-between"><a role=button>并发</a></label><ul><li><a href=/zh/docs/java/concurrency/1%E7%BA%BF%E7%A8%8B%E4%B8%8E%E4%BB%BB%E5%8A%A1_1/>线程与任务(一)</a></li><li><a href=/zh/docs/java/concurrency/1%E7%BA%BF%E7%A8%8B%E4%B8%8E%E4%BB%BB%E5%8A%A1_2/>线程与任务(二)</a></li><li><a href=/zh/docs/java/concurrency/2%E8%B5%84%E6%BA%90%E8%AE%BF%E9%97%AE%E5%8F%97%E9%99%90_1/>资源访问受限--引论</a></li><li><a href=/zh/docs/java/concurrency/2%E8%B5%84%E6%BA%90%E8%AE%BF%E9%97%AE%E5%8F%97%E9%99%90_2_%E9%94%81%E5%92%8C%E6%9D%A1%E4%BB%B6/>锁和条件</a></li><li><a href=/zh/docs/java/concurrency/2%E8%B5%84%E6%BA%90%E8%AE%BF%E9%97%AE%E5%8F%97%E9%99%90_3_synchronized/>synchronized关键字</a></li><li><a href=/zh/docs/java/concurrency/2%E8%B5%84%E6%BA%90%E8%AE%BF%E9%97%AE%E5%8F%97%E9%99%90_4_%E5%8E%9F%E5%AD%90%E6%80%A7%E4%B8%8E%E5%8E%9F%E5%AD%90%E7%B1%BB/>原子性和可见性</a></li><li><a href=/zh/docs/java/concurrency/2%E8%B5%84%E6%BA%90%E8%AE%BF%E9%97%AE%E5%8F%97%E9%99%90_5_%E7%BA%BF%E7%A8%8B%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8/>线程本地存储</a></li><li><a href=/zh/docs/java/concurrency/3%E8%8E%B7%E5%8F%96%E4%BB%BB%E5%8A%A1%E7%9A%84%E8%BF%94%E5%9B%9E%E5%80%BC/>获取任务的返回值</a></li><li><a href=/zh/docs/java/concurrency/4%E6%AD%BB%E9%94%81/>死锁</a></li><li><a href=/zh/docs/java/concurrency/5%E7%BB%88%E7%BB%93%E4%BB%BB%E5%8A%A1/>终结任务</a></li><li><a href=/zh/docs/java/concurrency/6%E7%94%9F%E4%BA%A7%E8%80%85-%E6%B6%88%E8%B4%B9%E8%80%85%E4%B8%8E%E9%98%BB%E5%A1%9E%E9%98%9F%E5%88%97/>生产者-消费者与阻塞队列</a></li><li><a href=/zh/docs/java/concurrency/7%E6%89%A7%E8%A1%8C%E5%99%A8%E4%B8%8E%E7%BA%BF%E7%A8%8B%E6%B1%A0/>执行器与线程池</a></li><li><a href=/zh/docs/java/concurrency/8%E8%AE%A1%E5%88%92%E6%89%A7%E8%A1%8C%E4%BB%BB%E5%8A%A1/>计划执行任务</a></li><li><a href=/zh/docs/java/concurrency/9%E5%85%B6%E4%BB%96%E9%87%8D%E8%A6%81%E7%9A%84%E5%B9%B6%E5%8F%91%E7%BB%84%E4%BB%B6/>一些重要的并发组件</a></li><li><a href=/zh/docs/java/concurrency/10_Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E4%B8%8Evolatile%E5%85%B3%E9%94%AE%E5%AD%97/>Java内存模型与volatile关键字(转)</a></li></ul></li><li><input type=checkbox id=section-1fe137527ef46393c946fbc7cb576209 class=toggle>
<label for=section-1fe137527ef46393c946fbc7cb576209 class="flex justify-between"><a role=button>JVM</a></label><ul><li><a href=/zh/docs/java/jvm/Java%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F%E8%AF%A6%E8%A7%A3/>Java内存区域详解(转)</a></li><li><a href=/zh/docs/java/jvm/java-gc/>JVM垃圾回收概要(转)</a></li></ul></li></ul></li><li class=book-section-flat><span>所谓开发</span><ul><li><input type=checkbox id=section-e45ae315fd63ae771fd5cd0bb732cd6a class=toggle>
<label for=section-e45ae315fd63ae771fd5cd0bb732cd6a class="flex justify-between"><a role=button>Spring</a></label><ul><li><a href=/zh/docs/utility/spring/SpringBoot-aop-demo/>SpringBoot使用AOP的简单示例</a></li><li><a href=/zh/docs/utility/spring/%E5%9C%A8SpringBoot%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%BD%BF%E7%94%A8MockMvc%E8%BF%9B%E8%A1%8C%E6%8E%A5%E5%8F%A3%E6%B5%8B%E8%AF%95/>在SpringBoot项目中使用MockMvc进行接口测试</a></li><li><a href=/zh/docs/utility/spring/spring-transaction-propagation/>spring声明式事务的使用</a></li></ul></li><li><input type=checkbox id=section-94c876711ff851f5a564bef513938730 class=toggle checked>
<label for=section-94c876711ff851f5a564bef513938730 class="flex justify-between"><a role=button>数据库</a></label><ul><li><input type=checkbox id=section-95d6c3eb8d9a1cf6b58bd1aaaeba338b class=toggle checked>
<label for=section-95d6c3eb8d9a1cf6b58bd1aaaeba338b class="flex justify-between"><a role=button>mysql</a></label><ul><li><a href=/zh/docs/utility/db/sql/1_%E5%9C%A8centOS%E4%B8%8A%E5%AE%89%E8%A3%85%E5%B9%B6%E9%85%8D%E7%BD%AEmysql%E6%95%B0%E6%8D%AE%E5%BA%93/ class=active>在centOS上安装并配置mysql数据库</a></li><li><a href=/zh/docs/utility/db/sql/2_MySQL%E7%9A%84%E5%87%A0%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0/>MySQL中的几个字符串处理函数</a></li><li><a href=/zh/docs/utility/db/sql/4_MySQL%E4%BA%8B%E5%8A%A1%E4%B8%8E%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB/>MySQL事务与隔离级别</a></li><li><a href=/zh/docs/utility/db/sql/5_%E4%BD%BF%E7%94%A8mysql%E7%9A%84%E8%A1%8C%E9%94%81/>MySQL锁的简单使用</a></li></ul></li><li><input type=checkbox id=section-63fe101f19994c0885fcb00347eb6cc3 class=toggle>
<label for=section-63fe101f19994c0885fcb00347eb6cc3 class="flex justify-between"><a role=button>redis</a></label><ul><li><a href=/zh/docs/utility/db/redis/redis-all/>redis必知必会(转)</a></li><li><a href=/zh/docs/utility/db/redis/build-redis-sentinel/>Redis Sentinel高可用实现</a></li><li><a href=/zh/docs/utility/db/redis/deploy-redis-cluster-with-docker/>使用docker镜像快速搭建redis集群开发环境</a></li><li><a href=/zh/docs/utility/db/redis/bloom-filter/>布隆过滤器(转)</a></li></ul></li></ul></li><li><input type=checkbox id=section-6b3913c766697bc2d56c09ab1e4448be class=toggle>
<label for=section-6b3913c766697bc2d56c09ab1e4448be class="flex justify-between"><a href=/zh/docs/utility/algo/>算法讨论</a></label><ul><li><a href=/zh/docs/utility/algo/%E5%90%8C%E4%BD%99%E5%AE%9A%E7%90%86%E4%B8%8E%E4%BA%8C%E8%BF%9B%E5%88%B6%E8%A1%A5%E7%A0%81/>同余定理与二进制补码</a></li><li><a href=/zh/docs/utility/algo/%E7%A7%BB%E4%BD%8D%E8%BF%90%E7%AE%97/>移位运算</a></li><li><a href=/zh/docs/utility/algo/%E5%BC%82%E6%88%96%E8%BF%90%E7%AE%97/>异或运算</a></li><li><a href=/zh/docs/utility/algo/%E4%BD%8D%E8%BF%90%E7%AE%97%E7%9A%84%E5%B0%8F%E6%8A%80%E5%B7%A7/>位运算的小技巧</a></li><li><a href=/zh/docs/utility/algo/01%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98/>背包问题2例</a></li></ul></li><li><input type=checkbox id=section-a0746926d02d10d842b9d0d7599deab2 class=toggle>
<label for=section-a0746926d02d10d842b9d0d7599deab2 class="flex justify-between"><a role=button>设计模式</a></label><ul><li><input type=checkbox id=section-7081c8a81314efcce430f0f34c6571eb class=toggle>
<label for=section-7081c8a81314efcce430f0f34c6571eb class="flex justify-between"><a role=button>创建型</a></label><ul><li><a href=/zh/docs/utility/design_pattern/creation/1_singleton/>单例模式</a></li><li><a href=/zh/docs/utility/design_pattern/creation/2_factory/>工厂模式</a></li><li><a href=/zh/docs/utility/design_pattern/creation/3_abstract_factory/>抽象工厂模式</a></li><li><a href=/zh/docs/utility/design_pattern/creation/4_builder/>建造者模式</a></li></ul></li><li><input type=checkbox id=section-1adf78989f86ee1fe83f52eacf19986b class=toggle>
<label for=section-1adf78989f86ee1fe83f52eacf19986b class="flex justify-between"><a role=button>行为型</a></label><ul><li><a href=/zh/docs/utility/design_pattern/behaviour/1_command/>命令模式</a></li><li><a href=/zh/docs/utility/design_pattern/behaviour/2_observer/>观察者模式</a></li><li><a href=/zh/docs/utility/design_pattern/behaviour/3_strategy/>策略模式</a></li><li><a href=/zh/docs/utility/design_pattern/behaviour/4_template_method/>模板方法模式</a></li></ul></li><li><input type=checkbox id=section-33da1b959d076efbdb019217cc6e3f10 class=toggle>
<label for=section-33da1b959d076efbdb019217cc6e3f10 class="flex justify-between"><a role=button>结构型</a></label><ul><li><a href=/zh/docs/utility/design_pattern/structure/3_decorator/>装饰者模式</a></li><li><a href=/zh/docs/utility/design_pattern/structure/2_adaptor/>适配器模式</a></li><li><a href=/zh/docs/utility/design_pattern/structure/4_%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/>外观模式</a></li><li><a href=/zh/docs/utility/design_pattern/structure/proxy/>代理模式</a></li></ul></li></ul></li></ul></li><li class=book-section-flat><span>实用主义</span><ul><li><input type=checkbox id=section-e0ec0d59ffd2b577bbabd60a51de9e11 class=toggle>
<label for=section-e0ec0d59ffd2b577bbabd60a51de9e11 class="flex justify-between"><a role=button>定时任务</a></label><ul><li><a href=/zh/docs/misc/job/xxl-sharding-job/>在xxl-job中使用分片任务</a></li><li><a href=/zh/docs/misc/job/%E5%B8%B8%E8%A7%81cron%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%A4%BA%E4%BE%8B/>cron表达式速查</a></li></ul></li><li><input type=checkbox id=section-064c88e55046be49abd31400cc335650 class=toggle>
<label for=section-064c88e55046be49abd31400cc335650 class="flex justify-between"><a role=button>版本控制</a></label><ul><li><a href=/zh/docs/misc/vc/Git%E5%85%A5%E9%97%A82/>Git入门2</a></li><li><a href=/zh/docs/misc/vc/Git%E5%85%A5%E9%97%A81/>Git入门1</a></li></ul></li><li><input type=checkbox id=section-2310d269d19e5e48d57d2c9fd6bf08f5 class=toggle>
<label for=section-2310d269d19e5e48d57d2c9fd6bf08f5 class="flex justify-between"><a role=button>翻译文章</a></label><ul><li><a href=/zh/docs/misc/translations/use-springboot-messagesource/>在SpringBoot中使用MessageSource</a></li><li><a href=/zh/docs/misc/translations/guide-to-logback-cn/>使用Logback记录日志</a></li><li><a href=/zh/docs/misc/translations/how2use-printf/>使用printf格式化输出</a></li></ul></li></ul></li><li><input type=checkbox id=section-a1f49812013046640d0e076a1e89d016 class=toggle>
<label for=section-a1f49812013046640d0e076a1e89d016 class="flex justify-between"><a href=/zh/docs/course/>课程笔记</a></label><ul><li><input type=checkbox id=section-2c79e1dd600fed32eea69210704d659e class=toggle>
<label for=section-2c79e1dd600fed32eea69210704d659e class="flex justify-between"><a href=/zh/docs/course/operating_system_peking/>操作系统原理</a></label><ul><li><a href=/zh/docs/course/operating_system_peking/1_intro/>引论</a></li><li><a href=/zh/docs/course/operating_system_peking/2_env_and_logic/>操作系统运行环境与机制</a></li><li><a href=/zh/docs/course/operating_system_peking/3_processes_and_threads/>进程和线程模型</a></li></ul></li><li><input type=checkbox id=section-6cca2128c0876ba0cfa5ec5f3bd26c26 class=toggle>
<label for=section-6cca2128c0876ba0cfa5ec5f3bd26c26 class="flex justify-between"><a href=/zh/docs/course/algorithms_part1/>算法-第一部分</a></label><ul></ul></li></ul></li></ul><ul><li><a href=/zh/posts/>Blog</a></li><li><a href=/zh/friend/>Links</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>在centOS上安装并配置mysql数据库</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#安装mysql>安装MySQL</a></li><li><a href=#配置>配置</a></li><li><a href=#账户与权限>账户与权限</a><ul><li><a href=#账户>账户</a></li><li><a href=#权限>权限</a><ul><li><a href=#给用户授予权限>给用户授予权限</a></li></ul></li></ul></li><li><a href=#数据备份与导入>数据备份与导入</a></li><li><a href=#使用ssl加密连接>使用SSL加密连接</a><ul><li><a href=#查看mysql-ssl状态信息>查看mysql SSL状态信息</a></li><li><a href=#配置ssl安全连接>配置SSL安全连接</a></li></ul></li></ul></nav></aside></header><article class="markdown book-article"><p>文章介绍了在centOS7上安装mysql数据库服务的配置及简单优化过程。在服务器上安装mysql服务网络上能够找到的资源很多了，因此本文没有作详细介绍，本文的重点在于后续的优化配置方面。</p><h1 id=安装mysql>安装MySQL
<a class=anchor href=#%e5%ae%89%e8%a3%85mysql>#</a></h1><ul><li><a href=https://juejin.im/post/5c088b066fb9a049d4419985>在centOS上安装mysql 5.7-juejin</a></li><li><span id=hook></span>
<a href=https://dev.mysql.com/doc/refman/5.7/en/linux-installation-yum-repo.html>通过yum命令安装并进行初始化设置-dev.mysql.com</a></li></ul><h1 id=配置>配置
<a class=anchor href=#%e9%85%8d%e7%bd%ae>#</a></h1><p>mysql的配置文件在<code>/etc/my.cnf</code>， 只是简单地配置了数据库编码为<code>utf8</code>；</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e>### my.cnf配置内容</span>
</span></span><span style=display:flex><span><span style=color:#75715e># For advice on how to change settings please see</span>
</span></span><span style=display:flex><span><span style=color:#75715e># http://dev.mysql.com/doc/refman/5.7/en/server-configuration-defaults.html</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>client<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>default-character-set<span style=color:#f92672>=</span>utf8
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>mysql<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>default-character-set<span style=color:#f92672>=</span>utf8
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>mysqld<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>collation-server <span style=color:#f92672>=</span> utf8_unicode_ci
</span></span><span style=display:flex><span>collation-server <span style=color:#f92672>=</span> utf8_bin
</span></span><span style=display:flex><span>collation-server <span style=color:#f92672>=</span> utf8_general_ci
</span></span><span style=display:flex><span>init-connect<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;SET NAMES utf8&#39;</span>
</span></span><span style=display:flex><span>character-set-server <span style=color:#f92672>=</span> utf8
</span></span><span style=display:flex><span>default-storage-engine <span style=color:#f92672>=</span> INNODB
</span></span><span style=display:flex><span>datadir<span style=color:#f92672>=</span>/var/lib/mysql
</span></span><span style=display:flex><span>socket<span style=color:#f92672>=</span>/var/lib/mysql/mysql.sock
</span></span></code></pre></div><p>mysql有默认配置账户以及测试数据库， root账户也会默认分配密码， 安装
<a href=/zh/#hook>指引链接2</a><strong>官方文档</strong>中说明了默认账户密码:</p><p>1） 在 <code>/var/log/mysqld.log</code>中记录了mysql root账户的默认密码</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#f92672>[</span>root@simple ~<span style=color:#f92672>]</span> cat /var/log/mysqld.log | grep -i <span style=color:#e6db74>&#39;temporary password&#39;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 2019-10-15T07:08:33.627866Z 1 [Note] A temporary password is generated for</span>
</span></span><span style=display:flex><span><span style=color:#75715e># root@localhost: I6cpDa!wj.6&amp;</span>
</span></span></code></pre></div><p>2） 可以使用<code>mysql_secure_installation</code>命令进行初始化设置，程序会询问一些默认设置，包括重置密码，删除匿名账户，禁止root远程登录等等配置</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#f92672>[</span>root@simple ~<span style=color:#f92672>]</span> mysql_secure_installation
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><blockquote><p>还可以通过<code>set password</code>或者> <code>mysqladmin</code>修改密码:</p><pre tabindex=0><code>SET PASSWORD FOR &#39;username&#39;@&#39;scope&#39; = PASSWORD(&#39;newpasswd&#39;)
或者
mysqladmin -uroot -poldpass password newpass;
</code></pre><p>其他的配置 比如设置数据库时间为服务器时间(默认为UTC时间)<b>并没有成功</b></p></blockquote><h1 id=账户与权限>账户与权限
<a class=anchor href=#%e8%b4%a6%e6%88%b7%e4%b8%8e%e6%9d%83%e9%99%90>#</a></h1><p>前已述及，mysql默认配置root账户，并且已经<strong>只能本地登录</strong>(出于安全考虑)，并且不建议使用root账户进行数据库连接；</p><p>因此，需要新账户，并且要控制账户权限，防止一些不可预见的错误出现；</p><p>同时，账户创建之后需赋予适当的权限；</p><h2 id=账户>账户
<a class=anchor href=#%e8%b4%a6%e6%88%b7>#</a></h2><p>使用以下命令创建账户:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>create</span> <span style=color:#66d9ef>user</span> username<span style=color:#f92672>@</span><span style=color:#e6db74>&#39;scope&#39;</span> <span style=color:#66d9ef>IDENTIFIED</span> <span style=color:#66d9ef>BY</span> <span style=color:#e6db74>&#39;passwd@&#39;</span>;
</span></span></code></pre></div><p>关于账户说明</p><ul><li><p>mysql 5.7加入了<code>validate_password</code>机制，该机制迫使用户使用[强密码]&ndash;至少8位，且至少包含一个大写字母，一个小写字母，一个数字，一个特殊符号；若想关闭此功能，可在<code>my.cnf</code>中的[mysqld]栏下配置<code>validate_password=Off</code>；</p></li><li><p>scope项指定用户可以从哪里登录，一般<code>localhost</code>只允许本地(或ssh登录)，<code>%</code>允许任意ip位置登录，</p></li></ul><h2 id=权限>权限
<a class=anchor href=#%e6%9d%83%e9%99%90>#</a></h2><p>mysql的权限可以简单介绍为:</p><table><thead><tr><th style=text-align:center>权限</th><th style=text-align:center>描述</th></tr></thead><tbody><tr><td style=text-align:center>全局权限</td><td style=text-align:center>privilege for all schemas； 信息保存在mysql.user表中</td></tr><tr><td style=text-align:center>schema权限</td><td style=text-align:center>privilege for all tables； 信息保存在mysql.db中</td></tr><tr><td style=text-align:center>table权限</td><td style=text-align:center>privilege for all columns； 信息保存在mysql.tables_priv中</td></tr><tr><td style=text-align:center>column权限</td><td style=text-align:center>privilege for column；信息保存在mysql.columns_priv中</td></tr><tr><td style=text-align:center>子程序权限</td><td style=text-align:center>?</td></tr></tbody></table><p>权限的细致说明以及，各类权限所保存的表，可参考:</p><ol><li><a href=https://www.cnblogs.com/kerrycode/p/7423850.html>MySQL 查看用户授予的权限</a></li><li><a href=https://dev.mysql.com/doc/refman/5.7/en/privileges-provided.html>Privileges Provided by MySQL</a></li><li><a href=https://dev.mysql.com/doc/refman/5.7/en/grant-tables.html>Grant Tables</a></li></ol><p>最简单的查看用户权限的方法</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>show grants <span style=color:#66d9ef>for</span> user;
</span></span><span style=display:flex><span>show grants <span style=color:#66d9ef>for</span> user@<span style=color:#e6db74>&#39;localhost&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#75715e># 查看root的权限</span>
</span></span><span style=display:flex><span>mysql&gt; show grants <span style=color:#66d9ef>for</span> root@<span style=color:#e6db74>&#39;localhost&#39;</span>;
</span></span><span style=display:flex><span>+---------------------------------------------------------------------+
</span></span><span style=display:flex><span>| Grants <span style=color:#66d9ef>for</span> root@localhost                                           |
</span></span><span style=display:flex><span>+---------------------------------------------------------------------+
</span></span><span style=display:flex><span>| GRANT ALL PRIVILEGES ON *.* TO <span style=color:#e6db74>&#39;root&#39;</span>@<span style=color:#e6db74>&#39;localhost&#39;</span> WITH GRANT OPTION |
</span></span><span style=display:flex><span>| GRANT PROXY ON <span style=color:#e6db74>&#39;&#39;</span>@<span style=color:#e6db74>&#39;&#39;</span> TO <span style=color:#e6db74>&#39;root&#39;</span>@<span style=color:#e6db74>&#39;localhost&#39;</span> WITH GRANT OPTION        |
</span></span><span style=display:flex><span>+---------------------------------------------------------------------+
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span> rows in set <span style=color:#f92672>(</span>0.00 sec<span style=color:#f92672>)</span>
</span></span></code></pre></div><p>从上面可以看出，root有[*.*的<strong>所有权限</strong>]，至于*.*，代表了ALLDB.ALLTABLES-即<strong>所有数据库的所有表</strong>，这是最高权限。</p><p>或者，可以通过查询<code>mysql.user</code>表来获取权限信息</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>select</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>from</span> mysql.<span style=color:#66d9ef>user</span> <span style=color:#66d9ef>where</span> <span style=color:#66d9ef>user</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;root&#39;</span><span style=color:#960050;background-color:#1e0010>\</span><span style=color:#66d9ef>G</span>;
</span></span><span style=display:flex><span><span style=color:#f92672>***************************</span> <span style=color:#ae81ff>1</span>. <span style=color:#66d9ef>row</span> <span style=color:#f92672>***************************</span>
</span></span><span style=display:flex><span>                  <span style=color:#66d9ef>Host</span>: localhost
</span></span><span style=display:flex><span>                  <span style=color:#66d9ef>User</span>: root
</span></span><span style=display:flex><span>           Select_priv: Y
</span></span><span style=display:flex><span>           Insert_priv: Y
</span></span><span style=display:flex><span>           Update_priv: Y
</span></span><span style=display:flex><span>           Delete_priv: Y
</span></span><span style=display:flex><span><span style=color:#f92672>#</span> <span style=color:#66d9ef>ignore</span> others
</span></span></code></pre></div><h3 id=给用户授予权限>给用户授予权限
<a class=anchor href=#%e7%bb%99%e7%94%a8%e6%88%b7%e6%8e%88%e4%ba%88%e6%9d%83%e9%99%90>#</a></h3><p>假设我们创建了一个用户<code>test</code>，并且没有授予任何权限，name，这个用户的权限是这样的；</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>mysql&gt; show grants <span style=color:#66d9ef>for</span> test;
</span></span><span style=display:flex><span>+---------------------------------------+
</span></span><span style=display:flex><span>| Grants <span style=color:#66d9ef>for</span> hc_future@%                |
</span></span><span style=display:flex><span>+---------------------------------------+
</span></span><span style=display:flex><span>| GRANT USAGE ON *.* TO <span style=color:#e6db74>&#39;hc_future&#39;</span>@<span style=color:#e6db74>&#39;%&#39;</span> |
</span></span><span style=display:flex><span>+---------------------------------------+
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row in set <span style=color:#f92672>(</span>0.00 sec<span style=color:#f92672>)</span>
</span></span></code></pre></div><p>可以看到，实际上<code>test</code>并没有任何权限；</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>select</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>from</span> <span style=color:#66d9ef>user</span> <span style=color:#66d9ef>where</span> <span style=color:#66d9ef>user</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;test&#39;</span><span style=color:#960050;background-color:#1e0010>\</span><span style=color:#66d9ef>G</span>;
</span></span><span style=display:flex><span><span style=color:#f92672>***************************</span> <span style=color:#ae81ff>1</span>. <span style=color:#66d9ef>row</span> <span style=color:#f92672>***************************</span>
</span></span><span style=display:flex><span>                  <span style=color:#66d9ef>Host</span>: <span style=color:#f92672>%</span>
</span></span><span style=display:flex><span>                  <span style=color:#66d9ef>User</span>: hc_future
</span></span><span style=display:flex><span>           Select_priv: N
</span></span><span style=display:flex><span>           Insert_priv: N
</span></span><span style=display:flex><span>           Update_priv: N
</span></span><span style=display:flex><span>           Delete_priv: N
</span></span><span style=display:flex><span><span style=color:#f92672>***************************</span> <span style=color:#ae81ff>1</span>. <span style=color:#66d9ef>row</span> <span style=color:#f92672>***************************</span>
</span></span></code></pre></div><p>尝试使用该账户对mysql进行任何操作都会得到一个错误信息：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>[<span style=color:#ae81ff>42000</span>][<span style=color:#ae81ff>1044</span>] <span style=color:#66d9ef>Access</span> denied <span style=color:#66d9ef>for</span> <span style=color:#66d9ef>user</span> <span style=color:#e6db74>&#39;hc_future&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> <span style=color:#66d9ef>to</span> <span style=color:#66d9ef>database</span> <span style=color:#e6db74>&#39;test&#39;</span>
</span></span></code></pre></div><p>显然，我们应该给用户授予部分权限，已让其完成操作，mysql使用<code>grant</code>来给用户授予权限</p><p>若我想给<code>test</code>授予全局select，update权限:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>grant</span> <span style=color:#66d9ef>select</span><span style=color:#960050;background-color:#1e0010>，</span> <span style=color:#66d9ef>update</span> <span style=color:#66d9ef>on</span> <span style=color:#f92672>*</span>.<span style=color:#f92672>*</span> <span style=color:#66d9ef>to</span> test<span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> identified <span style=color:#66d9ef>by</span> <span style=color:#e6db74>&#39;testT123!@#&#39;</span>;
</span></span><span style=display:flex><span>Query OK<span style=color:#960050;background-color:#1e0010>，</span> <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>rows</span> affected<span style=color:#960050;background-color:#1e0010>，</span> <span style=color:#ae81ff>1</span> warning (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>show</span> grants <span style=color:#66d9ef>for</span> test;
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>------------------------------------------------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>|</span> Grants <span style=color:#66d9ef>for</span> test<span style=color:#f92672>@%</span>                         <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>------------------------------------------------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>|</span> <span style=color:#66d9ef>GRANT</span> <span style=color:#66d9ef>SELECT</span><span style=color:#960050;background-color:#1e0010>，</span> <span style=color:#66d9ef>UPDATE</span> <span style=color:#66d9ef>ON</span> <span style=color:#f92672>*</span>.<span style=color:#f92672>*</span> <span style=color:#66d9ef>TO</span> <span style=color:#e6db74>&#39;test&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>------------------------------------------------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#ae81ff>1</span> <span style=color:#66d9ef>row</span> <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>select</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>from</span> <span style=color:#66d9ef>user</span> <span style=color:#66d9ef>where</span> <span style=color:#66d9ef>user</span> <span style=color:#f92672>=</span><span style=color:#e6db74>&#39;test&#39;</span><span style=color:#960050;background-color:#1e0010>\</span><span style=color:#66d9ef>G</span>;
</span></span><span style=display:flex><span><span style=color:#f92672>***************************</span> <span style=color:#ae81ff>1</span>. <span style=color:#66d9ef>row</span> <span style=color:#f92672>***************************</span>
</span></span><span style=display:flex><span>                  <span style=color:#66d9ef>Host</span>: <span style=color:#f92672>%</span>
</span></span><span style=display:flex><span>                  <span style=color:#66d9ef>User</span>: hc_future
</span></span><span style=display:flex><span>           Select_priv: Y
</span></span><span style=display:flex><span>           Insert_priv: N
</span></span><span style=display:flex><span>           Update_priv: Y
</span></span><span style=display:flex><span>           Delete_priv: N
</span></span><span style=display:flex><span>           Create_priv: N
</span></span><span style=display:flex><span>           <span style=color:#f92672>#</span> <span style=color:#66d9ef>ignore</span> others
</span></span></code></pre></div><p><strong>mysql 5.7.28中， 如果grant命令执行的用户没有被创建，会默认创建该用户</strong></p><p>更多关于grant的使用，参考官方文档
<a href=https://dev.mysql.com/doc/refman/5.7/en/grant.html>GRANT Syntax</a></p><h1 id=数据备份与导入>数据备份与导入
<a class=anchor href=#%e6%95%b0%e6%8d%ae%e5%a4%87%e4%bb%bd%e4%b8%8e%e5%af%bc%e5%85%a5>#</a></h1><p>主要使用<code>mysqldump</code>和<code>source</code>来进行数据库的备份和恢复</p><p>数据库的备份主要分为结构和数据的备份，备份为<code>x.sql</code>形式的文件</p><p>从备份的结果来看，</p><ul><li>备份结构主要生成<code>create table</code>语句</li><li>备份数据生成<code>insert into</code>语句</li></ul><p>除此之外，备份的范围可从库到表之间多级变化， 总言之， <code>mysqldump</code>满足绝大多数备份需求；</p><p>需要说明的是，若数据库中有视图，则需要谨慎行事了， 因为视图中存在一些对原数据库表的引用以及对
<a href=https://www.cnblogs.com/zejin2008/p/4767531.html>执行用户的DEFINER</a>， 若恢复的数据库和备份的数据库名字以及用户一致，则不会存在问题，否则可能会出现找不到表的错误</p><p>而数据库的恢复则简单了，<code>source x.sql</code>即可</p><p>更多关于数据库备份恢复的细节，查看:
<a href=https://www.cnblogs.com/chevin/p/5683281.html>mysqldump 导入/导出 结构&数据&存储过程&函数&事件&触发器</a></p><h1 id=使用ssl加密连接>使用SSL加密连接
<a class=anchor href=#%e4%bd%bf%e7%94%a8ssl%e5%8a%a0%e5%af%86%e8%bf%9e%e6%8e%a5>#</a></h1><p>在<code>jdbc</code>连接数据库的过程中可能会出现这样的警告:</p><blockquote><p>Establishing SSL connection without server&rsquo;s identity verification is not recommended.
According to MySQL 5.5.45+， 5.6.26+ and 5.7.6+ requirements SSL connection must be
established by default if explicit option isn&rsquo;t set. For compliance with existing applications
not using SSL the verifyServerCertificate property is set to &lsquo;false&rsquo;. You need either to
explicitly disable SSL by setting useSSL=false， or set useSSL=true and provide
truststore for server certificate verification.</p></blockquote><p>有时候，设置<code>useSSL=true</code>又会遇到这样的错误:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>Caused by: javax.<span style=color:#a6e22e>net</span>.<span style=color:#a6e22e>ssl</span>.<span style=color:#a6e22e>SSLHandshakeException</span>:
</span></span><span style=display:flex><span>sun.<span style=color:#a6e22e>security</span>.<span style=color:#a6e22e>validator</span>.<span style=color:#a6e22e>ValidatorException</span>: PKIX path building failed: sun.<span style=color:#a6e22e>security</span>.<span style=color:#a6e22e>provider</span>.<span style=color:#a6e22e>certpath</span>.<span style=color:#a6e22e>SunCertPathBuilderException</span>:
</span></span><span style=display:flex><span>unable to find valid certification path to requested target
</span></span><span style=display:flex><span>	at sun.<span style=color:#a6e22e>security</span>.<span style=color:#a6e22e>ssl</span>.<span style=color:#a6e22e>Alerts</span>.<span style=color:#a6e22e>getSSLException</span>(Alerts.<span style=color:#a6e22e>java</span>:192)
</span></span><span style=display:flex><span>	at sun.<span style=color:#a6e22e>security</span>.<span style=color:#a6e22e>ssl</span>.<span style=color:#a6e22e>SSLSocketImpl</span>.<span style=color:#a6e22e>fatal</span>(SSLSocketImpl.<span style=color:#a6e22e>java</span>:1946)
</span></span><span style=display:flex><span>	at sun.<span style=color:#a6e22e>security</span>.<span style=color:#a6e22e>ssl</span>.<span style=color:#a6e22e>Handshaker</span>.<span style=color:#a6e22e>fatalSE</span>(Handshaker.<span style=color:#a6e22e>java</span>:316)
</span></span><span style=display:flex><span>	at sun.<span style=color:#a6e22e>security</span>.<span style=color:#a6e22e>ssl</span>.<span style=color:#a6e22e>Handshaker</span>.<span style=color:#a6e22e>fatalSE</span>(Handshaker.<span style=color:#a6e22e>java</span>:310)
</span></span><span style=display:flex><span>	... 67 more
</span></span></code></pre></div><p>上述错误的大意是没找到ssl证书， 那么问题出在了<del>mysql配置</del>服务端或者客户端的配置上</p><p>由于mysql 5.7以上默认开启了ssl，验证一下</p><h2 id=查看mysql-ssl状态信息>查看mysql SSL状态信息
<a class=anchor href=#%e6%9f%a5%e7%9c%8bmysql-ssl%e7%8a%b6%e6%80%81%e4%bf%a1%e6%81%af>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#f92672>#</span> <span style=color:#960050;background-color:#1e0010>使用</span>root账户登录 mysql <span style=color:#f92672>-</span>u root <span style=color:#f92672>-</span>p
</span></span><span style=display:flex><span><span style=color:#f92672>#</span> <span style=color:#960050;background-color:#1e0010>查看</span>ssl信息
</span></span><span style=display:flex><span><span style=color:#f92672>#</span> Server <span style=color:#66d9ef>version</span>: <span style=color:#ae81ff>5</span>.<span style=color:#ae81ff>7</span>.<span style=color:#ae81ff>28</span> MySQL Community Server (GPL)
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>show</span> <span style=color:#66d9ef>global</span> variables <span style=color:#66d9ef>like</span> <span style=color:#e6db74>&#39;%ssl%&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>---------------+-----------------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>|</span> Variable_name <span style=color:#f92672>|</span> Value           <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>---------------+-----------------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>|</span> have_openssl  <span style=color:#f92672>|</span> YES             <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> have_ssl      <span style=color:#f92672>|</span> YES             <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> ssl_ca        <span style=color:#f92672>|</span> ca.pem          <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> ssl_capath    <span style=color:#f92672>|</span>                 <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> ssl_cert      <span style=color:#f92672>|</span> server<span style=color:#f92672>-</span>cert.pem <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> ssl_cipher    <span style=color:#f92672>|</span>                 <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> ssl_crl       <span style=color:#f92672>|</span>                 <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> ssl_crlpath   <span style=color:#f92672>|</span>                 <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> ssl_key       <span style=color:#f92672>|</span> server<span style=color:#f92672>-</span><span style=color:#66d9ef>key</span>.pem  <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>---------------+-----------------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#ae81ff>9</span> <span style=color:#66d9ef>rows</span> <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span><span style=display:flex><span><span style=color:#f92672>#</span>have_ssl <span style=color:#f92672>=</span> YES<span style=color:#960050;background-color:#1e0010>，</span> <span style=color:#960050;background-color:#1e0010>说明</span>ssl已经启用
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>#</span><span style=color:#960050;background-color:#1e0010>查看当前用户的连接信息</span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#960050;background-color:#1e0010>\</span>s;
</span></span><span style=display:flex><span><span style=color:#75715e>--------------
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>mysql  Ver <span style=color:#ae81ff>14</span>.<span style=color:#ae81ff>14</span> Distrib <span style=color:#ae81ff>5</span>.<span style=color:#ae81ff>7</span>.<span style=color:#ae81ff>28</span><span style=color:#960050;background-color:#1e0010>，</span> <span style=color:#66d9ef>for</span> Linux (x86_64) <span style=color:#66d9ef>using</span>  EditLine wrapper
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>Connection</span> id:		<span style=color:#ae81ff>157</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>Current</span> <span style=color:#66d9ef>database</span>:
</span></span><span style=display:flex><span><span style=color:#66d9ef>Current</span> <span style=color:#66d9ef>user</span>:		root<span style=color:#f92672>@</span>localhost
</span></span><span style=display:flex><span>SSL:			<span style=color:#66d9ef>Not</span> <span style=color:#66d9ef>in</span> use
</span></span><span style=display:flex><span><span style=color:#66d9ef>Current</span> pager:		<span style=color:#66d9ef>stdout</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>Using</span> outfile:		<span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>Using</span> <span style=color:#66d9ef>delimiter</span>:	;
</span></span><span style=display:flex><span>Server <span style=color:#66d9ef>version</span>:		<span style=color:#ae81ff>5</span>.<span style=color:#ae81ff>7</span>.<span style=color:#ae81ff>28</span> MySQL Community Server (GPL)
</span></span><span style=display:flex><span>Protocol <span style=color:#66d9ef>version</span>:	<span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>Connection</span>:		Localhost via UNIX socket
</span></span><span style=display:flex><span>Server characterset:	utf8
</span></span><span style=display:flex><span>Db     characterset:	utf8
</span></span><span style=display:flex><span>Client characterset:	utf8
</span></span><span style=display:flex><span>Conn.  characterset:	utf8
</span></span><span style=display:flex><span>UNIX socket:		<span style=color:#f92672>/</span>var<span style=color:#f92672>/</span>lib<span style=color:#f92672>/</span>mysql<span style=color:#f92672>/</span>mysql.sock
</span></span><span style=display:flex><span>Uptime:			<span style=color:#ae81ff>23</span> hours <span style=color:#ae81ff>21</span> <span style=color:#66d9ef>min</span> <span style=color:#ae81ff>57</span> sec
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Threads: <span style=color:#ae81ff>5</span>  Questions: <span style=color:#ae81ff>10325</span>  Slow queries: <span style=color:#ae81ff>0</span>  Opens: <span style=color:#ae81ff>5061</span>  Flush tables: <span style=color:#ae81ff>1</span>  <span style=color:#66d9ef>Open</span> tables: <span style=color:#ae81ff>1543</span>  Queries per <span style=color:#66d9ef>second</span> <span style=color:#66d9ef>avg</span>: <span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>122</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--------------
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>ERROR:
</span></span><span style=display:flex><span><span style=color:#66d9ef>No</span> query specified
</span></span><span style=display:flex><span><span style=color:#f92672>#</span>SSL<span style=color:#f92672>=</span><span style=color:#66d9ef>Not</span> <span style=color:#66d9ef>in</span> use <span style=color:#960050;background-color:#1e0010>说明没有使用</span>ssl连接
</span></span></code></pre></div><p>结果显示， mysql 5.7.28已经启用了ssl，并且可以不使用ssl登录</p><p>根据上面的错误， jdbc连接错误的原因是由于<em>证书错误</em>， 做个测试:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#f92672>[</span>root@iZbp17pma26sz5vqqwb1v3Z ~<span style=color:#f92672>]</span><span style=color:#75715e># mysql -u root -p --ssl-ca=</span>
</span></span><span style=display:flex><span>Enter password:
</span></span><span style=display:flex><span>ERROR <span style=color:#ae81ff>2026</span> <span style=color:#f92672>(</span>HY000<span style=color:#f92672>)</span>: SSL connection error: SSL_CTX_set_default_verify_paths failed
</span></span></code></pre></div><p>当使用SSL登录而不指定证书的时候我们无法登录</p><blockquote><p>如果你的mysql没有开启SSL，当使用<code>mysql -u root -p --ssl</code>登录的时候，会得到如下错误:
<code>ERROR 2026(HY000): SSL connection error: SSL is required but the server doesn't support it</code></p></blockquote><h2 id=配置ssl安全连接>配置SSL安全连接
<a class=anchor href=#%e9%85%8d%e7%bd%aessl%e5%ae%89%e5%85%a8%e8%bf%9e%e6%8e%a5>#</a></h2><p>那么， mysql的证书在哪里? 可能根据安装方式不同， 配置文件路径不一样， 使用yum源安装mysql时，实际上可以在<code>var/lib/mysql</code>里找到mysql的证书文件:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#f92672>[</span>root@sample ~<span style=color:#f92672>]</span><span style=color:#75715e># ll /var/lib/mysql/*.pem</span>
</span></span><span style=display:flex><span>-rw------- <span style=color:#ae81ff>1</span> mysql mysql <span style=color:#ae81ff>1676</span> Oct <span style=color:#ae81ff>15</span> 15:08 /var/lib/mysql/ca-key.pem
</span></span><span style=display:flex><span>-rw-r--r-- <span style=color:#ae81ff>1</span> mysql mysql <span style=color:#ae81ff>1112</span> Oct <span style=color:#ae81ff>15</span> 15:08 /var/lib/mysql/ca.pem
</span></span><span style=display:flex><span>-rw-r--r-- <span style=color:#ae81ff>1</span> mysql mysql <span style=color:#ae81ff>1112</span> Oct <span style=color:#ae81ff>15</span> 15:08 /var/lib/mysql/client-cert.pem
</span></span><span style=display:flex><span>-rw------- <span style=color:#ae81ff>1</span> mysql mysql <span style=color:#ae81ff>1680</span> Oct <span style=color:#ae81ff>15</span> 15:08 /var/lib/mysql/client-key.pem
</span></span><span style=display:flex><span>-rw------- <span style=color:#ae81ff>1</span> mysql mysql <span style=color:#ae81ff>1680</span> Oct <span style=color:#ae81ff>15</span> 15:08 /var/lib/mysql/private_key.pem
</span></span><span style=display:flex><span>-rw-r--r-- <span style=color:#ae81ff>1</span> mysql mysql  <span style=color:#ae81ff>452</span> Oct <span style=color:#ae81ff>15</span> 15:08 /var/lib/mysql/public_key.pem
</span></span><span style=display:flex><span>-rw-r--r-- <span style=color:#ae81ff>1</span> mysql mysql <span style=color:#ae81ff>1112</span> Oct <span style=color:#ae81ff>15</span> 15:08 /var/lib/mysql/server-cert.pem
</span></span><span style=display:flex><span>-rw------- <span style=color:#ae81ff>1</span> mysql mysql <span style=color:#ae81ff>1680</span> Oct <span style=color:#ae81ff>15</span> 15:08 /var/lib/mysql/server-key.pem
</span></span></code></pre></div><p>我们指定证书试试看:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#f92672>[</span>root@sample ~<span style=color:#f92672>]</span><span style=color:#75715e># mysql -u root -p --ssl-ca=/var/lib/mysql/ca.pem</span>
</span></span><span style=display:flex><span>Enter password:
</span></span><span style=display:flex><span>Welcome to the MySQL monitor.  Commands end with ; or <span style=color:#ae81ff>\g</span>.
</span></span><span style=display:flex><span>Your MySQL connection id is <span style=color:#ae81ff>161</span>
</span></span><span style=display:flex><span>Server version: 5.7.28 MySQL Community Server <span style=color:#f92672>(</span>GPL<span style=color:#f92672>)</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#960050;background-color:#1e0010>\</span>s;
</span></span><span style=display:flex><span><span style=color:#75715e>--------------
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>mysql  Ver <span style=color:#ae81ff>14</span>.<span style=color:#ae81ff>14</span> Distrib <span style=color:#ae81ff>5</span>.<span style=color:#ae81ff>7</span>.<span style=color:#ae81ff>28</span><span style=color:#960050;background-color:#1e0010>，</span> <span style=color:#66d9ef>for</span> Linux (x86_64) <span style=color:#66d9ef>using</span>  EditLine wrapper
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>Connection</span> id:		<span style=color:#ae81ff>161</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>Current</span> <span style=color:#66d9ef>database</span>:
</span></span><span style=display:flex><span><span style=color:#66d9ef>Current</span> <span style=color:#66d9ef>user</span>:		root<span style=color:#f92672>@</span>localhost
</span></span><span style=display:flex><span><span style=color:#f92672>**</span>SSL:			Cipher <span style=color:#66d9ef>in</span> use <span style=color:#66d9ef>is</span> ECDHE<span style=color:#f92672>-</span>RSA<span style=color:#f92672>-</span>AES128<span style=color:#f92672>-</span>GCM<span style=color:#f92672>-</span>SHA256<span style=color:#f92672>**</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>Current</span> pager:		<span style=color:#66d9ef>stdout</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>Using</span> outfile:		<span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>Using</span> <span style=color:#66d9ef>delimiter</span>:	;
</span></span><span style=display:flex><span>Server <span style=color:#66d9ef>version</span>:		<span style=color:#ae81ff>5</span>.<span style=color:#ae81ff>7</span>.<span style=color:#ae81ff>28</span> MySQL Community Server (GPL)
</span></span><span style=display:flex><span>Protocol <span style=color:#66d9ef>version</span>:	<span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>Connection</span>:		Localhost via UNIX socket
</span></span><span style=display:flex><span>Server characterset:	utf8
</span></span><span style=display:flex><span>Db     characterset:	utf8
</span></span><span style=display:flex><span>Client characterset:	utf8
</span></span><span style=display:flex><span>Conn.  characterset:	utf8
</span></span><span style=display:flex><span>UNIX socket:		<span style=color:#f92672>/</span>var<span style=color:#f92672>/</span>lib<span style=color:#f92672>/</span>mysql<span style=color:#f92672>/</span>mysql.sock
</span></span><span style=display:flex><span>Uptime:			<span style=color:#ae81ff>1</span> <span style=color:#66d9ef>day</span> <span style=color:#ae81ff>14</span> <span style=color:#66d9ef>min</span> <span style=color:#ae81ff>19</span> sec
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Threads: <span style=color:#ae81ff>3</span>  Questions: <span style=color:#ae81ff>10335</span>  Slow queries: <span style=color:#ae81ff>0</span>  Opens: <span style=color:#ae81ff>5061</span>  Flush tables: <span style=color:#ae81ff>1</span>  <span style=color:#66d9ef>Open</span> tables: <span style=color:#ae81ff>1543</span>  Queries per <span style=color:#66d9ef>second</span> <span style=color:#66d9ef>avg</span>: <span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>118</span>
</span></span><span style=display:flex><span><span style=color:#75715e>--------------
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>ERROR:
</span></span><span style=display:flex><span><span style=color:#66d9ef>No</span> query specified
</span></span></code></pre></div><p>可以看到， 连接信息的SSL信息变成了<code>Cipher in use is ECDHE-RSA-AES128-GCM-SHA256</code>， 说明mysql可以使用SSL登录</p><p>关于mysql ssl证书的生成，参考
<a href=https://dev.mysql.com/doc/refman/5.6/en/creating-ssl-files-using-openssl.html>creating-ssl-files-using-openssl</a></p><p>既然可以指定证书使用SSL， jdbc为什么报错?</p><p><code>/etc/my.cnf</code>里没有ssl配置?</p><p>如何使用SSL连接，参考
<a href=https://dev.mysql.com/doc/refman/5.6/en/using-encrypted-connections.html>Use Encrypted Connections</a></p><p>在<code>/etc/my.cnf</code>中添加</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-properties data-lang=properties><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>[mysqld]</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>ssl-ca</span><span style=color:#f92672>=</span><span style=color:#e6db74>ca.pem</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>ssl-cert</span><span style=color:#f92672>=</span><span style=color:#e6db74>server-cert.pem</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>ssl-key</span><span style=color:#f92672>=</span><span style=color:#e6db74>server-key.pem</span>
</span></span></code></pre></div><p>使用<code>service mysqld restart</code>重启mysql server， 让后看看服务端ssl配置是否生效:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#f92672>[</span>root@sample ~<span style=color:#f92672>]</span><span style=color:#75715e># service mysqld restart</span>
</span></span><span style=display:flex><span>Redirecting to /bin/systemctl restart mysqld.service
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@sample ~<span style=color:#f92672>]</span><span style=color:#75715e># mysql -u root -p --ssl</span>
</span></span><span style=display:flex><span>WARNING: --ssl is deprecated and will be removed in a future version. Use --ssl-mode instead.
</span></span><span style=display:flex><span>Enter password:
</span></span><span style=display:flex><span>Welcome to the MySQL monitor.  Commands end with ; or <span style=color:#ae81ff>\g</span>.
</span></span><span style=display:flex><span>Your MySQL connection id is <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>Server version: 5.7.28 MySQL Community Server <span style=color:#f92672>(</span>GPL<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>mysql&gt; <span style=color:#ae81ff>\s</span>;
</span></span><span style=display:flex><span>--------------
</span></span><span style=display:flex><span>mysql  Ver 14.14 Distrib 5.7.28， <span style=color:#66d9ef>for</span> Linux <span style=color:#f92672>(</span>x86_64<span style=color:#f92672>)</span> using  EditLine wrapper
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Connection id:		<span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>Current database:
</span></span><span style=display:flex><span>Current user:		root@localhost
</span></span><span style=display:flex><span>SSL:			Cipher in use is ECDHE-RSA-AES128-GCM-SHA256
</span></span><span style=display:flex><span>Current pager:		stdout
</span></span><span style=display:flex><span>Using outfile:		<span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>Using delimiter:	;
</span></span><span style=display:flex><span>Server version:		5.7.28 MySQL Community Server <span style=color:#f92672>(</span>GPL<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Protocol version:	<span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>Connection:		Localhost via UNIX socket
</span></span><span style=display:flex><span>Server characterset:	utf8
</span></span><span style=display:flex><span>Db     characterset:	utf8
</span></span><span style=display:flex><span>Client characterset:	utf8
</span></span><span style=display:flex><span>Conn.  characterset:	utf8
</span></span><span style=display:flex><span>UNIX socket:		/var/lib/mysql/mysql.sock
</span></span><span style=display:flex><span>Uptime:			<span style=color:#ae81ff>12</span> sec
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Threads: <span style=color:#ae81ff>1</span>  Questions: <span style=color:#ae81ff>5</span>  Slow queries: <span style=color:#ae81ff>0</span>  Opens: <span style=color:#ae81ff>105</span>  Flush tables: <span style=color:#ae81ff>1</span>  Open tables: <span style=color:#ae81ff>98</span>  Queries per second avg: 0.416
</span></span><span style=display:flex><span><span style=color:#ae81ff>\-</span>-------------
</span></span></code></pre></div><p>看到，我们使用ssl登录mysql，这一次并没有指定证书，而mysql连接成功，说明mysql服务端ssl配置成功了</p><p>事实上，做到此步后，jdbc里使用</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span>jdbc:mysql://47.110.226.247:3306/hcfuture_bundule?useUnicode=true<span style=color:#960050;background-color:#1e0010>&amp;</span>characterEncoding=UTF-8<span style=color:#960050;background-color:#1e0010>&amp;</span>zeroDateTimeBehavior=convertToNull<span style=color:#960050;background-color:#1e0010>&amp;</span>useSSL=true
</span></span></code></pre></div><p>这样的数据库url仍然得到同样的错误；个人认为是由于当客户端设置<code>useSSL=true</code>时，同样需要配置客户端的SSL证书信息</p><p>如何在客户端使用SSL，可以参考
<a href=https://dev.mysql.com/doc/connector-j/5.1/en/connector-j-reference-using-ssl.html>connector-j-reference-using-ssl</a></p><p>以下内容摘自(
<a href=https://www.sojpt.com/feedback/5723%29>https://www.sojpt.com/feedback/5723)</a>:</p><blockquote><p>首先mysql服务端要支持ssl，支持ssl需要以下条件：</p><ol><li><p>创建ssl证书和密钥&ndash;生成ca.pem server-cert.pem client-cert.pem 文件
mysql提供两种方式
一种方式用openssl编译的mysql版本可以在启动时生成（参考链接：https://dev.mysql.com/doc/refman/5.7/en/creating-ssl-rsa-files-using-mysql.html）；
第二种方式用openssl生成（采用的方式），（参考链接：https://dev.mysql.com/doc/refman/5.7/en/creating-ssl-files-using-openssl.html）</p></li><li><p>配置服务器支持（参考链接：https://dev.mysql.com/doc/refman/5.7/en/using-encrypted-connections.html）
主要时需要在my.cnf中需要添加以下配置，文件路径自行修改；还可以指定某个用户必须使用ssl链接等，详情参考官方的链接</p></li></ol><pre tabindex=0><code>[mysqld]
ssl-ca=ca.pem
ssl-cert=server-cert.pem
ssl-key=server-key.pem
require_secure_transport=ON
</code></pre><p>客户端链接需要以下几个步骤</p><ol><li>需要将服务端的pem证书转换成java支持的JKS证书，得到keystore.jks和truststore.jks：
参考链接1：（可用）https://biteeniu.github.io/ssl/convert_pem_to_jks/
参考链接2：（官方但连不上不知道什么原因）https://dev.mysql.com/doc/connector-j/5.1/en/connector-j-reference-using-ssl.html</li><li>修改mysql链接，指定链接方式为ssl
jdbc:mysql://127.0.0.1:3306/test?useUnicode=true&amp;characterEncoding=utf-8&amp;verifyServerCertificate=true&amp;useSSL=true&amp;requireSSL=true</li><li>加载生成的jks证书和密码到系统属性，要在ActiveRecordPlugin之前
// keystore.jks和truststore.jks所在的路径，及创建时的密码
System.setProperty(&ldquo;javax.net.ssl.keyStore&rdquo;， &ldquo;path/keystore.jks&rdquo;);
System.setProperty(&ldquo;javax.net.ssl.keyStorePassword&rdquo;， &ldquo;password&rdquo;);
System.setProperty(&ldquo;javax.net.ssl.trustStore&rdquo;，&ldquo;path/truststore.jks&rdquo;);
System.setProperty(&ldquo;javax.net.ssl.trustStorePassword&rdquo;， &ldquo;password&rdquo;);</li></ol></blockquote><p>实在是很繁琐，不过我估计此法是可行的，实际上是配置客户端的certificate，我嫌繁琐并没有尝试</p><p>实际上，我在官方文档里看到了此段话:</p><blockquote><p>By default， Connector/J establishes secure connections with the MySQL servers. Note that MySQL servers 5.7 and 8.0， when compiled with OpenSSL， can automatically generate missing SSL files at startup and configure the SSL connection accordingly.</p><p>As long as the server is correctly configured to use SSL， there is no need to configure anything on the Connector/J client to use encrypted connections (the exception is when Connector/J is connecting to very old server versions like 5.6.25 and earlier or 5.7.5 and earlier， in which case the client must set the connection property useSSL=true in order to use encrypted connections). The client can demand SSL to be used by setting the connection property requireSSL=true; the connection then fails if the server is not configured to use SSL. Without requireSSL=true， the connection just falls back to non-encrypted mode if the server is not configured to use SSL.</p></blockquote><p>实际上，此前我们mysql server的SSL已经成功配置，已经验证通过<code>mysql -u test -p -h your serverip</code>远程登录mysql后，通过<code>status</code>查看连接信息可以看到是通过SSL连接的</p><p>结合此段声明， mysql 5.7以后的连接是加密的(需要服务端开启SSL)，故无需费时在客户端进行ssl配置(特殊需求除外)</p><p>如果想使用jdbc连接配置SSL， 而不使用编码方式，可以参考
<a href=https://dev.mysql.com/doc/connector-j/5.1/en/connector-j-reference-configuration-properties.html>connector-j-reference-configuration-properties</a></p></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//pkendlessriver.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#安装mysql>安装MySQL</a></li><li><a href=#配置>配置</a></li><li><a href=#账户与权限>账户与权限</a><ul><li><a href=#账户>账户</a></li><li><a href=#权限>权限</a><ul><li><a href=#给用户授予权限>给用户授予权限</a></li></ul></li></ul></li><li><a href=#数据备份与导入>数据备份与导入</a></li><li><a href=#使用ssl加密连接>使用SSL加密连接</a><ul><li><a href=#查看mysql-ssl状态信息>查看mysql SSL状态信息</a></li><li><a href=#配置ssl安全连接>配置SSL安全连接</a></li></ul></li></ul></nav></div></aside></main></body></html>