<!doctype html><html lang=en dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="The 
  spotify docker maven plugin (Archived since Mar, 2022) can only build image with local docker client installed. This plugin works fine on my Mac.
But when I switched to Windows(with 
  docker installed in ubuntu-WSL), problem occurred:"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://wangy325.github.io/en/posts/2025/20250115_basical_usage_of_fabric8io_docker_maven_plugin/"><meta property="og:site_name" content="xf&pl"><meta property="og:title" content="Use fabric8io/docker-maven-plugin to build image on Windows"><meta property="og:description" content="The spotify docker maven plugin (Archived since Mar, 2022) can only build image with local docker client installed. This plugin works fine on my Mac.
But when I switched to Windows(with docker installed in ubuntu-WSL), problem occurred:"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-01-15T00:00:00+08:00"><meta property="article:modified_time" content="2025-03-04T20:16:14+08:00"><meta property="article:tag" content="Spring Boot"><meta property="article:tag" content="Docker"><title>Use fabric8io/docker-maven-plugin to build image on Windows | xf&amp;pl</title>
<link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=https://wangy325.github.io/en/posts/2025/20250115_basical_usage_of_fabric8io_docker_maven_plugin/><link rel=stylesheet href=/book.min.0f91de65ad75b64573b3cdb1e4cd90f74510a2e18944061ce4db784ef0b71452.css integrity="sha256-D5HeZa11tkVzs82x5M2Q90UQouGJRAYc5Nt4TvC3FFI=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/en.search.min.90ca9cbea1c98bace1ce15dad7addcd86e7eb8e9c119c10764cae54943613c0e.js integrity="sha256-kMqcvqHJi6zhzhXa163c2G5+uOnBGcEHZMrlSUNhPA4=" crossorigin=anonymous></script><script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js integrity="sha256-b2+Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC+NdcPIvZhzk=" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-HHNKR5H8KN"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-HHNKR5H8KN")}</script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><div class=navi-bar id=navibar><div id=page-title><h2 class=book-brand><a class="flex align-center" href=/en/><span>xf&amp;pl</span></a></h2></div><div class=page-navi-col><nav><ul><li><a href=/en/posts/>Blog</a></li><li><a href=/en/archive/>Archive</a></li><li><a href=/en/about/>About</a></li></ul></nav></div><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/ required pattern=\S+.*>
<span class=clear_search><img src=/svg/close.svg onclick=clearInput()></span><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><script>function clearInput(){document.getElementById("book-search-input").value="";for(var e=document.getElementById("book-search-results");e.firstChild;)e.removeChild(e.firstChild)}</script><ul class=book-languages><li><a class="flex align-center"><img src=/svg/language.svg class=book-icon alt=Languages>
English</a></label><ul><li><a href=https://wangy325.github.io/zh-cn/>简体中文</a></li></ul></li></ul></div><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/en/><span>xf&amp;pl</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul class=book-languages><li><input type=checkbox id=languages class=toggle>
<label for=languages class="flex justify-between"><a role=button class="flex align-center"><img src=/svg/translate.svg class=book-icon alt=Languages>
English</a></label><ul><li><a href=/zh-cn/>简体中文</a></li></ul></li></ul><ul><li><a href=/en/posts/>Blog</a></li><li><a href=/en/archive/>Archive</a></li><li><a href=/en/about/>About</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label><h3>Use fabric8io/docker-maven-plugin to build image on Windows</h3><label for=toc-control></label></div></header><article class="markdown book-post"><h1>Use fabric8io/docker-maven-plugin to build image on Windows</h1><div class="postmeta flex align-cneter" style=justify-content:center><div class="created flex align-cneter"><img src=/svg/calendar-event.svg class=book-icon alt>
<a title='Created by '>2025-01-15</a></div><div class="tags flex align-center"><img src=/svg/tag-alt.svg class=book-icon alt>
<a href=/en/tags/spring-boot/>Spring Boot
</a><a href=/en/tags/docker/>Docker</a></div><div class="last-modified flex align center"><img src=/svg/edit.svg class=book-icon alt>
<a title='Last modified by wangy325 | 2025-03-04'>2025-03-04</a></div></div><p>The
<a href=https://github.com/spotify/docker-maven-plugin>spotify docker maven plugin</a> (<em>Archived since Mar, 2022</em>) can only build image with local docker client installed. This plugin works fine on my Mac.</p><p>But when I switched to Windows(with
<a href=/../../zh-cn/posts/2024/20241031_wsl_and_docker_engine>docker installed in ubuntu-WSL</a>), problem occurred:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cmd data-lang=cmd><span class=line><span class=ln>1</span><span class=cl> Caused by: com.spotify.docker.client.exceptions.DockerException: java.util.concurrent.ExecutionException: com.spotify.docker.client.shaded.javax.ws.rs.ProcessingException: java.io.FileNotFoundException: \.\pipe\docker_engine (系统找不到指定的文件。)
</span></span></code></pre></div><p>Which means plugin can not find docker engine running on my machine. That's not the thing! The real reason is that spotify maven plugin can not build image through WSL docker.</p><p>An alternative was found after searching google. that's
<a href=https://dmp.fabric8.io/#installation>fabric8io/docker-maven-plugin</a>.</p><p>This page only shows basic usage of this plugin.</p><p>The <em>fabric8io docker maven plugin</em> can set remote docker host, which works on Windows with docker installed within WSL.</p><p>Below shows the simplest configuration:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=ln> 1</span><span class=cl><span class=nt>&lt;plugin&gt;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=nt>&lt;groupId&gt;</span>io.fabric8<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=nt>&lt;artifactId&gt;</span>docker-maven-plugin<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=nt>&lt;version&gt;</span>0.45.1<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=nt>&lt;configuration&gt;</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>    <span class=nt>&lt;dockerHost&gt;</span>tcp://localhost:2375<span class=nt>&lt;/dockerHost&gt;</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>    <span class=nt>&lt;images&gt;</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>        <span class=nt>&lt;image&gt;</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>            <span class=nt>&lt;name&gt;</span>${docker.image.prefix}/${project.artifactId}:%v<span class=nt>&lt;/name&gt;</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>            <span class=nt>&lt;build&gt;</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>                <span class=nt>&lt;dockerFile&gt;</span>${project.basedir}/Dockerfile<span class=nt>&lt;/dockerFile&gt;</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>            <span class=nt>&lt;/build&gt;</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>        <span class=nt>&lt;/image&gt;</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>    <span class=nt>&lt;/images&gt;</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>    <span class=nt>&lt;buildArgs&gt;</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>        <span class=nt>&lt;JAR_FILE&gt;</span>target/${project.build.finalName}.jar<span class=nt>&lt;/JAR_FILE&gt;</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>    <span class=nt>&lt;/buildArgs&gt;</span>
</span></span><span class=line><span class=ln>18</span><span class=cl><span class=nt>&lt;/configuration&gt;</span>
</span></span><span class=line><span class=ln>19</span><span class=cl><span class=nt>&lt;/plugin&gt;</span>
</span></span></code></pre></div><blockquote><ol><li><p><code>dockerHost</code> is the WSL host and post WSL docker daemon runs on.</p></li><li><p><code>%v</code> is the same as <code>${project.version}</code>.</p></li><li><p>Image name and tag are configured in <code>image>name</code> tag.</p></li><li><p>Dockerfile (<em>same as spotify docker maven plugin</em>) is configured in <code>image>build>dockerFile</code> tag.</p></li><li><p>Build source(java web application Jar) is configured in <code>configuration>buildArgs</code> tag.</p></li></ol></blockquote><p>You need make some change to make WSL docker daemon listen on 2375 port:</p><ol><li><p>open <code>docker.service</code> config file:</p><p><code>vim /usr/lib/systemd/system/docker.service</code></p></li><li><p>modify <code>docker.service</code> setting:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cmd data-lang=cmd><span class=line><span class=ln>1</span><span class=cl># default setting
</span></span><span class=line><span class=ln>2</span><span class=cl># ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock
</span></span><span class=line><span class=ln>3</span><span class=cl># new setting
</span></span><span class=line><span class=ln>4</span><span class=cl>ExecStart=/usr/bin/dockerd -H tcp://0.0.0.0:2375 -H unix://var/run/docker.sock
</span></span></code></pre></div></li><li><p>restart docker daemon:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cmd data-lang=cmd><span class=line><span class=ln>1</span><span class=cl>systemctl daemon-reload
</span></span><span class=line><span class=ln>2</span><span class=cl>systemctl restart docker
</span></span></code></pre></div></li></ol><p>After that, you can run <code>mvn clean package docker:build -DskipTests</code> to build docker image.</p><p>To run docker image with docker-compose, use <code>wsl docker compose up</code> on Windows.</p><h2 id=references>References
<a class=anchor href=#references>#</a></h2><ul><li><a href=https://blog.csdn.net/qq_43437874/article/details/107198498>java.io.FileNotFoundException: .\pipe\docker_engine</a></li><li><a href=https://blog.csdn.net/u010427387/article/details/122088632>io.fabric8.docker-maven-plugin插件使用</a></li><li><a href=https://dmp.fabric8.io/#image-name>fabric8 documents</a></li></ul></article><div class=next-prev><hr><div class="page-navi flex" id=pagenavi><div class=pre-page-none>←∅</div><div class=next-page><a href=https://wangy325.github.io/en/posts/2025/20250110_CSRF_in_spring_security_applications/>How does Spring Security prevent application from CSRF?</a> →</div></div></div><section class=related><hr></section><div class=book-comments><div class=giscus-thread></div><script src=https://giscus.app/client.js data-repo=wangy325/wangy325.github.io data-repo-id=R_kgDOHhhDZg data-category=Announcements data-category-id=DIC_kwDOHhhDZs4ChbMn data-mapping=og:title data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=noborder_light data-loading=lazy data-lang=en crossorigin=anonymous async></script></div><div class=copyright><hr class=cline><p>Notes and Memos by wangy325
<a href=https://creativecommons.org/licenses/by/4.0/deed.en title="Creative Commons Attribution">&copy; CC BY 4.0</a></p><p>2019-2025. Powered by
<a href=https://github.com/alex-shpak/hugo-book>Hugo Book</a>
Presented by Github.</p></div><label for=menu-control class="hidden book-menu-overlay"></label></div></main><div class=back-to-top><div id=back-to-top><img src=/svg/chevrons-up.svg srcset="/svg/chevrons-up.svg 500w" onclick=topFunction() class=black>
<img title='Back to top' src=/svg/chevrons-up-blue.svg srcset="/svg/chevrons-up-blue.svg 500w" onclick=topFunction() class=blue></div><script>let mybutton=document.getElementById("back-to-top");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>500||document.documentElement.scrollTop>500?mybutton.style.display="block":mybutton.style.display="none"}function topFunction(){window.scrollTo({top:0,behavior:"smooth"})}</script></div><script src=/js/scroll-listening.js></script></body></html>