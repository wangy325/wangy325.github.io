<!doctype html><html lang=en dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="This page shows the usage of hugo shortcodes, especially customized shortcodes."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://wangy325.github.io/en/posts/1_usage_of_hugo_shortcodes/"><meta property="og:site_name" content="xf&amp;pl"><meta property="og:title" content="Usage of Hugo Short Codes"><meta property="og:description" content="This page shows the usage of hugo shortcodes, especially customized shortcodes."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-09-06T00:00:00+08:00"><meta property="article:modified_time" content="2024-11-01T15:48:35+08:00"><meta property="article:tag" content="Gossip"><meta property="article:tag" content="Hugo"><title>Usage of Hugo Short Codes | xf&amp;pl</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png><link rel=canonical href=https://wangy325.github.io/en/posts/1_usage_of_hugo_shortcodes/><link rel=stylesheet href=/book.min.807166d5072084d8d8da117c3d34a297fc0a09c2327d83e37150a123d676abed.css integrity="sha256-gHFm1QcghNjY2hF8PTSil/wKCcIyfYPjcVChI9Z2q+0=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/en.search.min.13d983d1ae20807ed57d971ad5e7f871e990b50df82d6e43f50fe0c602b4711b.js integrity="sha256-E9mD0a4ggH7VfZca1ef4cemQtQ34LW5D9Q/gxgK0cRs=" crossorigin=anonymous></script><script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js integrity="sha256-b2+Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC+NdcPIvZhzk=" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-HHNKR5H8KN"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-HHNKR5H8KN")}</script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><div class=navi-bar id=navibar><div id=page-title><h2 class=book-brand><a class="flex align-center" href=/en/><span>xf&amp;pl</span></a></h2></div><div class=page-navi-col><nav><ul><li><a href=/en/posts/>Blog</a></li><li><a href=/en/archive/>Archive</a></li><li><a href=/en/about/>About</a></li></ul></nav></div><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/ required pattern=\S+.*>
<span class=clear_search><img src=/svg/close.svg onclick=clearInput()></span><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><script>function clearInput(){document.getElementById("book-search-input").value="";for(var e=document.getElementById("book-search-results");e.firstChild;)e.removeChild(e.firstChild)}</script><ul class=book-languages><li><a class="flex align-center"><img src=/svg/language.svg class=book-icon alt=Languages>
English</a></label><ul><li><a href=https://wangy325.github.io/zh-cn/>简体中文</a></li></ul></li></ul></div><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/en/><span>xf&amp;pl</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul class=book-languages><li><input type=checkbox id=languages class=toggle>
<label for=languages class="flex justify-between"><a role=button class="flex align-center"><img src=/svg/translate.svg class=book-icon alt=Languages>
English</a></label><ul><li><a href=https://wangy325.github.io/zh-cn/>简体中文</a></li></ul></li></ul><ul><li><a href=/en/posts/>Blog</a></li><li><a href=/en/archive/>Archive</a></li><li><a href=/en/about/>About</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>Usage of Hugo Short Codes</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><div id=toc-new><ul class=nav><li class=nav-item><a id=tHint href=javascript:void(0) onclick='return scrolly("hint"),!1'>Hint</a></li><li class=nav-item><a id=tQuote href=javascript:void(0) onclick='return scrolly("quote"),!1'>Quote</a></li><li class=nav-item><a id=tHighlightCode href=javascript:void(0) onclick='return scrolly("highlight-code"),!1'>Highlight Code</a></li><li class=nav-item><a id=tHighlightLine href=javascript:void(0) onclick='return scrolly("highlight-line"),!1'>Highlight Line</a></li><li class=nav-item><a id=tUpdateInfo href=javascript:void(0) onclick='return scrolly("update-info"),!1'>Update Info</a></li><li class=nav-item><a id=tAudio href=javascript:void(0) onclick='return scrolly("audio"),!1'>Audio</a></li></ul></div><script>function scrolly(e){const t=40;var n=document.getElementById(e).offsetTop;window.scrollTo({top:n+t,behaviour:"smooth"})}</script></aside></header><article class="markdown book-post"><h1>Usage of Hugo Short Codes</h1><div class="postmeta flex align-cneter" style=justify-content:center><div class="created flex align-cneter"><img src=/svg/calendar-event.svg class=book-icon alt>
<a title='Created by wangy325'>2024-09-06</a></div><div class="tags flex align-center"><img src=/svg/tag-alt.svg class=book-icon alt>
<a href=/en/tags/gossip/>Gossip
</a><a href=/en/tags/hugo/>Hugo</a></div><div class="last-modified flex align center"><img src=/svg/edit.svg class=book-icon alt>
<a title='Last modified by wangy325-win | 2024-11-01'>2024-11-01</a></div></div><p>This page shows the usage of hugo shortcodes, especially customized shortcodes.</p><h3 id=hint>Hint
<a class=anchor href=#hint>#</a></h3><blockquote><p>A customized shortcode based on hugo book theme.</p></blockquote><p>There are 3 levels of hint: info warning and danger. And could be used like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-tpl data-lang=tpl><span class=line><span class=cl><span class=cp>{{</span><span class=o>&lt;</span> <span class=na>hint</span> <span class=na>info</span> <span class=o>&gt;</span><span class=cp>}}</span><span class=x>
</span></span></span><span class=line><span class=cl><span class=x>This is customized shortcode `hint`, based on theme  [Hugo Book](#hint).
</span></span></span><span class=line><span class=cl><span class=x></span><span class=cp>{{</span><span class=o>&lt;</span> <span class=o>/</span><span class=na>hint</span> <span class=o>&gt;</span><span class=cp>}}</span><span class=x>
</span></span></span></code></pre></div><p>Rendered as this:</p><blockquote class="book-hint info"><a class=hint-start>“</a><p>This is customized shortcode <code>hint</code>, based on theme
<a href=/en/#hint>Hugo Book</a>.</p></blockquote><blockquote class="book-hint warning"><a class=hint-start>“</a><p>This is warning.</p><p><code>markdown</code> is still <em>working</em></p></blockquote><blockquote class="book-hint danger"><a class=hint-start>“</a><p>Danger Zone.
<a href=/en/#hint>Link</a></p></blockquote><h3 id=quote>Quote
<a class=anchor href=#quote>#</a></h3><p><code>quote</code> is <strong>real</strong> quotation. With new font style and text format. <code>quote</code> can be used when you quoting some classical literatures. Like:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-tpl data-lang=tpl><span class=line><span class=cl><span class=cp>{{</span><span class=o>&lt;</span> <span class=na>quote</span> <span class=o>&gt;</span><span class=cp>}}</span><span class=x>
</span></span></span><span class=line><span class=cl><span class=x>相见欢·林花谢了春红
</span></span></span><span class=line><span class=cl><span class=x>南唐·李煜
</span></span></span><span class=line><span class=cl><span class=x>林花谢了春红，太匆匆。无奈朝来寒雨晚来风。
</span></span></span><span class=line><span class=cl><span class=x>胭脂泪，相留醉，自是人生长恨水长东。
</span></span></span><span class=line><span class=cl><span class=x></span><span class=cp>{{</span><span class=o>&lt;</span> <span class=o>/</span><span class=na>quote</span> <span class=o>&gt;</span><span class=cp>}}</span><span class=x>
</span></span></span></code></pre></div><p>Gives this:</p><blockquote class=book-quotation><a class=quote-start style=font-size:4rem;font-family:Arial,Helvetica,sans-serif>“</a><div class=t-left>相见欢·林花谢了春红</div><div class=t-left>〔南唐〕
李煜</div><div class=c-intend><p class=plain_text>林花谢了春红，太匆匆。无奈朝来寒雨晚来风。</p></div><div class=c-intend><p class=plain_text>胭脂泪，相留醉，自是人生长恨水长东。</p></div></blockquote><p>If you want to make title and author placed in middle, use a boolean parameter <code>true</code>.</p><p>Some ancient China <em>Ci</em> has a preface, you can make it font-size smaller than main text, use a <code>&lt;small></code> tag.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-tpl data-lang=tpl><span class=line><span class=cl><span class=cp>{{</span><span class=o>&lt;</span> <span class=na>quote</span> <span class=kc>true</span> <span class=o>&gt;</span><span class=cp>}}</span><span class=x>
</span></span></span><span class=line><span class=cl><span class=x>摸鱼儿
</span></span></span><span class=line><span class=cl><span class=x>金·元好问
</span></span></span><span class=line><span class=cl><span class=x>&lt;small&gt;乙丑岁赴试并州...&lt;p&gt;&lt;/small&gt;
</span></span></span><span class=line><span class=cl><span class=x>// ...
</span></span></span><span class=line><span class=cl><span class=x></span><span class=cp>{{</span><span class=o>&lt;</span> <span class=o>/</span><span class=na>quote</span> <span class=o>&gt;</span><span class=cp>}}</span><span class=x>
</span></span></span></code></pre></div><blockquote class=book-quotation><a class=quote-start style=font-size:4rem;font-family:Arial,Helvetica,sans-serif>“</a><div class=t-center>摸鱼儿</div><div class=t-center>〔金〕
元好问</div><div class=c-intend><p class=plain_text><p><small>乙丑岁赴试并州，道逢捕雁者云：“今旦获一雁，杀之矣。其脱网者悲鸣不能去，竟自投于地而死。”予因买得之，葬之汾水之上，垒石为识，号曰“雁丘”。时同行者多为赋诗，予亦有《雁丘词》。旧所作无宫商，今改定之。<p></small></p></p></div><div class=c-intend><p class=plain_text>问世间，情是何物，直教生死相许？天南地北双飞客，老翅几回寒暑。欢乐趣，离别苦，就中更有痴儿女。君应有语：渺万里层云，千山暮雪，只影向谁去？</p></div><div class=c-intend><p class=plain_text>横汾路，寂寞当年箫鼓，荒烟依旧平楚。招魂楚些何</p><div class=zy><p class=zhuyin>jiē</p><p class=zy_plain_text>嗟</p></div><p class=plain_text>及，山鬼暗啼风雨。天也妒，未信与，莺儿燕子俱黄土。千秋万古，为留待骚人，狂歌痛饮，来访雁丘处。</p></div></blockquote><p>Addtionally, you can place all contents in middle.</p><p>Just one more boolean parameter. (:-</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-tpl data-lang=tpl><span class=line><span class=cl><span class=cp>{{</span><span class=o>&lt;</span> <span class=na>quote</span> <span class=kc>true</span> <span class=kc>true</span> <span class=o>&gt;</span><span class=cp>}}</span><span class=x>
</span></span></span><span class=line><span class=cl><span class=x>Sonnet 8
</span></span></span><span class=line><span class=cl><span class=x>William Shakespeare
</span></span></span><span class=line><span class=cl><span class=x>Music to hear, why hear&#39;st thou music sadly?
</span></span></span><span class=line><span class=cl><span class=x>Sweets with sweets war not, joy delights in joy.
</span></span></span><span class=line><span class=cl><span class=x>长相思，摧心肝。
</span></span></span><span class=line><span class=cl><span class=x>// ...
</span></span></span><span class=line><span class=cl><span class=x></span><span class=cp>{{</span><span class=o>&lt;</span> <span class=o>/</span><span class=na>quote</span> <span class=o>&gt;</span><span class=cp>}}</span><span class=x>
</span></span></span></code></pre></div><blockquote class=book-quotation><a class=quote-start style=font-size:4rem;font-family:Arial,Helvetica,sans-serif>“</a><div class=t-center>长相思（其一）</div><div class=t-center>〔唐〕
李白</div><div class=c-center><p class=plain_text>长相思，在长安。</p></div><div class=c-center><p class=plain_text>络纬秋啼金井阑，微霜凄凄</p><div class=zy><p class=zhuyin>diàn</p><p class=zy_plain_text>簟</p></div><p class=plain_text>色寒。</p></div><div class=c-center><p class=plain_text>孤灯不明思欲绝，卷帷望月空长叹。</p></div><div class=c-center><p class=plain_text>美人如花隔云端。</p></div><div class=c-center><p class=plain_text>上有青冥之长天，下有渌水之波澜。</p></div><div class=c-center><p class=plain_text>天长路远魂飞苦，梦魂不到关山难。</p></div><div class=c-center><p class=plain_text>长相思，摧心肝。</p></div></blockquote><fieldset class=update_by><legend class=update_title>Updated 2024-10-31</legend><p class=update_text>The PinYin Note were handled by quote shortcodes and displayed by css style.</p></fieldset><blockquote class=book-quotation><a class=quote-start style=font-size:4rem;font-family:Arial,Helvetica,sans-serif>“</a><div class=t-center>Sonnet 8</div><div class=t-center>〔William Shakespeare〕</div><div class=c-center><p class=plain_text>Music to hear, why hear'st thou music sadly?</p></div><div class=c-center><p class=plain_text>Sweets with sweets war not, joy delights in joy.</p></div><div class=c-center><p class=plain_text>Why lovest thou that which thou receivest not gladly,</p></div><div class=c-center><p class=plain_text>Or else receivest with pleasure thine annoy?</p></div><div class=c-center><p class=plain_text>If the true concord of well-tuned sounds,</p></div><div class=c-center><p class=plain_text>By unions married, do offend thine ear,</p></div><div class=c-center><p class=plain_text>They do but sweetly chide thee, who confounds</p></div><div class=c-center><p class=plain_text>In singleness the parts that thou shouldst bear.</p></div><div class=c-center><p class=plain_text>Mark how one string, sweet husband to another,</p></div><div class=c-center><p class=plain_text>Strikes each in each by mutual ordering,</p></div><div class=c-center><p class=plain_text>Resembling sire and child and happy mother</p></div><div class=c-center><p class=plain_text>Who all in one, one pleasing note do sing:</p></div><div class=c-center><p class=plain_text>Whose speechless song, being many, seeming one,</p></div><div class=c-center><p class=plain_text>Sings this to thee: 'thou single wilt prove none.'</p></div></blockquote><h3 id=highlight-code>Highlight Code
<a class=anchor href=#highlight-code>#</a></h3><p>It's not the syntax highlighting, It's code line highlighting.</p><blockquote class="book-hint info"><a class=hint-start>“</a><p>The code syntax highlight should be preset, and enabled by default.</p><p>Besides, you can customized them by using hugo to generate a code syntax style sheet:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>hugo gen chromastyles --style<span class=o>=</span>themename &gt; syntax.css
</span></span></code></pre></div><p>Hugo supports
<a href=https://xyproto.github.io/splash/docs/all.html>chroma style</a> code fence themes.</p><p>Here is the discusstion about syntax highlight:
<a href=https://discourse.gohugo.io/t/unable-to-customize-the-syntax-highlight-colors/22140/4>https://discourse.gohugo.io/t/unable-to-customize-the-syntax-highlight-colors/22140/4</a></p></blockquote><p>2 ways to achieve that.</p><p>First approach is to setting highlight format in code fence, <em>not recommended</em>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-tpl data-lang=tpl><span class=line><span class=cl><span class=x>  ``` python </span><span class=cp>{</span><span class=nf>linenos</span><span class=o>=</span><span class=na>inline</span><span class=o>,</span><span class=na>hl_lines</span><span class=o>=[</span><span class=m>3</span><span class=o>,</span> <span class=s2>&#34;7-10&#34;</span><span class=o>],</span><span class=na>linenostart</span><span class=o>=</span><span class=m>1</span><span class=cp>}</span><span class=x>
</span></span></span><span class=line><span class=cl><span class=x>  # ...
</span></span></span></code></pre></div><p>Gives this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=ln> 1</span><span class=cl><span class=k>def</span> <span class=nf>incr_with_x_threads</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>func</span><span class=p>,</span> <span class=n>n</span><span class=p>):</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>    <span class=c1># 列表推导式</span>
</span></span><span class="line hl"><span class=ln> 3</span><span class=cl>    <span class=n>threads</span> <span class=o>=</span> <span class=p>[</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>func</span><span class=p>,</span> <span class=n>args</span><span class=o>=</span><span class=p>(</span><span class=n>n</span><span class=p>,))</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>x</span><span class=p>)]</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>    <span class=n>start</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>    <span class=k>global</span> <span class=n>shared_int</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>    <span class=n>shared_int</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class="line hl"><span class=ln> 7</span><span class=cl>    <span class=k>for</span> <span class=n>t</span> <span class=ow>in</span> <span class=n>threads</span><span class=p>:</span>
</span></span><span class="line hl"><span class=ln> 8</span><span class=cl>        <span class=n>t</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class="line hl"><span class=ln> 9</span><span class=cl>    <span class=k>for</span> <span class=n>t</span> <span class=ow>in</span> <span class=n>threads</span><span class=p>:</span>
</span></span><span class="line hl"><span class=ln>10</span><span class=cl>        <span class=n>t</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;finished in </span><span class=si>{</span><span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=n>start</span><span class=si>}</span><span class=se>\n</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>          <span class=sa>f</span><span class=s2>&#34;shared expected: </span><span class=si>{</span><span class=n>n</span> <span class=o>*</span> <span class=n>x</span><span class=si>}</span><span class=se>\n</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>          <span class=sa>f</span><span class=s2>&#34;shared actual: </span><span class=si>{</span><span class=n>shared_int</span><span class=si>}</span><span class=se>\n</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>          <span class=sa>f</span><span class=s2>&#34;difference: </span><span class=si>{</span><span class=n>n</span> <span class=o>*</span> <span class=n>x</span> <span class=o>-</span> <span class=n>shared_int</span><span class=si>}</span><span class=s2>(</span><span class=si>{</span><span class=mi>100</span> <span class=o>-</span> <span class=n>shared_int</span> <span class=o>/</span> <span class=n>n</span> <span class=o>/</span> <span class=n>x</span> <span class=o>*</span> <span class=mi>100</span><span class=si>}</span><span class=s2>%)&#34;</span><span class=p>)</span>
</span></span></code></pre></div><p>The way it configs the highlight line numbers is strange<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>. Isn't it?</p><p>Second way is recommended: using shortcode <code>highlight</code>.</p><p>This shortcode accepts 2 params:</p><ul><li>the 1st one specifies the coding language,</li><li>the 2nd param specifies line numbers to be highlighted.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-tpl data-lang=tpl><span class=line><span class=cl><span class=cp>{{</span><span class=o>&lt;</span> <span class=na>highlight</span> <span class=na>python</span> <span class=s2>&#34;1 5-7&#34;</span> <span class=o>&gt;</span><span class=cp>}}</span><span class=x>
</span></span></span><span class=line><span class=cl><span class=x>def copy_file(target, dest):
</span></span></span><span class=line><span class=cl><span class=x>    if os.path.exists(target) and os.path.isfile(target):
</span></span></span><span class=line><span class=cl><span class=x>        if not os.path.exists(dest) or not os.path.isfile(dest):
</span></span></span><span class=line><span class=cl><span class=x>            df = open(dest, &#39;+xb&#39;)
</span></span></span><span class=line><span class=cl><span class=x>            with open(target, &#39;rb&#39;) as tf:
</span></span></span><span class=line><span class=cl><span class=x>                while len((buffer := tf.read(1024))) &gt; 0:
</span></span></span><span class=line><span class=cl><span class=x>                    df.write(buffer)
</span></span></span><span class=line><span class=cl><span class=x>            df.close()
</span></span></span><span class=line><span class=cl><span class=x>        else:
</span></span></span><span class=line><span class=cl><span class=x>            print(&#34;dest file exists.&#34;)
</span></span></span><span class=line><span class=cl><span class=x>    else:
</span></span></span><span class=line><span class=cl><span class=x>        raise FileNotFoundError(&#34;target file not found.&#34;)
</span></span></span><span class=line><span class=cl><span class=x></span><span class=cp>{{</span><span class=o>&lt;</span> <span class=o>/</span><span class=na>highlight</span> <span class=o>&gt;</span><span class=cp>}}</span><span class=x>
</span></span></span></code></pre></div><p>Gives this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class="line hl"><span class=ln> 1</span><span class=cl><span class=k>def</span> <span class=nf>copy_file</span><span class=p>(</span><span class=n>target</span><span class=p>,</span> <span class=n>dest</span><span class=p>):</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>    <span class=k>if</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>target</span><span class=p>)</span> <span class=ow>and</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>isfile</span><span class=p>(</span><span class=n>target</span><span class=p>):</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>dest</span><span class=p>)</span> <span class=ow>or</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>isfile</span><span class=p>(</span><span class=n>dest</span><span class=p>):</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>            <span class=n>df</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=n>dest</span><span class=p>,</span> <span class=s1>&#39;+xb&#39;</span><span class=p>)</span>
</span></span><span class="line hl"><span class=ln> 5</span><span class=cl>            <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>target</span><span class=p>,</span> <span class=s1>&#39;rb&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>tf</span><span class=p>:</span>
</span></span><span class="line hl"><span class=ln> 6</span><span class=cl>                <span class=k>while</span> <span class=nb>len</span><span class=p>((</span><span class=n>buffer</span> <span class=o>:=</span> <span class=n>tf</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=mi>1024</span><span class=p>)))</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class="line hl"><span class=ln> 7</span><span class=cl>                    <span class=n>df</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>buffer</span><span class=p>)</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>            <span class=n>df</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;dest file exists.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>        <span class=k>raise</span> <span class=ne>FileNotFoundError</span><span class=p>(</span><span class=s2>&#34;target file not found.&#34;</span><span class=p>)</span></span></span></code></pre></div><p>The code comments can also be highlighted.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=cm>/*
</span></span></span><span class="line hl"><span class=ln> 2</span><span class=cl><span class=cm>It&#39;s been a long day
</span></span></span><span class="line hl"><span class=ln> 3</span><span class=cl><span class=cm>Without you my friend
</span></span></span><span class="line hl"><span class=ln> 4</span><span class=cl><span class=cm>And I will tell you all about it when I see you again
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=cm>We&#39;ve come a lone way
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=cm>From where we began
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=cm>And I will tell you all about it when I see you again
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=cm>*/</span><span class=w>
</span></span></span><span class="line hl"><span class=ln> 9</span><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span><span class=w> </span><span class=n>args</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=w>    </span><span class=c1>// ...</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>11</span><span class=cl><span class=w>    </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>printf</span><span class=p>(</span><span class=s>&#34;the cost of %s is %.2f&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;cola&#34;</span><span class=p>,</span><span class=w> </span><span class=n>1</span><span class=p>.</span><span class=na>99f</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=ln>12</span><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div><h3 id=highlight-line>Highlight Line
<a class=anchor href=#highlight-line>#</a></h3><p>Customized a new shortcode named <code>highline</code>, which is used to highlight current paragraph.</p><p>It's simple to use:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-tpl data-lang=tpl><span class=line><span class=cl><span class=cp>{{</span><span class=o>&lt;</span> <span class=na>highline</span> <span class=o>&gt;</span><span class=cp>}}</span><span class=x>
</span></span></span><span class=line><span class=cl><span class=x>This line is **highlight**.
</span></span></span><span class=line><span class=cl><span class=x></span><span class=cp>{{</span><span class=o>&lt;</span> <span class=o>/</span><span class=na>highline</span> <span class=o>&gt;</span><span class=cp>}}</span><span class=x>
</span></span></span></code></pre></div><p>Gives this:</p><p class=line_hl>This line is <strong>highlight</strong>.</p><p>And this line is normal.</p><h3 id=update-info>Update Info
<a class=anchor href=#update-info>#</a></h3><p>A customized shortcode to add update tags to page. Simple to use:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-tpl data-lang=tpl><span class=line><span class=cl><span class=cp>{{</span><span class=o>&lt;</span> <span class=na>update</span> <span class=m>2024</span><span class=o>-</span><span class=m>09</span><span class=o>-</span><span class=m>19</span> <span class=o>&gt;</span><span class=cp>}}</span><span class=x>
</span></span></span><span class=line><span class=cl><span class=x>This is page update info.
</span></span></span><span class=line><span class=cl><span class=x></span><span class=cp>{{</span><span class=o>&lt;</span> <span class=o>/</span><span class=na>update</span> <span class=o>&gt;</span><span class=cp>}}</span><span class=x>
</span></span></span></code></pre></div><fieldset class=update_by><legend class=update_title>Updated 2024-09-19</legend><p class=update_text>This is page update info.</p></fieldset><h3 id=audio>Audio
<a class=anchor href=#audio>#</a></h3><p>There are many ways to play audio on HTML. Here are 2 simple solution(3rd opensource api used).</p><p>A simple audio player implmented by
<a href="https://github.com/sampotts/plyr/?tab=readme-ov-file">plyr</a>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-tpl data-lang=tpl><span class=line><span class=cl><span class=cp>{{</span><span class=o>&lt;</span> <span class=na>audio</span> <span class=s2>&#34;/audio/宋冬野-安和桥.mp3&#34;</span>  <span class=s2>&#34;安和桥-宋冬野&#34;</span> <span class=o>&gt;</span><span class=cp>}}</span><span class=x>
</span></span></span></code></pre></div><figure><audio controls class=player preload><source src=/audio/%e5%ae%8b%e5%86%ac%e9%87%8e-%e5%ae%89%e5%92%8c%e6%a1%a5.mp3 type=audio/mpeg></audio><figcaption>安和桥-宋冬野</figcaption></figure><link rel=stylesheet href=/css/plyr.css><script src=/js/plyr.polyfilled.js crossorigin=anonymous></script><script>(function(){const e=Array.from(document.querySelectorAll(".player")).map(e=>new Plyr(e,{controls:["play","progress","current-time","mute","volume"]}));e.forEach(function(t){t.on("play",t=>{const n=t.detail.plyr;console.log("Stop others players"),e.forEach(function(e){e!=n&&e.stop()})})})})()</script><p>Another simple music player implemented by
<a href="https://github.com/DIYgod/APlayer?tab=readme-ov-file">APlayer</a>:</p><p><code>aplayer</code> shortcode was used as
<a href=https://gohugo.io/hugo-modules/use-modules/>hugo module</a>, and it's quite easy to use, just import
<a href=https://github.com/Runzelee/aplayer-hugo-module>the module</a>.</p><blockquote class="book-hint info"><a class=hint-start>“</a><p>The aplayer shortcode need a <code>/</code> before ending, else you need to add another close tag, do not know why.</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-tpl data-lang=tpl><span class=line><span class=cl><span class=cp>{{</span><span class=o>&lt;</span> <span class=na>aplayer</span> <span class=na>name</span><span class=o>=</span><span class=s2>&#34;安和桥&#34;</span> <span class=na>artist</span><span class=o>=</span><span class=s2>&#34;宋冬野&#34;</span> <span class=na>url</span><span class=o>=</span><span class=s2>&#34;/audio/宋冬野-安和桥.mp3&#34;</span> <span class=na>cover</span><span class=o>=</span><span class=s2>&#34;/audio/anheqiao.jpg&#34;</span> <span class=o>/&gt;</span><span class=cp>}}</span><span class=x>
</span></span></span></code></pre></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css><script src=https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js></script><div id=aplayer></div><script>const ap=new APlayer({container:document.getElementById("aplayer"),audio:[{name:"安和桥",url:"/audio/宋冬野-安和桥.mp3",artist:"宋冬野",cover:"/audio/anheqiao.jpg"}]})</script><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><code>hl_lines=[3, "4-6"]</code>？Why number ahead and string behiend(double quoted)?&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></article><div class=next-prev><hr><div class="page-navi flex" id=pagenavi><div class=pre-page>←
<a href=https://wangy325.github.io/en/posts/3_microservice_in_action_quick_notes/>Quick notes of microservice in action</a></div><div class=next-page><a href=https://wangy325.github.io/en/posts/2_customized_blog/>What I'v done to customize this blog</a> →</div></div></div><section class=related><hr></section><div class=book-comments><div class=giscus-thread></div><script src=https://giscus.app/client.js data-repo=wangy325/wangy325.github.io data-repo-id=R_kgDOHhhDZg data-category=Announcements data-category-id=DIC_kwDOHhhDZs4ChbMn data-mapping=og:title data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=noborder_light data-loading=lazy data-lang=en crossorigin=anonymous async></script></div><div class=copyright><hr class=cline><p>Notes and Memos by wangy325
<a href=https://creativecommons.org/licenses/by/4.0/deed.en title="Creative Commons Attribution">&copy; CC BY 4.0</a></p><p>2019-2024. Powered by
<a href=https://github.com/alex-shpak/hugo-book>Hugo Book</a>
Presented by Github.</p></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><div id=toc-new><ul class=nav><li class=nav-item><a id=tHint href=javascript:void(0) onclick='return scrolly("hint"),!1'>Hint</a></li><li class=nav-item><a id=tQuote href=javascript:void(0) onclick='return scrolly("quote"),!1'>Quote</a></li><li class=nav-item><a id=tHighlightCode href=javascript:void(0) onclick='return scrolly("highlight-code"),!1'>Highlight Code</a></li><li class=nav-item><a id=tHighlightLine href=javascript:void(0) onclick='return scrolly("highlight-line"),!1'>Highlight Line</a></li><li class=nav-item><a id=tUpdateInfo href=javascript:void(0) onclick='return scrolly("update-info"),!1'>Update Info</a></li><li class=nav-item><a id=tAudio href=javascript:void(0) onclick='return scrolly("audio"),!1'>Audio</a></li></ul></div><script>function scrolly(e){const t=40;var n=document.getElementById(e).offsetTop;window.scrollTo({top:n+t,behaviour:"smooth"})}</script></div></aside></main><div class=back-to-top><div id=back-to-top><img src=/svg/chevrons-up.svg srcset="/svg/chevrons-up.svg 500w" onclick=topFunction() class=black>
<img title='Back to top' src=/svg/chevrons-up-blue.svg srcset="/svg/chevrons-up-blue.svg 500w" onclick=topFunction() class=blue></div><script>let mybutton=document.getElementById("back-to-top");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>500||document.documentElement.scrollTop>500?mybutton.style.display="block":mybutton.style.display="none"}function topFunction(){window.scrollTo({top:0,behavior:"smooth"})}</script></div><script src=/js/scroll-listening.js></script></body></html>