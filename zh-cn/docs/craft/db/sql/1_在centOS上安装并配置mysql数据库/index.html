<!doctype html><html lang=zh-CN dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="文章介绍了在centOS7上安装mysql数据库服务的配置及简单优化过程。在服务器上安装mysql服务网络上能够找到的资源很多了，因此本文没有作详细介绍，本文的重点在于后续的优化配置方面。"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://wangy325.github.io/zh-cn/docs/craft/db/sql/1_%E5%9C%A8centOS%E4%B8%8A%E5%AE%89%E8%A3%85%E5%B9%B6%E9%85%8D%E7%BD%AEmysql%E6%95%B0%E6%8D%AE%E5%BA%93/"><meta property="og:site_name" content="Endless River"><meta property="og:title" content="CentOS安装并配置MySQL"><meta property="og:description" content="文章介绍了在centOS7上安装mysql数据库服务的配置及简单优化过程。在服务器上安装mysql服务网络上能够找到的资源很多了，因此本文没有作详细介绍，本文的重点在于后续的优化配置方面。"><meta property="og:locale" content="zh_CN"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:published_time" content="2019-08-16T00:00:00+08:00"><meta property="article:modified_time" content="2019-08-16T00:00:00+08:00"><title>CentOS安装并配置MySQL | Endless River</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png><link rel=canonical href=https://wangy325.github.io/zh-cn/docs/craft/db/sql/1_%E5%9C%A8centOS%E4%B8%8A%E5%AE%89%E8%A3%85%E5%B9%B6%E9%85%8D%E7%BD%AEmysql%E6%95%B0%E6%8D%AE%E5%BA%93/><link rel=stylesheet href=/book.min.6ea824cd08c82a0640f35c702adcb2b2b427b42daf6fb71d89eccf34bcd7bd7e.css integrity="sha256-bqgkzQjIKgZA81xwKtyysrQntC2vb7cdiezPNLzXvX4=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/zh-cn.search.min.0eabf0dc19b55a587d650812a2b5bd6a185c42d5fcc06971d31fc96b58fc8624.js integrity="sha256-Dqvw3Bm1Wlh9ZQgSorW9ahhcQtX8wGlx0x/Ja1j8hiQ=" crossorigin=anonymous></script><script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js integrity="sha256-b2+Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC+NdcPIvZhzk=" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-HHNKR5H8KN"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-HHNKR5H8KN")}</script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><div class=navi-bar id=navibar><div id=page-title><h2 class=book-brand><a class="flex align-center" href=/zh-cn/><span>Endless River</span></a></h2></div><div class=page-navi-col><nav><ul><li class=book-section-flat><a href=/zh-cn/docs/java/>Java</a><ul><li><a role=button>面向对象</a><ul><li><a href=/zh-cn/docs/java/basic/1_%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90%E4%BF%AE%E9%A5%B0%E7%AC%A6/>访问权限修饰符</a></li><li><a href=/zh-cn/docs/java/basic/2_static%E5%85%B3%E9%94%AE%E5%AD%97/>static关键字</a></li><li><a href=/zh-cn/docs/java/basic/3_%E4%BC%A0%E5%80%BC%E8%BF%98%E6%98%AF%E4%BC%A0%E5%BC%95%E7%94%A8/>传值还是传引用</a></li><li><a href=/zh-cn/docs/java/basic/4_final%E5%85%B3%E9%94%AE%E5%AD%97/>final关键字</a></li><li><a href=/zh-cn/docs/java/basic/5_Object%E8%B6%85%E7%B1%BB/>Object超类</a></li><li><a href=/zh-cn/docs/java/basic/5_%E5%8A%A8%E6%80%81%E7%BB%91%E5%AE%9A%E4%B8%8E%E9%9D%99%E6%80%81%E7%BB%91%E5%AE%9A/>动态绑定与静态绑定</a></li><li><a href=/zh-cn/docs/java/basic/6_%E6%8A%BD%E8%B1%A1%E7%B1%BB%E4%B8%8E%E6%8E%A5%E5%8F%A3/>抽象类与接口</a></li><li><a href=/zh-cn/docs/java/basic/7_lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/>Lambda与函数式接口</a></li><li><a href=/zh-cn/docs/java/basic/8_%E5%86%85%E9%83%A8%E7%B1%BB/>内部类</a></li><li><a href=/zh-cn/docs/java/basic/11_java-new-time-api/>Java8日期和时间API</a></li></ul></li><li><a href=/zh-cn/docs/java/collections/>集合框架</a><ul><li><a href=/zh-cn/docs/java/collections/1_List_arraylist/>ArrayList</a></li><li><a href=/zh-cn/docs/java/collections/1_List_linkedlist/>LinkedList</a></li><li><a href=/zh-cn/docs/java/collections/2_Queue/>Queue</a></li><li><a href=/zh-cn/docs/java/collections/3_Set/>Set</a></li><li><a href=/zh-cn/docs/java/collections/4_Map_hash_tree_map/>HashMap和TreeMap</a></li><li><a href=/zh-cn/docs/java/collections/4_Map_linkedhashmap/>LinkedHashMap</a></li><li><a href=/zh-cn/docs/java/collections/5_HashMap%E7%9A%84%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/>HashMap的源码分析</a></li><li><a href=/zh-cn/docs/java/collections/6_Collections/>Collections工具类</a></li></ul></li><li><a href=/zh-cn/docs/java/concurrency/>并发</a><ul><li><a role=button>锁与同步</a><ul><li><a href=/zh-cn/docs/java/concurrency/conecptes/1%E7%BA%BF%E7%A8%8B%E4%B8%8E%E4%BB%BB%E5%8A%A1_1/>线程与任务(一)</a></li><li><a href=/zh-cn/docs/java/concurrency/conecptes/1%E7%BA%BF%E7%A8%8B%E4%B8%8E%E4%BB%BB%E5%8A%A1_2/>线程与任务(二)</a></li><li><a href=/zh-cn/docs/java/concurrency/conecptes/2%E8%B5%84%E6%BA%90%E8%AE%BF%E9%97%AE%E5%8F%97%E9%99%90_1/>资源访问受限--引论</a></li><li><a href=/zh-cn/docs/java/concurrency/conecptes/2%E8%B5%84%E6%BA%90%E8%AE%BF%E9%97%AE%E5%8F%97%E9%99%90_2_%E9%94%81%E5%92%8C%E6%9D%A1%E4%BB%B6/>资源访问受限-锁和条件</a></li><li><a href=/zh-cn/docs/java/concurrency/conecptes/2%E8%B5%84%E6%BA%90%E8%AE%BF%E9%97%AE%E5%8F%97%E9%99%90_3_synchronized/>synchronized关键字</a></li><li><a href=/zh-cn/docs/java/concurrency/conecptes/2%E8%B5%84%E6%BA%90%E8%AE%BF%E9%97%AE%E5%8F%97%E9%99%90_4_%E5%8E%9F%E5%AD%90%E6%80%A7%E4%B8%8E%E5%8E%9F%E5%AD%90%E7%B1%BB/>原子性和可见性</a></li><li><a href=/zh-cn/docs/java/concurrency/conecptes/2%E8%B5%84%E6%BA%90%E8%AE%BF%E9%97%AE%E5%8F%97%E9%99%90_5_%E7%BA%BF%E7%A8%8B%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8/>线程本地存储</a></li><li><a href=/zh-cn/docs/java/concurrency/conecptes/3%E8%8E%B7%E5%8F%96%E4%BB%BB%E5%8A%A1%E7%9A%84%E8%BF%94%E5%9B%9E%E5%80%BC/>获取任务的返回值</a></li><li><a href=/zh-cn/docs/java/concurrency/conecptes/4%E6%AD%BB%E9%94%81/>死锁问题2例</a></li><li><a href=/zh-cn/docs/java/concurrency/conecptes/5%E7%BB%88%E7%BB%93%E4%BB%BB%E5%8A%A1/>终结任务</a></li><li><a href=/zh-cn/docs/java/concurrency/conecptes/6%E7%94%9F%E4%BA%A7%E8%80%85-%E6%B6%88%E8%B4%B9%E8%80%85%E4%B8%8E%E9%98%BB%E5%A1%9E%E9%98%9F%E5%88%97/>生产者-消费者与阻塞队列</a></li><li><a href=/zh-cn/docs/java/concurrency/conecptes/6%E9%98%BB%E5%A1%9E%E9%98%9F%E5%88%97%E4%BD%BF%E7%94%A82%E4%BE%8B/>阻塞队列的使用2例</a></li></ul></li><li><a role=button>线程池</a><ul><li><a href=/zh-cn/docs/java/concurrency/pools/7_1_Executors_and_ExecutorService/>Executors与Executor框架</a></li><li><a href=/zh-cn/docs/java/concurrency/pools/7_2_ThreadPoolExecutor1/>ThreadPoolExecutor(一)</a></li><li><a href=/zh-cn/docs/java/concurrency/pools/7_3_ThreadPoolExecutor2/>ThreadPoolExecutor(二)</a></li><li><a href=/zh-cn/docs/java/concurrency/pools/7_4_CompletionService/>CompletionService</a></li><li><a href=/zh-cn/docs/java/concurrency/pools/8_1_ScheduledExecutorService1/>ScheduledExecutorService(一)</a></li><li><a href=/zh-cn/docs/java/concurrency/pools/8_2_ScheduledExecutorService2/>ScheduledExecutorService(二)</a></li></ul></li><li><a role=button>并发组件</a><ul><li><a href=/zh-cn/docs/java/concurrency/components/9_1_countdownlatch/>CountDownLatch</a></li><li><a href=/zh-cn/docs/java/concurrency/components/9_2_cyclicbarrier/>CyclicBarrier</a></li><li><a href=/zh-cn/docs/java/concurrency/components/9_3_semaphore/>Semaphore</a></li><li><a href=/zh-cn/docs/java/concurrency/components/9_4_exchanger/>Exchanger</a></li><li><a href=/zh-cn/docs/java/concurrency/components/9_5_priorityblockqueue_delayqueue/>PriorityBlockingQueue and DelayQueue</a></li></ul></li></ul></li><li><a role=button>JVM</a><ul><li><a href=/zh-cn/docs/java/jvm/Java%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F%E8%AF%A6%E8%A7%A3/>Java内存区域详解(转)</a></li><li><a href=/zh-cn/docs/java/jvm/java-gc/>JVM垃圾回收概要(转)</a></li><li><a href=/zh-cn/docs/java/jvm/10_Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E4%B8%8Evolatile%E5%85%B3%E9%94%AE%E5%AD%97/>JMM与volatile关键字(转)</a></li></ul></li><li><a role=button>Spring</a><ul><li><a href=/zh-cn/docs/java/spring/SpringBoot-aop-demo/>SpringBoot使用AOP的简单示例</a></li><li><a href=/zh-cn/docs/java/spring/%E5%9C%A8SpringBoot%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%BD%BF%E7%94%A8MockMvc%E8%BF%9B%E8%A1%8C%E6%8E%A5%E5%8F%A3%E6%B5%8B%E8%AF%95/>在SpringBoot项目中使用MockMvc进行接口测试</a></li><li><a href=/zh-cn/docs/java/spring/spring-transaction-propagation/>Spring声明式事务的使用</a></li></ul></li></ul></li><li class=book-section-flat><span>Craft</span><ul><li><a role=button>存储数据</a><ul><li><a role=button>MySQL</a><ul><li><a href=/zh-cn/docs/craft/db/sql/1_%E5%9C%A8centOS%E4%B8%8A%E5%AE%89%E8%A3%85%E5%B9%B6%E9%85%8D%E7%BD%AEmysql%E6%95%B0%E6%8D%AE%E5%BA%93/ class=active>CentOS安装并配置MySQL</a></li><li><a href=/zh-cn/docs/craft/db/sql/2_MySQL%E7%9A%84%E5%87%A0%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0/>MySQL字符串处理函数</a></li><li><a href=/zh-cn/docs/craft/db/sql/4_MySQL%E4%BA%8B%E5%8A%A1%E4%B8%8E%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB/>事务隔离级别与MVCC</a></li><li><a href=/zh-cn/docs/craft/db/sql/5_%E4%BD%BF%E7%94%A8mysql%E7%9A%84%E8%A1%8C%E9%94%81/>MySQL显式锁简单介绍</a></li><li><a href=/zh-cn/docs/craft/db/sql/6_mysql%E6%AD%BB%E9%94%81/>MySQL死锁</a></li></ul></li><li><a role=button>Redis</a><ul><li><a href=/zh-cn/docs/craft/db/redis/redis-all/>redis必知必会(转)</a></li><li><a href=/zh-cn/docs/craft/db/redis/build-redis-sentinel/>Redis Sentinel高可用实现</a></li><li><a href=/zh-cn/docs/craft/db/redis/deploy-redis-cluster-with-docker/>使用docker镜像快速搭建redis集群开发环境</a></li><li><a href=/zh-cn/docs/craft/db/redis/bloom-filter/>布隆过滤器(转)</a></li></ul></li></ul></li><li><a href=/zh-cn/docs/craft/algo/>Algorithms</a><ul><li><a href=/zh-cn/docs/craft/algo/%E5%90%8C%E4%BD%99%E5%AE%9A%E7%90%86%E4%B8%8E%E4%BA%8C%E8%BF%9B%E5%88%B6%E8%A1%A5%E7%A0%81/>同余定理与二进制补码</a></li><li><a href=/zh-cn/docs/craft/algo/%E7%A7%BB%E4%BD%8D%E8%BF%90%E7%AE%97/>移位运算</a></li><li><a href=/zh-cn/docs/craft/algo/%E5%BC%82%E6%88%96%E8%BF%90%E7%AE%97/>异或运算</a></li><li><a href=/zh-cn/docs/craft/algo/%E4%BD%8D%E8%BF%90%E7%AE%97%E7%9A%84%E5%B0%8F%E6%8A%80%E5%B7%A7/>位运算的小技巧</a></li><li><a href=/zh-cn/docs/craft/algo/01%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98/>背包问题2例</a></li></ul></li><li><a role=button>设计模式</a><ul><li><a role=button>Creation</a><ul><li><a href=/zh-cn/docs/craft/design_pattern/creation/1_singleton/>单例模式</a></li><li><a href=/zh-cn/docs/craft/design_pattern/creation/2_factory/>工厂模式</a></li><li><a href=/zh-cn/docs/craft/design_pattern/creation/3_abstract_factory/>抽象工厂模式</a></li><li><a href=/zh-cn/docs/craft/design_pattern/creation/4_builder/>建造者模式</a></li></ul></li><li><a role=button>Behaviour</a><ul><li><a href=/zh-cn/docs/craft/design_pattern/behaviour/1_command/>命令模式</a></li><li><a href=/zh-cn/docs/craft/design_pattern/behaviour/2_observer/>观察者模式</a></li><li><a href=/zh-cn/docs/craft/design_pattern/behaviour/3_strategy/>策略模式</a></li><li><a href=/zh-cn/docs/craft/design_pattern/behaviour/4_template_method/>模板方法模式</a></li></ul></li><li><a role=button>Structural</a><ul><li><a href=/zh-cn/docs/craft/design_pattern/structure/3_decorator/>装饰者模式</a></li><li><a href=/zh-cn/docs/craft/design_pattern/structure/2_adaptor/>适配器模式</a></li><li><a href=/zh-cn/docs/craft/design_pattern/structure/4_%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/>外观模式</a></li><li><a href=/zh-cn/docs/craft/design_pattern/structure/proxy/>代理模式</a></li></ul></li></ul></li></ul></li><li class=book-section-flat><span>Note</span><ul><li><a href=/zh-cn/docs/note/course/>慕课笔记</a><ul><li><a href=/zh-cn/docs/note/course/operating_system_peking/>操作系统原理</a><ul><li><a href=/zh-cn/docs/note/course/operating_system_peking/1_intro/>引论</a></li><li><a href=/zh-cn/docs/note/course/operating_system_peking/2_env_and_logic/>操作系统运行环境与机制</a></li><li><a href=/zh-cn/docs/note/course/operating_system_peking/3_processes_and_threads/>进程和线程模型</a></li></ul></li><li><a href=/zh-cn/docs/note/course/algorithms_part1/>算法-第一部分</a><ul></ul></li></ul></li><li><a role=button>Translations</a><ul><li><a href=/zh-cn/docs/note/translations/use-springboot-messagesource/>在SpringBoot中使用MessageSource</a></li><li><a href=/zh-cn/docs/note/translations/guide-to-logback-cn/>使用Logback记录日志</a></li><li><a href=/zh-cn/docs/note/translations/how2use-printf/>使用printf格式化输出</a></li></ul></li></ul></li><li class=book-section-flat><span>Snippets</span><ul><li><a role=button>Java</a><ul><li><a href=/zh-cn/docs/snippets/java/Gfunction/>Java接口作为方法入参</a></li><li><a href=/zh-cn/docs/snippets/java/Goto/>Java中使用goto语句？</a></li><li><a href=/zh-cn/docs/snippets/java/ImmutableStr/>Java字符串的不可变</a></li></ul></li><li><a role=button>Python</a><ul><li><a role=button>基本概念</a><ul><li><a href=/zh-cn/docs/snippets/pys/intro/1_flow_control/>流程控制语句</a></li><li><a href=/zh-cn/docs/snippets/pys/intro/2_data_list/>列表（list）</a></li><li><a href=/zh-cn/docs/snippets/pys/intro/3_data_str/>字符串，元组和字典</a></li><li><a href=/zh-cn/docs/snippets/pys/intro/4_func/>函数式编程</a></li><li><a href=/zh-cn/docs/snippets/pys/intro/4_important_funcs/>4个重要的内置函数</a></li><li><a href=/zh-cn/docs/snippets/pys/intro/5_file_io/>格式化输出与文件I/O</a></li><li><a href=/zh-cn/docs/snippets/pys/intro/6_try_excep/>异常处理</a></li><li><a href=/zh-cn/docs/snippets/pys/intro/7_scope/>命名空间与作用域</a></li><li><a href=/zh-cn/docs/snippets/pys/intro/8_class_type/>类与对象</a></li><li><a href=/zh-cn/docs/snippets/pys/intro/9_decoration/>闭包与装饰器</a></li><li><a href=/zh-cn/docs/snippets/pys/intro/10_decoration_2/>装饰器2</a></li></ul></li><li><a role=button>线程模型</a><ul><li><a href=/zh-cn/docs/snippets/pys/threading/11_threading/>初窥Python线程</a></li><li><a href=/zh-cn/docs/snippets/pys/threading/12_threading_lock/>线程-锁</a></li><li><a href=/zh-cn/docs/snippets/pys/threading/13_threading_condition/>线程-条件</a></li><li><a href=/zh-cn/docs/snippets/pys/threading/14_threading_semaphore/>线程-信号量</a></li><li><a href=/zh-cn/docs/snippets/pys/threading/15_threading_event/>线程-事件</a></li></ul></li></ul></li><li><a role=button>Gist</a><ul><li><a href=/zh-cn/docs/snippets/gist/clash_pro/>clash_pro代理手动配置示例</a></li></ul></li></ul></li></ul><ul><li><a href=/zh-cn/posts/>Blog</a></li><li><a href=/zh-cn/archive/>Archive</a></li></ul></nav></div><div class="book-search hidden"><input type=text id=book-search-input placeholder=搜索 aria-label=搜索 maxlength=64 data-hotkeys=s/ required pattern=\S+.*>
<span class=clear_search><img src=/svg/close.svg onclick=clearInput()></span><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><script>function clearInput(){document.getElementById("book-search-input").value="";for(var e=document.getElementById("book-search-results");e.firstChild;)e.removeChild(e.firstChild)}</script><ul class=book-languages><li><a class="flex align-center"><img src=/svg/language.svg class=book-icon alt=Languages>
简体中文</a></label><ul><li><a href=https://wangy325.github.io/en/>English</a></li></ul></li></ul></div><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/zh-cn/><span>Endless River</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=搜索 aria-label=搜索 maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul class=book-languages><li><input type=checkbox id=languages class=toggle>
<label for=languages class="flex justify-between"><a role=button class="flex align-center"><img src=/svg/translate.svg class=book-icon alt=Languages>
简体中文</a></label><ul><li><a href=https://wangy325.github.io/en/>English</a></li></ul></li></ul><ul><li class=book-section-flat><a href=/zh-cn/docs/java/>Java</a><ul><li><input type=checkbox id=section-287084f81620420b7ed7e40a42c44d2f class=toggle>
<label for=section-287084f81620420b7ed7e40a42c44d2f class="flex justify-between"><a role=button>面向对象</a></label><ul><li><a href=/zh-cn/docs/java/basic/1_%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90%E4%BF%AE%E9%A5%B0%E7%AC%A6/>访问权限修饰符</a></li><li><a href=/zh-cn/docs/java/basic/2_static%E5%85%B3%E9%94%AE%E5%AD%97/>static关键字</a></li><li><a href=/zh-cn/docs/java/basic/3_%E4%BC%A0%E5%80%BC%E8%BF%98%E6%98%AF%E4%BC%A0%E5%BC%95%E7%94%A8/>传值还是传引用</a></li><li><a href=/zh-cn/docs/java/basic/4_final%E5%85%B3%E9%94%AE%E5%AD%97/>final关键字</a></li><li><a href=/zh-cn/docs/java/basic/5_Object%E8%B6%85%E7%B1%BB/>Object超类</a></li><li><a href=/zh-cn/docs/java/basic/5_%E5%8A%A8%E6%80%81%E7%BB%91%E5%AE%9A%E4%B8%8E%E9%9D%99%E6%80%81%E7%BB%91%E5%AE%9A/>动态绑定与静态绑定</a></li><li><a href=/zh-cn/docs/java/basic/6_%E6%8A%BD%E8%B1%A1%E7%B1%BB%E4%B8%8E%E6%8E%A5%E5%8F%A3/>抽象类与接口</a></li><li><a href=/zh-cn/docs/java/basic/7_lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/>Lambda与函数式接口</a></li><li><a href=/zh-cn/docs/java/basic/8_%E5%86%85%E9%83%A8%E7%B1%BB/>内部类</a></li><li><a href=/zh-cn/docs/java/basic/11_java-new-time-api/>Java8日期和时间API</a></li></ul></li><li><input type=checkbox id=section-3d2f820e49b3d97a7a712be90f9fd6ad class=toggle>
<label for=section-3d2f820e49b3d97a7a712be90f9fd6ad class="flex justify-between"><a href=/zh-cn/docs/java/collections/>集合框架</a></label><ul><li><a href=/zh-cn/docs/java/collections/1_List_arraylist/>ArrayList</a></li><li><a href=/zh-cn/docs/java/collections/1_List_linkedlist/>LinkedList</a></li><li><a href=/zh-cn/docs/java/collections/2_Queue/>Queue</a></li><li><a href=/zh-cn/docs/java/collections/3_Set/>Set</a></li><li><a href=/zh-cn/docs/java/collections/4_Map_hash_tree_map/>HashMap和TreeMap</a></li><li><a href=/zh-cn/docs/java/collections/4_Map_linkedhashmap/>LinkedHashMap</a></li><li><a href=/zh-cn/docs/java/collections/5_HashMap%E7%9A%84%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/>HashMap的源码分析</a></li><li><a href=/zh-cn/docs/java/collections/6_Collections/>Collections工具类</a></li></ul></li><li><input type=checkbox id=section-6d6d0626deeb0ce0f9826f9dabe58c16 class=toggle>
<label for=section-6d6d0626deeb0ce0f9826f9dabe58c16 class="flex justify-between"><a href=/zh-cn/docs/java/concurrency/>并发</a></label><ul><li><input type=checkbox id=section-69ab6f6f868fbdf1ba043c30f82736d8 class=toggle>
<label for=section-69ab6f6f868fbdf1ba043c30f82736d8 class="flex justify-between"><a role=button>锁与同步</a></label><ul><li><a href=/zh-cn/docs/java/concurrency/conecptes/1%E7%BA%BF%E7%A8%8B%E4%B8%8E%E4%BB%BB%E5%8A%A1_1/>线程与任务(一)</a></li><li><a href=/zh-cn/docs/java/concurrency/conecptes/1%E7%BA%BF%E7%A8%8B%E4%B8%8E%E4%BB%BB%E5%8A%A1_2/>线程与任务(二)</a></li><li><a href=/zh-cn/docs/java/concurrency/conecptes/2%E8%B5%84%E6%BA%90%E8%AE%BF%E9%97%AE%E5%8F%97%E9%99%90_1/>资源访问受限--引论</a></li><li><a href=/zh-cn/docs/java/concurrency/conecptes/2%E8%B5%84%E6%BA%90%E8%AE%BF%E9%97%AE%E5%8F%97%E9%99%90_2_%E9%94%81%E5%92%8C%E6%9D%A1%E4%BB%B6/>资源访问受限-锁和条件</a></li><li><a href=/zh-cn/docs/java/concurrency/conecptes/2%E8%B5%84%E6%BA%90%E8%AE%BF%E9%97%AE%E5%8F%97%E9%99%90_3_synchronized/>synchronized关键字</a></li><li><a href=/zh-cn/docs/java/concurrency/conecptes/2%E8%B5%84%E6%BA%90%E8%AE%BF%E9%97%AE%E5%8F%97%E9%99%90_4_%E5%8E%9F%E5%AD%90%E6%80%A7%E4%B8%8E%E5%8E%9F%E5%AD%90%E7%B1%BB/>原子性和可见性</a></li><li><a href=/zh-cn/docs/java/concurrency/conecptes/2%E8%B5%84%E6%BA%90%E8%AE%BF%E9%97%AE%E5%8F%97%E9%99%90_5_%E7%BA%BF%E7%A8%8B%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8/>线程本地存储</a></li><li><a href=/zh-cn/docs/java/concurrency/conecptes/3%E8%8E%B7%E5%8F%96%E4%BB%BB%E5%8A%A1%E7%9A%84%E8%BF%94%E5%9B%9E%E5%80%BC/>获取任务的返回值</a></li><li><a href=/zh-cn/docs/java/concurrency/conecptes/4%E6%AD%BB%E9%94%81/>死锁问题2例</a></li><li><a href=/zh-cn/docs/java/concurrency/conecptes/5%E7%BB%88%E7%BB%93%E4%BB%BB%E5%8A%A1/>终结任务</a></li><li><a href=/zh-cn/docs/java/concurrency/conecptes/6%E7%94%9F%E4%BA%A7%E8%80%85-%E6%B6%88%E8%B4%B9%E8%80%85%E4%B8%8E%E9%98%BB%E5%A1%9E%E9%98%9F%E5%88%97/>生产者-消费者与阻塞队列</a></li><li><a href=/zh-cn/docs/java/concurrency/conecptes/6%E9%98%BB%E5%A1%9E%E9%98%9F%E5%88%97%E4%BD%BF%E7%94%A82%E4%BE%8B/>阻塞队列的使用2例</a></li></ul></li><li><input type=checkbox id=section-138a6f4325e97cca77bc6f9a915a5526 class=toggle>
<label for=section-138a6f4325e97cca77bc6f9a915a5526 class="flex justify-between"><a role=button>线程池</a></label><ul><li><a href=/zh-cn/docs/java/concurrency/pools/7_1_Executors_and_ExecutorService/>Executors与Executor框架</a></li><li><a href=/zh-cn/docs/java/concurrency/pools/7_2_ThreadPoolExecutor1/>ThreadPoolExecutor(一)</a></li><li><a href=/zh-cn/docs/java/concurrency/pools/7_3_ThreadPoolExecutor2/>ThreadPoolExecutor(二)</a></li><li><a href=/zh-cn/docs/java/concurrency/pools/7_4_CompletionService/>CompletionService</a></li><li><a href=/zh-cn/docs/java/concurrency/pools/8_1_ScheduledExecutorService1/>ScheduledExecutorService(一)</a></li><li><a href=/zh-cn/docs/java/concurrency/pools/8_2_ScheduledExecutorService2/>ScheduledExecutorService(二)</a></li></ul></li><li><input type=checkbox id=section-c134c28643238ad138745528076adeb9 class=toggle>
<label for=section-c134c28643238ad138745528076adeb9 class="flex justify-between"><a role=button>并发组件</a></label><ul><li><a href=/zh-cn/docs/java/concurrency/components/9_1_countdownlatch/>CountDownLatch</a></li><li><a href=/zh-cn/docs/java/concurrency/components/9_2_cyclicbarrier/>CyclicBarrier</a></li><li><a href=/zh-cn/docs/java/concurrency/components/9_3_semaphore/>Semaphore</a></li><li><a href=/zh-cn/docs/java/concurrency/components/9_4_exchanger/>Exchanger</a></li><li><a href=/zh-cn/docs/java/concurrency/components/9_5_priorityblockqueue_delayqueue/>PriorityBlockingQueue and DelayQueue</a></li></ul></li></ul></li><li><input type=checkbox id=section-1fe137527ef46393c946fbc7cb576209 class=toggle>
<label for=section-1fe137527ef46393c946fbc7cb576209 class="flex justify-between"><a role=button>JVM</a></label><ul><li><a href=/zh-cn/docs/java/jvm/Java%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F%E8%AF%A6%E8%A7%A3/>Java内存区域详解(转)</a></li><li><a href=/zh-cn/docs/java/jvm/java-gc/>JVM垃圾回收概要(转)</a></li><li><a href=/zh-cn/docs/java/jvm/10_Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E4%B8%8Evolatile%E5%85%B3%E9%94%AE%E5%AD%97/>JMM与volatile关键字(转)</a></li></ul></li><li><input type=checkbox id=section-162997d8460d3e3e2ce056aadf759dc7 class=toggle>
<label for=section-162997d8460d3e3e2ce056aadf759dc7 class="flex justify-between"><a role=button>Spring</a></label><ul><li><a href=/zh-cn/docs/java/spring/SpringBoot-aop-demo/>SpringBoot使用AOP的简单示例</a></li><li><a href=/zh-cn/docs/java/spring/%E5%9C%A8SpringBoot%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%BD%BF%E7%94%A8MockMvc%E8%BF%9B%E8%A1%8C%E6%8E%A5%E5%8F%A3%E6%B5%8B%E8%AF%95/>在SpringBoot项目中使用MockMvc进行接口测试</a></li><li><a href=/zh-cn/docs/java/spring/spring-transaction-propagation/>Spring声明式事务的使用</a></li></ul></li></ul></li><li class=book-section-flat><span>Craft</span><ul><li><input type=checkbox id=section-634f81f2121a26b2cd3998d002677fd7 class=toggle checked>
<label for=section-634f81f2121a26b2cd3998d002677fd7 class="flex justify-between"><a role=button>存储数据</a></label><ul><li><input type=checkbox id=section-a97291ad29c3a3b4bd7c61ffd8d5c44c class=toggle checked>
<label for=section-a97291ad29c3a3b4bd7c61ffd8d5c44c class="flex justify-between"><a role=button>MySQL</a></label><ul><li><a href=/zh-cn/docs/craft/db/sql/1_%E5%9C%A8centOS%E4%B8%8A%E5%AE%89%E8%A3%85%E5%B9%B6%E9%85%8D%E7%BD%AEmysql%E6%95%B0%E6%8D%AE%E5%BA%93/ class=active>CentOS安装并配置MySQL</a></li><li><a href=/zh-cn/docs/craft/db/sql/2_MySQL%E7%9A%84%E5%87%A0%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0/>MySQL字符串处理函数</a></li><li><a href=/zh-cn/docs/craft/db/sql/4_MySQL%E4%BA%8B%E5%8A%A1%E4%B8%8E%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB/>事务隔离级别与MVCC</a></li><li><a href=/zh-cn/docs/craft/db/sql/5_%E4%BD%BF%E7%94%A8mysql%E7%9A%84%E8%A1%8C%E9%94%81/>MySQL显式锁简单介绍</a></li><li><a href=/zh-cn/docs/craft/db/sql/6_mysql%E6%AD%BB%E9%94%81/>MySQL死锁</a></li></ul></li><li><input type=checkbox id=section-bc4b2446005fdca660bd4c972e249165 class=toggle>
<label for=section-bc4b2446005fdca660bd4c972e249165 class="flex justify-between"><a role=button>Redis</a></label><ul><li><a href=/zh-cn/docs/craft/db/redis/redis-all/>redis必知必会(转)</a></li><li><a href=/zh-cn/docs/craft/db/redis/build-redis-sentinel/>Redis Sentinel高可用实现</a></li><li><a href=/zh-cn/docs/craft/db/redis/deploy-redis-cluster-with-docker/>使用docker镜像快速搭建redis集群开发环境</a></li><li><a href=/zh-cn/docs/craft/db/redis/bloom-filter/>布隆过滤器(转)</a></li></ul></li></ul></li><li><input type=checkbox id=section-6f60371e3df5bd386999aceaa1852abe class=toggle>
<label for=section-6f60371e3df5bd386999aceaa1852abe class="flex justify-between"><a href=/zh-cn/docs/craft/algo/>Algorithms</a></label><ul><li><a href=/zh-cn/docs/craft/algo/%E5%90%8C%E4%BD%99%E5%AE%9A%E7%90%86%E4%B8%8E%E4%BA%8C%E8%BF%9B%E5%88%B6%E8%A1%A5%E7%A0%81/>同余定理与二进制补码</a></li><li><a href=/zh-cn/docs/craft/algo/%E7%A7%BB%E4%BD%8D%E8%BF%90%E7%AE%97/>移位运算</a></li><li><a href=/zh-cn/docs/craft/algo/%E5%BC%82%E6%88%96%E8%BF%90%E7%AE%97/>异或运算</a></li><li><a href=/zh-cn/docs/craft/algo/%E4%BD%8D%E8%BF%90%E7%AE%97%E7%9A%84%E5%B0%8F%E6%8A%80%E5%B7%A7/>位运算的小技巧</a></li><li><a href=/zh-cn/docs/craft/algo/01%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98/>背包问题2例</a></li></ul></li><li><input type=checkbox id=section-30cbf81626e3b7f7e6edb89d12c78023 class=toggle>
<label for=section-30cbf81626e3b7f7e6edb89d12c78023 class="flex justify-between"><a role=button>设计模式</a></label><ul><li><input type=checkbox id=section-42f50c16d27783d3bedd607a7e837d36 class=toggle>
<label for=section-42f50c16d27783d3bedd607a7e837d36 class="flex justify-between"><a role=button>Creation</a></label><ul><li><a href=/zh-cn/docs/craft/design_pattern/creation/1_singleton/>单例模式</a></li><li><a href=/zh-cn/docs/craft/design_pattern/creation/2_factory/>工厂模式</a></li><li><a href=/zh-cn/docs/craft/design_pattern/creation/3_abstract_factory/>抽象工厂模式</a></li><li><a href=/zh-cn/docs/craft/design_pattern/creation/4_builder/>建造者模式</a></li></ul></li><li><input type=checkbox id=section-cb39206110b74ebd45f80b2f90510acc class=toggle>
<label for=section-cb39206110b74ebd45f80b2f90510acc class="flex justify-between"><a role=button>Behaviour</a></label><ul><li><a href=/zh-cn/docs/craft/design_pattern/behaviour/1_command/>命令模式</a></li><li><a href=/zh-cn/docs/craft/design_pattern/behaviour/2_observer/>观察者模式</a></li><li><a href=/zh-cn/docs/craft/design_pattern/behaviour/3_strategy/>策略模式</a></li><li><a href=/zh-cn/docs/craft/design_pattern/behaviour/4_template_method/>模板方法模式</a></li></ul></li><li><input type=checkbox id=section-7db5831683340fa833c951dc3e200088 class=toggle>
<label for=section-7db5831683340fa833c951dc3e200088 class="flex justify-between"><a role=button>Structural</a></label><ul><li><a href=/zh-cn/docs/craft/design_pattern/structure/3_decorator/>装饰者模式</a></li><li><a href=/zh-cn/docs/craft/design_pattern/structure/2_adaptor/>适配器模式</a></li><li><a href=/zh-cn/docs/craft/design_pattern/structure/4_%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/>外观模式</a></li><li><a href=/zh-cn/docs/craft/design_pattern/structure/proxy/>代理模式</a></li></ul></li></ul></li></ul></li><li class=book-section-flat><span>Note</span><ul><li><input type=checkbox id=section-e1b333d5984dfdf0a240ff1b0a6c2115 class=toggle>
<label for=section-e1b333d5984dfdf0a240ff1b0a6c2115 class="flex justify-between"><a href=/zh-cn/docs/note/course/>慕课笔记</a></label><ul><li><input type=checkbox id=section-f0595ab9881a31f8c4cb8d57ad211189 class=toggle>
<label for=section-f0595ab9881a31f8c4cb8d57ad211189 class="flex justify-between"><a href=/zh-cn/docs/note/course/operating_system_peking/>操作系统原理</a></label><ul><li><a href=/zh-cn/docs/note/course/operating_system_peking/1_intro/>引论</a></li><li><a href=/zh-cn/docs/note/course/operating_system_peking/2_env_and_logic/>操作系统运行环境与机制</a></li><li><a href=/zh-cn/docs/note/course/operating_system_peking/3_processes_and_threads/>进程和线程模型</a></li></ul></li><li><input type=checkbox id=section-aaef4b28e93ddde0053a8bd35b72d3fe class=toggle>
<label for=section-aaef4b28e93ddde0053a8bd35b72d3fe class="flex justify-between"><a href=/zh-cn/docs/note/course/algorithms_part1/>算法-第一部分</a></label><ul></ul></li></ul></li><li><input type=checkbox id=section-a55bc121ab1723b9dedc870a0f128ac7 class=toggle>
<label for=section-a55bc121ab1723b9dedc870a0f128ac7 class="flex justify-between"><a role=button>Translations</a></label><ul><li><a href=/zh-cn/docs/note/translations/use-springboot-messagesource/>在SpringBoot中使用MessageSource</a></li><li><a href=/zh-cn/docs/note/translations/guide-to-logback-cn/>使用Logback记录日志</a></li><li><a href=/zh-cn/docs/note/translations/how2use-printf/>使用printf格式化输出</a></li></ul></li></ul></li><li class=book-section-flat><span>Snippets</span><ul><li><input type=checkbox id=section-a8fd99d5127debd3cbed17894efb66ed class=toggle>
<label for=section-a8fd99d5127debd3cbed17894efb66ed class="flex justify-between"><a role=button>Java</a></label><ul><li><a href=/zh-cn/docs/snippets/java/Gfunction/>Java接口作为方法入参</a></li><li><a href=/zh-cn/docs/snippets/java/Goto/>Java中使用goto语句？</a></li><li><a href=/zh-cn/docs/snippets/java/ImmutableStr/>Java字符串的不可变</a></li></ul></li><li><input type=checkbox id=section-87c7d734d1184726a0527d7f36f4d9aa class=toggle>
<label for=section-87c7d734d1184726a0527d7f36f4d9aa class="flex justify-between"><a role=button>Python</a></label><ul><li><input type=checkbox id=section-341a69431bdb440adfb92ae08ded5eac class=toggle>
<label for=section-341a69431bdb440adfb92ae08ded5eac class="flex justify-between"><a role=button>基本概念</a></label><ul><li><a href=/zh-cn/docs/snippets/pys/intro/1_flow_control/>流程控制语句</a></li><li><a href=/zh-cn/docs/snippets/pys/intro/2_data_list/>列表（list）</a></li><li><a href=/zh-cn/docs/snippets/pys/intro/3_data_str/>字符串，元组和字典</a></li><li><a href=/zh-cn/docs/snippets/pys/intro/4_func/>函数式编程</a></li><li><a href=/zh-cn/docs/snippets/pys/intro/4_important_funcs/>4个重要的内置函数</a></li><li><a href=/zh-cn/docs/snippets/pys/intro/5_file_io/>格式化输出与文件I/O</a></li><li><a href=/zh-cn/docs/snippets/pys/intro/6_try_excep/>异常处理</a></li><li><a href=/zh-cn/docs/snippets/pys/intro/7_scope/>命名空间与作用域</a></li><li><a href=/zh-cn/docs/snippets/pys/intro/8_class_type/>类与对象</a></li><li><a href=/zh-cn/docs/snippets/pys/intro/9_decoration/>闭包与装饰器</a></li><li><a href=/zh-cn/docs/snippets/pys/intro/10_decoration_2/>装饰器2</a></li></ul></li><li><input type=checkbox id=section-f81965257547a8df6742cd11ed0d40fa class=toggle>
<label for=section-f81965257547a8df6742cd11ed0d40fa class="flex justify-between"><a role=button>线程模型</a></label><ul><li><a href=/zh-cn/docs/snippets/pys/threading/11_threading/>初窥Python线程</a></li><li><a href=/zh-cn/docs/snippets/pys/threading/12_threading_lock/>线程-锁</a></li><li><a href=/zh-cn/docs/snippets/pys/threading/13_threading_condition/>线程-条件</a></li><li><a href=/zh-cn/docs/snippets/pys/threading/14_threading_semaphore/>线程-信号量</a></li><li><a href=/zh-cn/docs/snippets/pys/threading/15_threading_event/>线程-事件</a></li></ul></li></ul></li><li><input type=checkbox id=section-6b5f803241e31ad8bb3dcab8c6f2832d class=toggle>
<label for=section-6b5f803241e31ad8bb3dcab8c6f2832d class="flex justify-between"><a role=button>Gist</a></label><ul><li><a href=/zh-cn/docs/snippets/gist/clash_pro/>clash_pro代理手动配置示例</a></li></ul></li></ul></li></ul><ul><li><a href=/zh-cn/posts/>Blog</a></li><li><a href=/zh-cn/archive/>Archive</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>CentOS安装并配置MySQL</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><div id=toc-new><ul class=nav><li class=nav-item><a id=t安装MySQL href=javascript:void(0) onclick='return scrolly("安装mysql"),!1'>安装MySQL</a></li><li class=nav-item><a id=t配置 href=javascript:void(0) onclick='return scrolly("配置"),!1'>配置</a></li><li class=nav-item><a id=t账户与权限 href=javascript:void(0) onclick='return scrolly("账户与权限"),!1'>账户与权限</a><ul class=nav><li class=nav-item><a id=t账户 href=javascript:void(0) onclick='return scrolly("账户"),!1'>账户</a></li><li class=nav-item><a id=t权限 href=javascript:void(0) onclick='return scrolly("权限"),!1'>权限</a><ul class=nav><li class=nav-item><a id=t给用户授予权限 href=javascript:void(0) onclick='return scrolly("给用户授予权限"),!1'>给用户授予权限</a></li></ul></li></ul></li><li class=nav-item><a id=t数据备份与导入 href=javascript:void(0) onclick='return scrolly("数据备份与导入"),!1'>数据备份与导入</a></li><li class=nav-item><a id=t使用SSL加密连接 href=javascript:void(0) onclick='return scrolly("使用ssl加密连接"),!1'>使用SSL加密连接</a><ul class=nav><li class=nav-item><a id=t查看mysqlSSL状态信息 href=javascript:void(0) onclick='return scrolly("查看mysql-ssl状态信息"),!1'>查看mysql SSL状态信息</a></li><li class=nav-item><a id=t配置SSL安全连接 href=javascript:void(0) onclick='return scrolly("配置ssl安全连接"),!1'>配置SSL安全连接</a></li></ul></li></ul></div><script>function scrolly(e){const t=40;var n=document.getElementById(e).offsetTop;window.scrollTo({top:n+t,behaviour:"smooth"})}</script></aside></header><article class="markdown book-article"><h1><a href=/zh-cn/docs/craft/db/sql/1_%E5%9C%A8centOS%E4%B8%8A%E5%AE%89%E8%A3%85%E5%B9%B6%E9%85%8D%E7%BD%AEmysql%E6%95%B0%E6%8D%AE%E5%BA%93/>CentOS安装并配置MySQL</a></h1><div class="postmeta flex align-cneter" style=justify-content:center><div class="created flex align-cneter"><img src=/svg/calendar-event.svg class=book-icon alt>
<a title='创建者 wangy325'>2019-08-16</a></div><div class="cates flex align-center"><img src=/svg/cates.svg class=book-icon alt>
<a href=/zh-cn/categories/mysql/>Mysql</a></div></div><p>文章介绍了在centOS7上安装mysql数据库服务的配置及简单优化过程。在服务器上安装mysql服务网络上能够找到的资源很多了，因此本文没有作详细介绍，本文的重点在于后续的优化配置方面。</p><h1 id=安装mysql>安装MySQL
<a class=anchor href=#%e5%ae%89%e8%a3%85mysql>#</a></h1><ul><li><a href=https://juejin.im/post/5c088b066fb9a049d4419985>在centOS上安装mysql 5.7-juejin</a></li><li><span id=hook></span>
<a href=https://dev.mysql.com/doc/refman/5.7/en/linux-installation-yum-repo.html>通过yum命令安装并进行初始化设置-dev.mysql.com</a></li></ul><h1 id=配置>配置
<a class=anchor href=#%e9%85%8d%e7%bd%ae>#</a></h1><p>mysql的配置文件在<code>/etc/my.cnf</code>， 只是简单地配置了数据库编码为<code>utf8</code>；</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=ln> 1</span><span class=cl><span class=c1>### my.cnf配置内容</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=c1># For advice on how to change settings please see</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=c1># http://dev.mysql.com/doc/refman/5.7/en/server-configuration-defaults.html</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=o>[</span>client<span class=o>]</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>default-character-set<span class=o>=</span>utf8
</span></span><span class=line><span class=ln> 6</span><span class=cl>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=o>[</span>mysql<span class=o>]</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>default-character-set<span class=o>=</span>utf8
</span></span><span class=line><span class=ln> 9</span><span class=cl>
</span></span><span class=line><span class=ln>10</span><span class=cl><span class=o>[</span>mysqld<span class=o>]</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>collation-server <span class=o>=</span> utf8_unicode_ci
</span></span><span class=line><span class=ln>12</span><span class=cl>collation-server <span class=o>=</span> utf8_bin
</span></span><span class=line><span class=ln>13</span><span class=cl>collation-server <span class=o>=</span> utf8_general_ci
</span></span><span class=line><span class=ln>14</span><span class=cl>init-connect<span class=o>=</span><span class=s1>&#39;SET NAMES utf8&#39;</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>character-set-server <span class=o>=</span> utf8
</span></span><span class=line><span class=ln>16</span><span class=cl>default-storage-engine <span class=o>=</span> INNODB
</span></span><span class=line><span class=ln>17</span><span class=cl><span class=nv>datadir</span><span class=o>=</span>/var/lib/mysql
</span></span><span class=line><span class=ln>18</span><span class=cl><span class=nv>socket</span><span class=o>=</span>/var/lib/mysql/mysql.sock
</span></span></code></pre></div><p>mysql有默认配置账户以及测试数据库， root账户也会默认分配密码， 安装
<a href=/zh-cn/#hook>指引链接2</a><strong>官方文档</strong>中说明了默认账户密码:</p><p>1） 在 <code>/var/log/mysqld.log</code>中记录了mysql root账户的默认密码</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=ln>1</span><span class=cl><span class=o>[</span>root@simple ~<span class=o>]</span> cat /var/log/mysqld.log <span class=p>|</span> grep -i <span class=s1>&#39;temporary password&#39;</span>
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=c1># 2019-10-15T07:08:33.627866Z 1 [Note] A temporary password is generated for</span>
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=c1># root@localhost: I6cpDa!wj.6&amp;</span>
</span></span></code></pre></div><p>2） 可以使用<code>mysql_secure_installation</code>命令进行初始化设置，程序会询问一些默认设置，包括重置密码，删除匿名账户，禁止root远程登录等等配置</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=ln>1</span><span class=cl><span class=o>[</span>root@simple ~<span class=o>]</span> mysql_secure_installation
</span></span><span class=line><span class=ln>2</span><span class=cl>...
</span></span></code></pre></div><blockquote><p>还可以通过<code>set password</code>或者> <code>mysqladmin</code>修改密码:</p><pre tabindex=0><code>SET PASSWORD FOR &#39;username&#39;@&#39;scope&#39; = PASSWORD(&#39;newpasswd&#39;)
或者
mysqladmin -uroot -poldpass password newpass;
</code></pre><p>其他的配置 比如设置数据库时间为服务器时间(默认为UTC时间)<b>并没有成功</b></p></blockquote><h1 id=账户与权限>账户与权限
<a class=anchor href=#%e8%b4%a6%e6%88%b7%e4%b8%8e%e6%9d%83%e9%99%90>#</a></h1><p>前已述及，mysql默认配置root账户，并且已经<strong>只能本地登录</strong>(出于安全考虑)，并且不建议使用root账户进行数据库连接；</p><p>因此，需要新账户，并且要控制账户权限，防止一些不可预见的错误出现；</p><p>同时，账户创建之后需赋予适当的权限；</p><h2 id=账户>账户
<a class=anchor href=#%e8%b4%a6%e6%88%b7>#</a></h2><p>使用以下命令创建账户:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-mysql data-lang=mysql><span class=line><span class=ln>1</span><span class=cl><span class=k>create</span><span class=w> </span><span class=k>user</span><span class=w> </span><span class=n>username</span><span class=o>@</span><span class=s1>&#39;scope&#39;</span><span class=w> </span><span class=k>IDENTIFIED</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=s1>&#39;passwd@&#39;</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><p>关于账户说明</p><ul><li><p>mysql 5.7加入了<code>validate_password</code>机制，该机制迫使用户使用[强密码]--至少8位，且至少包含一个大写字母，一个小写字母，一个数字，一个特殊符号；若想关闭此功能，可在<code>my.cnf</code>中的[mysqld]栏下配置<code>validate_password=Off</code>；</p></li><li><p>scope项指定用户可以从哪里登录，一般<code>localhost</code>只允许本地(或ssh登录)，<code>%</code>允许任意ip位置登录，</p></li></ul><h2 id=权限>权限
<a class=anchor href=#%e6%9d%83%e9%99%90>#</a></h2><p>mysql的权限可以简单介绍为:</p><table><thead><tr><th style=text-align:center>权限</th><th style=text-align:center>描述</th></tr></thead><tbody><tr><td style=text-align:center>全局权限</td><td style=text-align:center>privilege for all schemas； 信息保存在mysql.user表中</td></tr><tr><td style=text-align:center>schema权限</td><td style=text-align:center>privilege for all tables； 信息保存在mysql.db中</td></tr><tr><td style=text-align:center>table权限</td><td style=text-align:center>privilege for all columns； 信息保存在mysql.tables_priv中</td></tr><tr><td style=text-align:center>column权限</td><td style=text-align:center>privilege for column；信息保存在mysql.columns_priv中</td></tr><tr><td style=text-align:center>子程序权限</td><td style=text-align:center>?</td></tr></tbody></table><p>权限的细致说明以及，各类权限所保存的表，可参考:</p><ol><li><a href=https://www.cnblogs.com/kerrycode/p/7423850.html>MySQL 查看用户授予的权限</a></li><li><a href=https://dev.mysql.com/doc/refman/5.7/en/privileges-provided.html>Privileges Provided by MySQL</a></li><li><a href=https://dev.mysql.com/doc/refman/5.7/en/grant-tables.html>Grant Tables</a></li></ol><p>最简单的查看用户权限的方法</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=ln> 1</span><span class=cl>show grants <span class=k>for</span> user<span class=p>;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>show grants <span class=k>for</span> user@<span class=s1>&#39;localhost&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=c1># 查看root的权限</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>mysql&gt; show grants <span class=k>for</span> root@<span class=s1>&#39;localhost&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>+---------------------------------------------------------------------+
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=p>|</span> Grants <span class=k>for</span> root@localhost                                           <span class=p>|</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>+---------------------------------------------------------------------+
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=p>|</span> GRANT ALL PRIVILEGES ON *.* TO <span class=s1>&#39;root&#39;</span>@<span class=s1>&#39;localhost&#39;</span> WITH GRANT OPTION <span class=p>|</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl><span class=p>|</span> GRANT PROXY ON <span class=s1>&#39;&#39;</span>@<span class=s1>&#39;&#39;</span> TO <span class=s1>&#39;root&#39;</span>@<span class=s1>&#39;localhost&#39;</span> WITH GRANT OPTION        <span class=p>|</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>+---------------------------------------------------------------------+
</span></span><span class=line><span class=ln>11</span><span class=cl><span class=m>2</span> rows in <span class=nb>set</span> <span class=o>(</span>0.00 sec<span class=o>)</span>
</span></span></code></pre></div><p>从上面可以看出，root有[*.*的<strong>所有权限</strong>]，至于*.*，代表了ALLDB.ALLTABLES-即<strong>所有数据库的所有表</strong>，这是最高权限。</p><p>或者，可以通过查询<code>mysql.user</code>表来获取权限信息</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=ln>1</span><span class=cl><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>mysql</span><span class=p>.</span><span class=k>user</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=k>user</span><span class=o>=</span><span class=s1>&#39;root&#39;</span><span class=err>\</span><span class=k>G</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>2</span><span class=cl><span class=w></span><span class=o>***************************</span><span class=w> </span><span class=mi>1</span><span class=p>.</span><span class=w> </span><span class=k>row</span><span class=w> </span><span class=o>***************************</span><span class=w>
</span></span></span><span class=line><span class=ln>3</span><span class=cl><span class=w>                  </span><span class=k>Host</span><span class=p>:</span><span class=w> </span><span class=n>localhost</span><span class=w>
</span></span></span><span class=line><span class=ln>4</span><span class=cl><span class=w>                  </span><span class=k>User</span><span class=p>:</span><span class=w> </span><span class=n>root</span><span class=w>
</span></span></span><span class=line><span class=ln>5</span><span class=cl><span class=w>           </span><span class=n>Select_priv</span><span class=p>:</span><span class=w> </span><span class=n>Y</span><span class=w>
</span></span></span><span class=line><span class=ln>6</span><span class=cl><span class=w>           </span><span class=n>Insert_priv</span><span class=p>:</span><span class=w> </span><span class=n>Y</span><span class=w>
</span></span></span><span class=line><span class=ln>7</span><span class=cl><span class=w>           </span><span class=n>Update_priv</span><span class=p>:</span><span class=w> </span><span class=n>Y</span><span class=w>
</span></span></span><span class=line><span class=ln>8</span><span class=cl><span class=w>           </span><span class=n>Delete_priv</span><span class=p>:</span><span class=w> </span><span class=n>Y</span><span class=w>
</span></span></span><span class=line><span class=ln>9</span><span class=cl><span class=w></span><span class=o>#</span><span class=w> </span><span class=k>ignore</span><span class=w> </span><span class=n>others</span><span class=w>
</span></span></span></code></pre></div><h3 id=给用户授予权限>给用户授予权限
<a class=anchor href=#%e7%bb%99%e7%94%a8%e6%88%b7%e6%8e%88%e4%ba%88%e6%9d%83%e9%99%90>#</a></h3><p>假设我们创建了一个用户<code>test</code>，并且没有授予任何权限，name，这个用户的权限是这样的；</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=ln>1</span><span class=cl>mysql&gt; show grants <span class=k>for</span> test<span class=p>;</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>+---------------------------------------+
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=p>|</span> Grants <span class=k>for</span> hc_future@%                <span class=p>|</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>+---------------------------------------+
</span></span><span class=line><span class=ln>5</span><span class=cl><span class=p>|</span> GRANT USAGE ON *.* TO <span class=s1>&#39;hc_future&#39;</span>@<span class=s1>&#39;%&#39;</span> <span class=p>|</span>
</span></span><span class=line><span class=ln>6</span><span class=cl>+---------------------------------------+
</span></span><span class=line><span class=ln>7</span><span class=cl><span class=m>1</span> row in <span class=nb>set</span> <span class=o>(</span>0.00 sec<span class=o>)</span>
</span></span></code></pre></div><p>可以看到，实际上<code>test</code>并没有任何权限；</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=ln>1</span><span class=cl><span class=n>mysql</span><span class=o>&gt;</span><span class=w> </span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=k>user</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=k>user</span><span class=o>=</span><span class=s1>&#39;test&#39;</span><span class=err>\</span><span class=k>G</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>2</span><span class=cl><span class=w></span><span class=o>***************************</span><span class=w> </span><span class=mi>1</span><span class=p>.</span><span class=w> </span><span class=k>row</span><span class=w> </span><span class=o>***************************</span><span class=w>
</span></span></span><span class=line><span class=ln>3</span><span class=cl><span class=w>                  </span><span class=k>Host</span><span class=p>:</span><span class=w> </span><span class=o>%</span><span class=w>
</span></span></span><span class=line><span class=ln>4</span><span class=cl><span class=w>                  </span><span class=k>User</span><span class=p>:</span><span class=w> </span><span class=n>hc_future</span><span class=w>
</span></span></span><span class=line><span class=ln>5</span><span class=cl><span class=w>           </span><span class=n>Select_priv</span><span class=p>:</span><span class=w> </span><span class=n>N</span><span class=w>
</span></span></span><span class=line><span class=ln>6</span><span class=cl><span class=w>           </span><span class=n>Insert_priv</span><span class=p>:</span><span class=w> </span><span class=n>N</span><span class=w>
</span></span></span><span class=line><span class=ln>7</span><span class=cl><span class=w>           </span><span class=n>Update_priv</span><span class=p>:</span><span class=w> </span><span class=n>N</span><span class=w>
</span></span></span><span class=line><span class=ln>8</span><span class=cl><span class=w>           </span><span class=n>Delete_priv</span><span class=p>:</span><span class=w> </span><span class=n>N</span><span class=w>
</span></span></span><span class=line><span class=ln>9</span><span class=cl><span class=w></span><span class=o>***************************</span><span class=w> </span><span class=mi>1</span><span class=p>.</span><span class=w> </span><span class=k>row</span><span class=w> </span><span class=o>***************************</span><span class=w>
</span></span></span></code></pre></div><p>尝试使用该账户对mysql进行任何操作都会得到一个错误信息：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=ln>1</span><span class=cl><span class=p>[</span><span class=mi>42000</span><span class=p>][</span><span class=mi>1044</span><span class=p>]</span><span class=w> </span><span class=k>Access</span><span class=w> </span><span class=n>denied</span><span class=w> </span><span class=k>for</span><span class=w> </span><span class=k>user</span><span class=w> </span><span class=s1>&#39;hc_future&#39;</span><span class=o>@</span><span class=s1>&#39;%&#39;</span><span class=w> </span><span class=k>to</span><span class=w> </span><span class=k>database</span><span class=w> </span><span class=s1>&#39;test&#39;</span><span class=w>
</span></span></span></code></pre></div><p>显然，我们应该给用户授予部分权限，已让其完成操作，mysql使用<code>grant</code>来给用户授予权限</p><p>若我想给<code>test</code>授予全局select，update权限:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=ln> 1</span><span class=cl><span class=n>mysql</span><span class=o>&gt;</span><span class=w> </span><span class=k>grant</span><span class=w> </span><span class=k>select</span><span class=err>，</span><span class=w> </span><span class=k>update</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=o>*</span><span class=p>.</span><span class=o>*</span><span class=w> </span><span class=k>to</span><span class=w> </span><span class=n>test</span><span class=o>@</span><span class=s1>&#39;%&#39;</span><span class=w> </span><span class=n>identified</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=s1>&#39;testT123!@#&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=w></span><span class=n>Query</span><span class=w> </span><span class=n>OK</span><span class=err>，</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=k>rows</span><span class=w> </span><span class=n>affected</span><span class=err>，</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=n>warning</span><span class=w> </span><span class=p>(</span><span class=mi>0</span><span class=p>.</span><span class=mi>00</span><span class=w> </span><span class=n>sec</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=w></span><span class=n>mysql</span><span class=o>&gt;</span><span class=w> </span><span class=k>show</span><span class=w> </span><span class=n>grants</span><span class=w> </span><span class=k>for</span><span class=w> </span><span class=n>test</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=w></span><span class=o>+</span><span class=c1>------------------------------------------------+
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=c1></span><span class=o>|</span><span class=w> </span><span class=n>Grants</span><span class=w> </span><span class=k>for</span><span class=w> </span><span class=n>test</span><span class=o>@%</span><span class=w>                         </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=w></span><span class=o>+</span><span class=c1>------------------------------------------------+
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=c1></span><span class=o>|</span><span class=w> </span><span class=k>GRANT</span><span class=w> </span><span class=k>SELECT</span><span class=err>，</span><span class=w> </span><span class=k>UPDATE</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=o>*</span><span class=p>.</span><span class=o>*</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=s1>&#39;test&#39;</span><span class=o>@</span><span class=s1>&#39;%&#39;</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=w></span><span class=o>+</span><span class=c1>------------------------------------------------+
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=c1></span><span class=mi>1</span><span class=w> </span><span class=k>row</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=k>set</span><span class=w> </span><span class=p>(</span><span class=mi>0</span><span class=p>.</span><span class=mi>00</span><span class=w> </span><span class=n>sec</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=w></span><span class=n>mysql</span><span class=o>&gt;</span><span class=w> </span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=k>user</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=k>user</span><span class=w> </span><span class=o>=</span><span class=s1>&#39;test&#39;</span><span class=err>\</span><span class=k>G</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>11</span><span class=cl><span class=w></span><span class=o>***************************</span><span class=w> </span><span class=mi>1</span><span class=p>.</span><span class=w> </span><span class=k>row</span><span class=w> </span><span class=o>***************************</span><span class=w>
</span></span></span><span class=line><span class=ln>12</span><span class=cl><span class=w>                  </span><span class=k>Host</span><span class=p>:</span><span class=w> </span><span class=o>%</span><span class=w>
</span></span></span><span class=line><span class=ln>13</span><span class=cl><span class=w>                  </span><span class=k>User</span><span class=p>:</span><span class=w> </span><span class=n>hc_future</span><span class=w>
</span></span></span><span class=line><span class=ln>14</span><span class=cl><span class=w>           </span><span class=n>Select_priv</span><span class=p>:</span><span class=w> </span><span class=n>Y</span><span class=w>
</span></span></span><span class=line><span class=ln>15</span><span class=cl><span class=w>           </span><span class=n>Insert_priv</span><span class=p>:</span><span class=w> </span><span class=n>N</span><span class=w>
</span></span></span><span class=line><span class=ln>16</span><span class=cl><span class=w>           </span><span class=n>Update_priv</span><span class=p>:</span><span class=w> </span><span class=n>Y</span><span class=w>
</span></span></span><span class=line><span class=ln>17</span><span class=cl><span class=w>           </span><span class=n>Delete_priv</span><span class=p>:</span><span class=w> </span><span class=n>N</span><span class=w>
</span></span></span><span class=line><span class=ln>18</span><span class=cl><span class=w>           </span><span class=n>Create_priv</span><span class=p>:</span><span class=w> </span><span class=n>N</span><span class=w>
</span></span></span><span class=line><span class=ln>19</span><span class=cl><span class=w>           </span><span class=o>#</span><span class=w> </span><span class=k>ignore</span><span class=w> </span><span class=n>others</span><span class=w>
</span></span></span></code></pre></div><p><strong>mysql 5.7.28中， 如果grant命令执行的用户没有被创建，会默认创建该用户</strong></p><p>更多关于grant的使用，参考官方文档
<a href=https://dev.mysql.com/doc/refman/5.7/en/grant.html>GRANT Syntax</a></p><h1 id=数据备份与导入>数据备份与导入
<a class=anchor href=#%e6%95%b0%e6%8d%ae%e5%a4%87%e4%bb%bd%e4%b8%8e%e5%af%bc%e5%85%a5>#</a></h1><p>主要使用<code>mysqldump</code>和<code>source</code>来进行数据库的备份和恢复</p><p>数据库的备份主要分为结构和数据的备份，备份为<code>x.sql</code>形式的文件</p><p>从备份的结果来看，</p><ul><li>备份结构主要生成<code>create table</code>语句</li><li>备份数据生成<code>insert into</code>语句</li></ul><p>除此之外，备份的范围可从库到表之间多级变化， 总言之， <code>mysqldump</code>满足绝大多数备份需求；</p><p>需要说明的是，若数据库中有视图，则需要谨慎行事了， 因为视图中存在一些对原数据库表的引用以及对
<a href=https://www.cnblogs.com/zejin2008/p/4767531.html>执行用户的DEFINER</a>， 若恢复的数据库和备份的数据库名字以及用户一致，则不会存在问题，否则可能会出现找不到表的错误</p><p>而数据库的恢复则简单了，<code>source x.sql</code>即可</p><p>更多关于数据库备份恢复的细节，查看:
<a href=https://www.cnblogs.com/chevin/p/5683281.html>mysqldump 导入/导出 结构&数据&存储过程&函数&事件&触发器</a></p><h1 id=使用ssl加密连接>使用SSL加密连接
<a class=anchor href=#%e4%bd%bf%e7%94%a8ssl%e5%8a%a0%e5%af%86%e8%bf%9e%e6%8e%a5>#</a></h1><p>在<code>jdbc</code>连接数据库的过程中可能会出现这样的警告:</p><blockquote><p>Establishing SSL connection without server's identity verification is not recommended.
According to MySQL 5.5.45+， 5.6.26+ and 5.7.6+ requirements SSL connection must be
established by default if explicit option isn't set. For compliance with existing applications
not using SSL the verifyServerCertificate property is set to 'false'. You need either to
explicitly disable SSL by setting useSSL=false， or set useSSL=true and provide
truststore for server certificate verification.</p></blockquote><p>有时候，设置<code>useSSL=true</code>又会遇到这样的错误:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln>1</span><span class=cl><span class=n>Caused</span><span class=w> </span><span class=n>by</span><span class=p>:</span><span class=w> </span><span class=n>javax</span><span class=p>.</span><span class=na>net</span><span class=p>.</span><span class=na>ssl</span><span class=p>.</span><span class=na>SSLHandshakeException</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>2</span><span class=cl><span class=w></span><span class=n>sun</span><span class=p>.</span><span class=na>security</span><span class=p>.</span><span class=na>validator</span><span class=p>.</span><span class=na>ValidatorException</span><span class=p>:</span><span class=w> </span><span class=n>PKIX</span><span class=w> </span><span class=n>path</span><span class=w> </span><span class=n>building</span><span class=w> </span><span class=n>failed</span><span class=p>:</span><span class=w> </span><span class=n>sun</span><span class=p>.</span><span class=na>security</span><span class=p>.</span><span class=na>provider</span><span class=p>.</span><span class=na>certpath</span><span class=p>.</span><span class=na>SunCertPathBuilderException</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>3</span><span class=cl><span class=w></span><span class=n>unable</span><span class=w> </span><span class=n>to</span><span class=w> </span><span class=n>find</span><span class=w> </span><span class=n>valid</span><span class=w> </span><span class=n>certification</span><span class=w> </span><span class=n>path</span><span class=w> </span><span class=n>to</span><span class=w> </span><span class=n>requested</span><span class=w> </span><span class=n>target</span><span class=w>
</span></span></span><span class=line><span class=ln>4</span><span class=cl><span class=w>	</span><span class=n>at</span><span class=w> </span><span class=n>sun</span><span class=p>.</span><span class=na>security</span><span class=p>.</span><span class=na>ssl</span><span class=p>.</span><span class=na>Alerts</span><span class=p>.</span><span class=na>getSSLException</span><span class=p>(</span><span class=n>Alerts</span><span class=p>.</span><span class=na>java</span><span class=p>:</span><span class=n>192</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=ln>5</span><span class=cl><span class=w>	</span><span class=n>at</span><span class=w> </span><span class=n>sun</span><span class=p>.</span><span class=na>security</span><span class=p>.</span><span class=na>ssl</span><span class=p>.</span><span class=na>SSLSocketImpl</span><span class=p>.</span><span class=na>fatal</span><span class=p>(</span><span class=n>SSLSocketImpl</span><span class=p>.</span><span class=na>java</span><span class=p>:</span><span class=n>1946</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=ln>6</span><span class=cl><span class=w>	</span><span class=n>at</span><span class=w> </span><span class=n>sun</span><span class=p>.</span><span class=na>security</span><span class=p>.</span><span class=na>ssl</span><span class=p>.</span><span class=na>Handshaker</span><span class=p>.</span><span class=na>fatalSE</span><span class=p>(</span><span class=n>Handshaker</span><span class=p>.</span><span class=na>java</span><span class=p>:</span><span class=n>316</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=ln>7</span><span class=cl><span class=w>	</span><span class=n>at</span><span class=w> </span><span class=n>sun</span><span class=p>.</span><span class=na>security</span><span class=p>.</span><span class=na>ssl</span><span class=p>.</span><span class=na>Handshaker</span><span class=p>.</span><span class=na>fatalSE</span><span class=p>(</span><span class=n>Handshaker</span><span class=p>.</span><span class=na>java</span><span class=p>:</span><span class=n>310</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=ln>8</span><span class=cl><span class=w>	</span><span class=p>...</span><span class=w> </span><span class=n>67</span><span class=w> </span><span class=n>more</span><span class=w>
</span></span></span></code></pre></div><p>上述错误的大意是没找到ssl证书， 那么问题出在了<del>mysql配置</del>服务端或者客户端的配置上</p><p>由于mysql 5.7以上默认开启了ssl，验证一下</p><h2 id=查看mysql-ssl状态信息>查看mysql SSL状态信息
<a class=anchor href=#%e6%9f%a5%e7%9c%8bmysql-ssl%e7%8a%b6%e6%80%81%e4%bf%a1%e6%81%af>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=ln> 1</span><span class=cl><span class=o>#</span><span class=w> </span><span class=err>使用</span><span class=n>root账户登录</span><span class=w> </span><span class=n>mysql</span><span class=w> </span><span class=o>-</span><span class=n>u</span><span class=w> </span><span class=n>root</span><span class=w> </span><span class=o>-</span><span class=n>p</span><span class=w>
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=w></span><span class=o>#</span><span class=w> </span><span class=err>查看</span><span class=n>ssl信息</span><span class=w>
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=w></span><span class=o>#</span><span class=w> </span><span class=n>Server</span><span class=w> </span><span class=k>version</span><span class=p>:</span><span class=w> </span><span class=mi>5</span><span class=p>.</span><span class=mi>7</span><span class=p>.</span><span class=mi>28</span><span class=w> </span><span class=n>MySQL</span><span class=w> </span><span class=n>Community</span><span class=w> </span><span class=n>Server</span><span class=w> </span><span class=p>(</span><span class=n>GPL</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=w></span><span class=n>mysql</span><span class=o>&gt;</span><span class=w> </span><span class=k>show</span><span class=w> </span><span class=k>global</span><span class=w> </span><span class=n>variables</span><span class=w> </span><span class=k>like</span><span class=w> </span><span class=s1>&#39;%ssl%&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=w></span><span class=o>+</span><span class=c1>---------------+-----------------+
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=c1></span><span class=o>|</span><span class=w> </span><span class=n>Variable_name</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=n>Value</span><span class=w>           </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=w></span><span class=o>+</span><span class=c1>---------------+-----------------+
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=c1></span><span class=o>|</span><span class=w> </span><span class=n>have_openssl</span><span class=w>  </span><span class=o>|</span><span class=w> </span><span class=n>YES</span><span class=w>             </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>have_ssl</span><span class=w>      </span><span class=o>|</span><span class=w> </span><span class=n>YES</span><span class=w>             </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>ssl_ca</span><span class=w>        </span><span class=o>|</span><span class=w> </span><span class=n>ca</span><span class=p>.</span><span class=n>pem</span><span class=w>          </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=ln>11</span><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>ssl_capath</span><span class=w>    </span><span class=o>|</span><span class=w>                 </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=ln>12</span><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>ssl_cert</span><span class=w>      </span><span class=o>|</span><span class=w> </span><span class=n>server</span><span class=o>-</span><span class=n>cert</span><span class=p>.</span><span class=n>pem</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=ln>13</span><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>ssl_cipher</span><span class=w>    </span><span class=o>|</span><span class=w>                 </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=ln>14</span><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>ssl_crl</span><span class=w>       </span><span class=o>|</span><span class=w>                 </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=ln>15</span><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>ssl_crlpath</span><span class=w>   </span><span class=o>|</span><span class=w>                 </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=ln>16</span><span class=cl><span class=w></span><span class=o>|</span><span class=w> </span><span class=n>ssl_key</span><span class=w>       </span><span class=o>|</span><span class=w> </span><span class=n>server</span><span class=o>-</span><span class=k>key</span><span class=p>.</span><span class=n>pem</span><span class=w>  </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=ln>17</span><span class=cl><span class=w></span><span class=o>+</span><span class=c1>---------------+-----------------+
</span></span></span><span class=line><span class=ln>18</span><span class=cl><span class=c1></span><span class=mi>9</span><span class=w> </span><span class=k>rows</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=k>set</span><span class=w> </span><span class=p>(</span><span class=mi>0</span><span class=p>.</span><span class=mi>00</span><span class=w> </span><span class=n>sec</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=ln>19</span><span class=cl><span class=w></span><span class=o>#</span><span class=n>have_ssl</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>YES</span><span class=err>，</span><span class=w> </span><span class=err>说明</span><span class=n>ssl已经启用</span><span class=w>
</span></span></span><span class=line><span class=ln>20</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln>21</span><span class=cl><span class=w></span><span class=o>#</span><span class=err>查看当前用户的连接信息</span><span class=w>
</span></span></span><span class=line><span class=ln>22</span><span class=cl><span class=w></span><span class=n>mysql</span><span class=o>&gt;</span><span class=w> </span><span class=err>\</span><span class=n>s</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>23</span><span class=cl><span class=w></span><span class=c1>--------------
</span></span></span><span class=line><span class=ln>24</span><span class=cl><span class=c1></span><span class=n>mysql</span><span class=w>  </span><span class=n>Ver</span><span class=w> </span><span class=mi>14</span><span class=p>.</span><span class=mi>14</span><span class=w> </span><span class=n>Distrib</span><span class=w> </span><span class=mi>5</span><span class=p>.</span><span class=mi>7</span><span class=p>.</span><span class=mi>28</span><span class=err>，</span><span class=w> </span><span class=k>for</span><span class=w> </span><span class=n>Linux</span><span class=w> </span><span class=p>(</span><span class=n>x86_64</span><span class=p>)</span><span class=w> </span><span class=k>using</span><span class=w>  </span><span class=n>EditLine</span><span class=w> </span><span class=n>wrapper</span><span class=w>
</span></span></span><span class=line><span class=ln>25</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln>26</span><span class=cl><span class=w></span><span class=k>Connection</span><span class=w> </span><span class=n>id</span><span class=p>:</span><span class=w>		</span><span class=mi>157</span><span class=w>
</span></span></span><span class=line><span class=ln>27</span><span class=cl><span class=w></span><span class=k>Current</span><span class=w> </span><span class=k>database</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>28</span><span class=cl><span class=w></span><span class=k>Current</span><span class=w> </span><span class=k>user</span><span class=p>:</span><span class=w>		</span><span class=n>root</span><span class=o>@</span><span class=n>localhost</span><span class=w>
</span></span></span><span class=line><span class=ln>29</span><span class=cl><span class=w></span><span class=n>SSL</span><span class=p>:</span><span class=w>			</span><span class=k>Not</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=n>use</span><span class=w>
</span></span></span><span class=line><span class=ln>30</span><span class=cl><span class=w></span><span class=k>Current</span><span class=w> </span><span class=n>pager</span><span class=p>:</span><span class=w>		</span><span class=k>stdout</span><span class=w>
</span></span></span><span class=line><span class=ln>31</span><span class=cl><span class=w></span><span class=k>Using</span><span class=w> </span><span class=n>outfile</span><span class=p>:</span><span class=w>		</span><span class=s1>&#39;&#39;</span><span class=w>
</span></span></span><span class=line><span class=ln>32</span><span class=cl><span class=w></span><span class=k>Using</span><span class=w> </span><span class=k>delimiter</span><span class=p>:</span><span class=w>	</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>33</span><span class=cl><span class=w></span><span class=n>Server</span><span class=w> </span><span class=k>version</span><span class=p>:</span><span class=w>		</span><span class=mi>5</span><span class=p>.</span><span class=mi>7</span><span class=p>.</span><span class=mi>28</span><span class=w> </span><span class=n>MySQL</span><span class=w> </span><span class=n>Community</span><span class=w> </span><span class=n>Server</span><span class=w> </span><span class=p>(</span><span class=n>GPL</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=ln>34</span><span class=cl><span class=w></span><span class=n>Protocol</span><span class=w> </span><span class=k>version</span><span class=p>:</span><span class=w>	</span><span class=mi>10</span><span class=w>
</span></span></span><span class=line><span class=ln>35</span><span class=cl><span class=w></span><span class=k>Connection</span><span class=p>:</span><span class=w>		</span><span class=n>Localhost</span><span class=w> </span><span class=n>via</span><span class=w> </span><span class=n>UNIX</span><span class=w> </span><span class=n>socket</span><span class=w>
</span></span></span><span class=line><span class=ln>36</span><span class=cl><span class=w></span><span class=n>Server</span><span class=w> </span><span class=n>characterset</span><span class=p>:</span><span class=w>	</span><span class=n>utf8</span><span class=w>
</span></span></span><span class=line><span class=ln>37</span><span class=cl><span class=w></span><span class=n>Db</span><span class=w>     </span><span class=n>characterset</span><span class=p>:</span><span class=w>	</span><span class=n>utf8</span><span class=w>
</span></span></span><span class=line><span class=ln>38</span><span class=cl><span class=w></span><span class=n>Client</span><span class=w> </span><span class=n>characterset</span><span class=p>:</span><span class=w>	</span><span class=n>utf8</span><span class=w>
</span></span></span><span class=line><span class=ln>39</span><span class=cl><span class=w></span><span class=n>Conn</span><span class=p>.</span><span class=w>  </span><span class=n>characterset</span><span class=p>:</span><span class=w>	</span><span class=n>utf8</span><span class=w>
</span></span></span><span class=line><span class=ln>40</span><span class=cl><span class=w></span><span class=n>UNIX</span><span class=w> </span><span class=n>socket</span><span class=p>:</span><span class=w>		</span><span class=o>/</span><span class=n>var</span><span class=o>/</span><span class=n>lib</span><span class=o>/</span><span class=n>mysql</span><span class=o>/</span><span class=n>mysql</span><span class=p>.</span><span class=n>sock</span><span class=w>
</span></span></span><span class=line><span class=ln>41</span><span class=cl><span class=w></span><span class=n>Uptime</span><span class=p>:</span><span class=w>			</span><span class=mi>23</span><span class=w> </span><span class=n>hours</span><span class=w> </span><span class=mi>21</span><span class=w> </span><span class=k>min</span><span class=w> </span><span class=mi>57</span><span class=w> </span><span class=n>sec</span><span class=w>
</span></span></span><span class=line><span class=ln>42</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln>43</span><span class=cl><span class=w></span><span class=n>Threads</span><span class=p>:</span><span class=w> </span><span class=mi>5</span><span class=w>  </span><span class=n>Questions</span><span class=p>:</span><span class=w> </span><span class=mi>10325</span><span class=w>  </span><span class=n>Slow</span><span class=w> </span><span class=n>queries</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=w>  </span><span class=n>Opens</span><span class=p>:</span><span class=w> </span><span class=mi>5061</span><span class=w>  </span><span class=n>Flush</span><span class=w> </span><span class=n>tables</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=w>  </span><span class=k>Open</span><span class=w> </span><span class=n>tables</span><span class=p>:</span><span class=w> </span><span class=mi>1543</span><span class=w>  </span><span class=n>Queries</span><span class=w> </span><span class=n>per</span><span class=w> </span><span class=k>second</span><span class=w> </span><span class=k>avg</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>.</span><span class=mi>122</span><span class=w>
</span></span></span><span class=line><span class=ln>44</span><span class=cl><span class=w></span><span class=c1>--------------
</span></span></span><span class=line><span class=ln>45</span><span class=cl><span class=c1></span><span class=w>
</span></span></span><span class=line><span class=ln>46</span><span class=cl><span class=w></span><span class=n>ERROR</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>47</span><span class=cl><span class=w></span><span class=k>No</span><span class=w> </span><span class=n>query</span><span class=w> </span><span class=n>specified</span><span class=w>
</span></span></span><span class=line><span class=ln>48</span><span class=cl><span class=w></span><span class=o>#</span><span class=n>SSL</span><span class=o>=</span><span class=k>Not</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=n>use</span><span class=w> </span><span class=err>说明没有使用</span><span class=n>ssl连接</span><span class=w>
</span></span></span></code></pre></div><p>结果显示， mysql 5.7.28已经启用了ssl，并且可以不使用ssl登录</p><p>根据上面的错误， jdbc连接错误的原因是由于<em>证书错误</em>， 做个测试:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=ln>1</span><span class=cl><span class=o>[</span>root@iZbp17pma26sz5vqqwb1v3Z ~<span class=o>]</span><span class=c1># mysql -u root -p --ssl-ca=</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>Enter password:
</span></span><span class=line><span class=ln>3</span><span class=cl>ERROR <span class=m>2026</span> <span class=o>(</span>HY000<span class=o>)</span>: SSL connection error: SSL_CTX_set_default_verify_paths failed
</span></span></code></pre></div><p>当使用SSL登录而不指定证书的时候我们无法登录</p><blockquote><p>如果你的mysql没有开启SSL，当使用<code>mysql -u root -p --ssl</code>登录的时候，会得到如下错误:
<code>ERROR 2026(HY000): SSL connection error: SSL is required but the server doesn't support it</code></p></blockquote><h2 id=配置ssl安全连接>配置SSL安全连接
<a class=anchor href=#%e9%85%8d%e7%bd%aessl%e5%ae%89%e5%85%a8%e8%bf%9e%e6%8e%a5>#</a></h2><p>那么， mysql的证书在哪里? 可能根据安装方式不同， 配置文件路径不一样， 使用yum源安装mysql时，实际上可以在<code>var/lib/mysql</code>里找到mysql的证书文件:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=ln>1</span><span class=cl><span class=o>[</span>root@sample ~<span class=o>]</span><span class=c1># ll /var/lib/mysql/*.pem</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>-rw------- <span class=m>1</span> mysql mysql <span class=m>1676</span> Oct <span class=m>15</span> 15:08 /var/lib/mysql/ca-key.pem
</span></span><span class=line><span class=ln>3</span><span class=cl>-rw-r--r-- <span class=m>1</span> mysql mysql <span class=m>1112</span> Oct <span class=m>15</span> 15:08 /var/lib/mysql/ca.pem
</span></span><span class=line><span class=ln>4</span><span class=cl>-rw-r--r-- <span class=m>1</span> mysql mysql <span class=m>1112</span> Oct <span class=m>15</span> 15:08 /var/lib/mysql/client-cert.pem
</span></span><span class=line><span class=ln>5</span><span class=cl>-rw------- <span class=m>1</span> mysql mysql <span class=m>1680</span> Oct <span class=m>15</span> 15:08 /var/lib/mysql/client-key.pem
</span></span><span class=line><span class=ln>6</span><span class=cl>-rw------- <span class=m>1</span> mysql mysql <span class=m>1680</span> Oct <span class=m>15</span> 15:08 /var/lib/mysql/private_key.pem
</span></span><span class=line><span class=ln>7</span><span class=cl>-rw-r--r-- <span class=m>1</span> mysql mysql  <span class=m>452</span> Oct <span class=m>15</span> 15:08 /var/lib/mysql/public_key.pem
</span></span><span class=line><span class=ln>8</span><span class=cl>-rw-r--r-- <span class=m>1</span> mysql mysql <span class=m>1112</span> Oct <span class=m>15</span> 15:08 /var/lib/mysql/server-cert.pem
</span></span><span class=line><span class=ln>9</span><span class=cl>-rw------- <span class=m>1</span> mysql mysql <span class=m>1680</span> Oct <span class=m>15</span> 15:08 /var/lib/mysql/server-key.pem
</span></span></code></pre></div><p>我们指定证书试试看:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=ln>1</span><span class=cl><span class=o>[</span>root@sample ~<span class=o>]</span><span class=c1># mysql -u root -p --ssl-ca=/var/lib/mysql/ca.pem</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>Enter password:
</span></span><span class=line><span class=ln>3</span><span class=cl>Welcome to the MySQL monitor.  Commands end with <span class=p>;</span> or <span class=se>\g</span>.
</span></span><span class=line><span class=ln>4</span><span class=cl>Your MySQL connection id is <span class=m>161</span>
</span></span><span class=line><span class=ln>5</span><span class=cl>Server version: 5.7.28 MySQL Community Server <span class=o>(</span>GPL<span class=o>)</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=ln> 1</span><span class=cl><span class=n>mysql</span><span class=o>&gt;</span><span class=w> </span><span class=err>\</span><span class=n>s</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=w></span><span class=c1>--------------
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=c1></span><span class=n>mysql</span><span class=w>  </span><span class=n>Ver</span><span class=w> </span><span class=mi>14</span><span class=p>.</span><span class=mi>14</span><span class=w> </span><span class=n>Distrib</span><span class=w> </span><span class=mi>5</span><span class=p>.</span><span class=mi>7</span><span class=p>.</span><span class=mi>28</span><span class=err>，</span><span class=w> </span><span class=k>for</span><span class=w> </span><span class=n>Linux</span><span class=w> </span><span class=p>(</span><span class=n>x86_64</span><span class=p>)</span><span class=w> </span><span class=k>using</span><span class=w>  </span><span class=n>EditLine</span><span class=w> </span><span class=n>wrapper</span><span class=w>
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=w></span><span class=k>Connection</span><span class=w> </span><span class=n>id</span><span class=p>:</span><span class=w>		</span><span class=mi>161</span><span class=w>
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=w></span><span class=k>Current</span><span class=w> </span><span class=k>database</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=w></span><span class=k>Current</span><span class=w> </span><span class=k>user</span><span class=p>:</span><span class=w>		</span><span class=n>root</span><span class=o>@</span><span class=n>localhost</span><span class=w>
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=w></span><span class=o>**</span><span class=n>SSL</span><span class=p>:</span><span class=w>			</span><span class=n>Cipher</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=n>use</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=n>ECDHE</span><span class=o>-</span><span class=n>RSA</span><span class=o>-</span><span class=n>AES128</span><span class=o>-</span><span class=n>GCM</span><span class=o>-</span><span class=n>SHA256</span><span class=o>**</span><span class=w>
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=w></span><span class=k>Current</span><span class=w> </span><span class=n>pager</span><span class=p>:</span><span class=w>		</span><span class=k>stdout</span><span class=w>
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=w></span><span class=k>Using</span><span class=w> </span><span class=n>outfile</span><span class=p>:</span><span class=w>		</span><span class=s1>&#39;&#39;</span><span class=w>
</span></span></span><span class=line><span class=ln>11</span><span class=cl><span class=w></span><span class=k>Using</span><span class=w> </span><span class=k>delimiter</span><span class=p>:</span><span class=w>	</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>12</span><span class=cl><span class=w></span><span class=n>Server</span><span class=w> </span><span class=k>version</span><span class=p>:</span><span class=w>		</span><span class=mi>5</span><span class=p>.</span><span class=mi>7</span><span class=p>.</span><span class=mi>28</span><span class=w> </span><span class=n>MySQL</span><span class=w> </span><span class=n>Community</span><span class=w> </span><span class=n>Server</span><span class=w> </span><span class=p>(</span><span class=n>GPL</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=ln>13</span><span class=cl><span class=w></span><span class=n>Protocol</span><span class=w> </span><span class=k>version</span><span class=p>:</span><span class=w>	</span><span class=mi>10</span><span class=w>
</span></span></span><span class=line><span class=ln>14</span><span class=cl><span class=w></span><span class=k>Connection</span><span class=p>:</span><span class=w>		</span><span class=n>Localhost</span><span class=w> </span><span class=n>via</span><span class=w> </span><span class=n>UNIX</span><span class=w> </span><span class=n>socket</span><span class=w>
</span></span></span><span class=line><span class=ln>15</span><span class=cl><span class=w></span><span class=n>Server</span><span class=w> </span><span class=n>characterset</span><span class=p>:</span><span class=w>	</span><span class=n>utf8</span><span class=w>
</span></span></span><span class=line><span class=ln>16</span><span class=cl><span class=w></span><span class=n>Db</span><span class=w>     </span><span class=n>characterset</span><span class=p>:</span><span class=w>	</span><span class=n>utf8</span><span class=w>
</span></span></span><span class=line><span class=ln>17</span><span class=cl><span class=w></span><span class=n>Client</span><span class=w> </span><span class=n>characterset</span><span class=p>:</span><span class=w>	</span><span class=n>utf8</span><span class=w>
</span></span></span><span class=line><span class=ln>18</span><span class=cl><span class=w></span><span class=n>Conn</span><span class=p>.</span><span class=w>  </span><span class=n>characterset</span><span class=p>:</span><span class=w>	</span><span class=n>utf8</span><span class=w>
</span></span></span><span class=line><span class=ln>19</span><span class=cl><span class=w></span><span class=n>UNIX</span><span class=w> </span><span class=n>socket</span><span class=p>:</span><span class=w>		</span><span class=o>/</span><span class=n>var</span><span class=o>/</span><span class=n>lib</span><span class=o>/</span><span class=n>mysql</span><span class=o>/</span><span class=n>mysql</span><span class=p>.</span><span class=n>sock</span><span class=w>
</span></span></span><span class=line><span class=ln>20</span><span class=cl><span class=w></span><span class=n>Uptime</span><span class=p>:</span><span class=w>			</span><span class=mi>1</span><span class=w> </span><span class=k>day</span><span class=w> </span><span class=mi>14</span><span class=w> </span><span class=k>min</span><span class=w> </span><span class=mi>19</span><span class=w> </span><span class=n>sec</span><span class=w>
</span></span></span><span class=line><span class=ln>21</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln>22</span><span class=cl><span class=w></span><span class=n>Threads</span><span class=p>:</span><span class=w> </span><span class=mi>3</span><span class=w>  </span><span class=n>Questions</span><span class=p>:</span><span class=w> </span><span class=mi>10335</span><span class=w>  </span><span class=n>Slow</span><span class=w> </span><span class=n>queries</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=w>  </span><span class=n>Opens</span><span class=p>:</span><span class=w> </span><span class=mi>5061</span><span class=w>  </span><span class=n>Flush</span><span class=w> </span><span class=n>tables</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=w>  </span><span class=k>Open</span><span class=w> </span><span class=n>tables</span><span class=p>:</span><span class=w> </span><span class=mi>1543</span><span class=w>  </span><span class=n>Queries</span><span class=w> </span><span class=n>per</span><span class=w> </span><span class=k>second</span><span class=w> </span><span class=k>avg</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>.</span><span class=mi>118</span><span class=w>
</span></span></span><span class=line><span class=ln>23</span><span class=cl><span class=w></span><span class=c1>--------------
</span></span></span><span class=line><span class=ln>24</span><span class=cl><span class=c1></span><span class=w>
</span></span></span><span class=line><span class=ln>25</span><span class=cl><span class=w></span><span class=n>ERROR</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>26</span><span class=cl><span class=w></span><span class=k>No</span><span class=w> </span><span class=n>query</span><span class=w> </span><span class=n>specified</span><span class=w>
</span></span></span></code></pre></div><p>可以看到， 连接信息的SSL信息变成了<code>Cipher in use is ECDHE-RSA-AES128-GCM-SHA256</code>， 说明mysql可以使用SSL登录</p><p>关于mysql ssl证书的生成，参考
<a href=https://dev.mysql.com/doc/refman/5.6/en/creating-ssl-files-using-openssl.html>creating-ssl-files-using-openssl</a></p><p>既然可以指定证书使用SSL， jdbc为什么报错?</p><p><code>/etc/my.cnf</code>里没有ssl配置?</p><p>如何使用SSL连接，参考
<a href=https://dev.mysql.com/doc/refman/5.6/en/using-encrypted-connections.html>Use Encrypted Connections</a></p><p>在<code>/etc/my.cnf</code>中添加</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-properties data-lang=properties><span class=line><span class=ln>1</span><span class=cl><span class=err>[mysqld]</span>
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=na>ssl-ca</span><span class=o>=</span><span class=s>ca.pem</span>
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=na>ssl-cert</span><span class=o>=</span><span class=s>server-cert.pem</span>
</span></span><span class=line><span class=ln>4</span><span class=cl><span class=na>ssl-key</span><span class=o>=</span><span class=s>server-key.pem</span>
</span></span></code></pre></div><p>使用<code>service mysqld restart</code>重启mysql server， 让后看看服务端ssl配置是否生效:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=ln> 1</span><span class=cl><span class=o>[</span>root@sample ~<span class=o>]</span><span class=c1># service mysqld restart</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>Redirecting to /bin/systemctl restart mysqld.service
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=o>[</span>root@sample ~<span class=o>]</span><span class=c1># mysql -u root -p --ssl</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>WARNING: --ssl is deprecated and will be removed in a future version. Use --ssl-mode instead.
</span></span><span class=line><span class=ln> 5</span><span class=cl>Enter password:
</span></span><span class=line><span class=ln> 6</span><span class=cl>Welcome to the MySQL monitor.  Commands end with <span class=p>;</span> or <span class=se>\g</span>.
</span></span><span class=line><span class=ln> 7</span><span class=cl>Your MySQL connection id is <span class=m>2</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>Server version: 5.7.28 MySQL Community Server <span class=o>(</span>GPL<span class=o>)</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>mysql&gt; <span class=se>\s</span><span class=p>;</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>--------------
</span></span><span class=line><span class=ln>11</span><span class=cl>mysql  Ver 14.14 Distrib 5.7.28， <span class=k>for</span> Linux <span class=o>(</span>x86_64<span class=o>)</span> using  EditLine wrapper
</span></span><span class=line><span class=ln>12</span><span class=cl>
</span></span><span class=line><span class=ln>13</span><span class=cl>Connection id:		<span class=m>2</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>Current database:
</span></span><span class=line><span class=ln>15</span><span class=cl>Current user:		root@localhost
</span></span><span class=line><span class=ln>16</span><span class=cl>SSL:			Cipher in use is ECDHE-RSA-AES128-GCM-SHA256
</span></span><span class=line><span class=ln>17</span><span class=cl>Current pager:		stdout
</span></span><span class=line><span class=ln>18</span><span class=cl>Using outfile:		<span class=s1>&#39;&#39;</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>Using delimiter:	<span class=p>;</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>Server version:		5.7.28 MySQL Community Server <span class=o>(</span>GPL<span class=o>)</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>Protocol version:	<span class=m>10</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>Connection:		Localhost via UNIX socket
</span></span><span class=line><span class=ln>23</span><span class=cl>Server characterset:	utf8
</span></span><span class=line><span class=ln>24</span><span class=cl>Db     characterset:	utf8
</span></span><span class=line><span class=ln>25</span><span class=cl>Client characterset:	utf8
</span></span><span class=line><span class=ln>26</span><span class=cl>Conn.  characterset:	utf8
</span></span><span class=line><span class=ln>27</span><span class=cl>UNIX socket:		/var/lib/mysql/mysql.sock
</span></span><span class=line><span class=ln>28</span><span class=cl>Uptime:			<span class=m>12</span> sec
</span></span><span class=line><span class=ln>29</span><span class=cl>
</span></span><span class=line><span class=ln>30</span><span class=cl>Threads: <span class=m>1</span>  Questions: <span class=m>5</span>  Slow queries: <span class=m>0</span>  Opens: <span class=m>105</span>  Flush tables: <span class=m>1</span>  Open tables: <span class=m>98</span>  Queries per second avg: 0.416
</span></span><span class=line><span class=ln>31</span><span class=cl><span class=se>\-</span>-------------
</span></span></code></pre></div><p>看到，我们使用ssl登录mysql，这一次并没有指定证书，而mysql连接成功，说明mysql服务端ssl配置成功了</p><p>事实上，做到此步后，jdbc里使用</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=ln>1</span><span class=cl>jdbc:mysql://47.110.226.247:3306/hcfuture_bundule?useUnicode=true<span class=err>&amp;</span>characterEncoding=UTF-8<span class=err>&amp;</span>zeroDateTimeBehavior=convertToNull<span class=err>&amp;</span>useSSL=true
</span></span></code></pre></div><p>这样的数据库url仍然得到同样的错误；个人认为是由于当客户端设置<code>useSSL=true</code>时，同样需要配置客户端的SSL证书信息</p><p>如何在客户端使用SSL，可以参考
<a href=https://dev.mysql.com/doc/connector-j/5.1/en/connector-j-reference-using-ssl.html>connector-j-reference-using-ssl</a></p><p>以下内容摘自(
<a href=https://www.sojpt.com/feedback/5723%29>https://www.sojpt.com/feedback/5723)</a>:</p><blockquote><p>首先mysql服务端要支持ssl，支持ssl需要以下条件：</p><ol><li><p>创建ssl证书和密钥--生成ca.pem server-cert.pem client-cert.pem 文件
mysql提供两种方式
一种方式用openssl编译的mysql版本可以在启动时生成（参考链接：https://dev.mysql.com/doc/refman/5.7/en/creating-ssl-rsa-files-using-mysql.html）；
第二种方式用openssl生成（采用的方式），（参考链接：https://dev.mysql.com/doc/refman/5.7/en/creating-ssl-files-using-openssl.html）</p></li><li><p>配置服务器支持（参考链接：https://dev.mysql.com/doc/refman/5.7/en/using-encrypted-connections.html）
主要时需要在my.cnf中需要添加以下配置，文件路径自行修改；还可以指定某个用户必须使用ssl链接等，详情参考官方的链接</p></li></ol><pre tabindex=0><code>[mysqld]
ssl-ca=ca.pem
ssl-cert=server-cert.pem
ssl-key=server-key.pem
require_secure_transport=ON
</code></pre><p>客户端链接需要以下几个步骤</p><ol><li>需要将服务端的pem证书转换成java支持的JKS证书，得到keystore.jks和truststore.jks：
参考链接1：（可用）https://biteeniu.github.io/ssl/convert_pem_to_jks/
参考链接2：（官方但连不上不知道什么原因）https://dev.mysql.com/doc/connector-j/5.1/en/connector-j-reference-using-ssl.html</li><li>修改mysql链接，指定链接方式为ssl
jdbc:mysql://127.0.0.1:3306/test?useUnicode=true&amp;characterEncoding=utf-8&amp;verifyServerCertificate=true&amp;useSSL=true&amp;requireSSL=true</li><li>加载生成的jks证书和密码到系统属性，要在ActiveRecordPlugin之前
// keystore.jks和truststore.jks所在的路径，及创建时的密码
System.setProperty("javax.net.ssl.keyStore"， "path/keystore.jks");
System.setProperty("javax.net.ssl.keyStorePassword"， "password");
System.setProperty("javax.net.ssl.trustStore"，"path/truststore.jks");
System.setProperty("javax.net.ssl.trustStorePassword"， "password");</li></ol></blockquote><p>实在是很繁琐，不过我估计此法是可行的，实际上是配置客户端的certificate，我嫌繁琐并没有尝试</p><p>实际上，我在官方文档里看到了此段话:</p><blockquote><p>By default， Connector/J establishes secure connections with the MySQL servers. Note that MySQL servers 5.7 and 8.0， when compiled with OpenSSL， can automatically generate missing SSL files at startup and configure the SSL connection accordingly.</p><p>As long as the server is correctly configured to use SSL， there is no need to configure anything on the Connector/J client to use encrypted connections (the exception is when Connector/J is connecting to very old server versions like 5.6.25 and earlier or 5.7.5 and earlier， in which case the client must set the connection property useSSL=true in order to use encrypted connections). The client can demand SSL to be used by setting the connection property requireSSL=true; the connection then fails if the server is not configured to use SSL. Without requireSSL=true， the connection just falls back to non-encrypted mode if the server is not configured to use SSL.</p></blockquote><p>实际上，此前我们mysql server的SSL已经成功配置，已经验证通过<code>mysql -u test -p -h your serverip</code>远程登录mysql后，通过<code>status</code>查看连接信息可以看到是通过SSL连接的</p><p>结合此段声明， mysql 5.7以后的连接是加密的(需要服务端开启SSL)，故无需费时在客户端进行ssl配置(特殊需求除外)</p><p>如果想使用jdbc连接配置SSL， 而不使用编码方式，可以参考
<a href=https://dev.mysql.com/doc/connector-j/5.1/en/connector-j-reference-configuration-properties.html>connector-j-reference-configuration-properties</a></p></article><div class=next-prev><hr><div class="page-navi flex" id=pagenavi><div class=pre-page-none>←∅</div><div class=next-page><a href=https://wangy325.github.io/zh-cn/docs/craft/db/sql/2_MySQL%E7%9A%84%E5%87%A0%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0/>MySQL字符串处理函数</a> →</div></div></div><section class=related><div class=rel-title>相似文章</div><div class=rel-items><a href=/zh-cn/posts/3_%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84SQL%E4%BC%98%E5%8C%96%E7%9A%84%E4%BE%8B%E5%AD%90/ class=related__link><div>一个简单的sql优化示例</div></a><a href=/zh-cn/docs/craft/db/sql/2_MySQL%E7%9A%84%E5%87%A0%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0/ class=related__link><div>MySQL字符串处理函数</div></a></div><hr></section><div class=book-comments><div class=giscus-thread></div><script src=https://giscus.app/client.js data-repo=wangy325/wangy325.github.io data-repo-id=R_kgDOHhhDZg data-category=Announcements data-category-id=DIC_kwDOHhhDZs4ChbMn data-mapping=og:title data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=noborder_light data-loading=lazy data-lang=zh-CN crossorigin=anonymous async></script></div><div class=copyright><hr class=cline><p>Notes and Memos by wangy325
<a href=https://creativecommons.org/licenses/by/4.0/deed.en title="Creative Commons Attribution">&copy; CC BY 4.0</a></p><p>2019-2024. Powered by
<a href=https://github.com/alex-shpak/hugo-book>Hugo Book</a>
Presented by Github.</p></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><div id=toc-new><ul class=nav><li class=nav-item><a id=t安装MySQL href=javascript:void(0) onclick='return scrolly("安装mysql"),!1'>安装MySQL</a></li><li class=nav-item><a id=t配置 href=javascript:void(0) onclick='return scrolly("配置"),!1'>配置</a></li><li class=nav-item><a id=t账户与权限 href=javascript:void(0) onclick='return scrolly("账户与权限"),!1'>账户与权限</a><ul class=nav><li class=nav-item><a id=t账户 href=javascript:void(0) onclick='return scrolly("账户"),!1'>账户</a></li><li class=nav-item><a id=t权限 href=javascript:void(0) onclick='return scrolly("权限"),!1'>权限</a><ul class=nav><li class=nav-item><a id=t给用户授予权限 href=javascript:void(0) onclick='return scrolly("给用户授予权限"),!1'>给用户授予权限</a></li></ul></li></ul></li><li class=nav-item><a id=t数据备份与导入 href=javascript:void(0) onclick='return scrolly("数据备份与导入"),!1'>数据备份与导入</a></li><li class=nav-item><a id=t使用SSL加密连接 href=javascript:void(0) onclick='return scrolly("使用ssl加密连接"),!1'>使用SSL加密连接</a><ul class=nav><li class=nav-item><a id=t查看mysqlSSL状态信息 href=javascript:void(0) onclick='return scrolly("查看mysql-ssl状态信息"),!1'>查看mysql SSL状态信息</a></li><li class=nav-item><a id=t配置SSL安全连接 href=javascript:void(0) onclick='return scrolly("配置ssl安全连接"),!1'>配置SSL安全连接</a></li></ul></li></ul></div><script>function scrolly(e){const t=40;var n=document.getElementById(e).offsetTop;window.scrollTo({top:n+t,behaviour:"smooth"})}</script></div></aside></main><div class=back-to-top><div id=back-to-top><img src=/svg/chevrons-up.svg srcset="/svg/chevrons-up.svg 500w" onclick=topFunction() class=black>
<img title=回到顶部 src=/svg/chevrons-up-blue.svg srcset="/svg/chevrons-up-blue.svg 500w" onclick=topFunction() class=blue></div><script>let mybutton=document.getElementById("back-to-top");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>500||document.documentElement.scrollTop>500?mybutton.style.display="block":mybutton.style.display="none"}function topFunction(){window.scrollTo({top:0,behavior:"smooth"})}</script></div><script src=/js/scroll-listening.js></script></body></html>