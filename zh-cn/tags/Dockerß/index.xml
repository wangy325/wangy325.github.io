<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Dockerß on Endless River</title><link>https://wangy325.github.io/zh-cn/tags/Docker%C3%9F/</link><description>Recent content in Dockerß on Endless River</description><generator>Hugo</generator><language>zh-CN</language><lastBuildDate>Fri, 01 Nov 2024 17:32:10 +0800</lastBuildDate><atom:link href="https://wangy325.github.io/zh-cn/tags/Docker%C3%9F/index.xml" rel="self" type="application/rss+xml"/><item><title>Win11 WSL安装并使用docker</title><link>https://wangy325.github.io/zh-cn/posts/21_wsl-and-docker-engine/</link><pubDate>Thu, 31 Oct 2024 00:00:00 +0800</pubDate><guid>https://wangy325.github.io/zh-cn/posts/21_wsl-and-docker-engine/</guid><description>安装WSL Ubuntu遇到的错误 # 安装过程很简单，在microsoft store里直接安装，这里选择的版本是22.04.5 LTS，安装完成后，Windows Terminal会自动添加配置终端配置，直接打开即可。
不过，首次安装，很可能会遇到一些错误代码...
1. 0x8007019e # 该错误代码原因：未安装子系统支持。
管理员打开命令行，运行如下命令：
1Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux 按照提示，重启电脑。
2. 0x800701bc # 该错误代码原因：没有升级对应wsl2的内核。
下载插件( wsl_update_x64.msi)，安装后即可成功。
3. 0x80370102 # 该错误代码原因：没有开启虚拟化。
在控制面板--&amp;gt;程序和功能 --&amp;gt; 启用或关闭 windows 功能 中，找到虚拟机平台，勾选上安装并重启。
开启Windows的虚拟化功能
WSL配置走宿主代理 # 安装完成WSL后，默认配置下，网络是正常的。在docker拉取镜像的时候，发现连接超时。想到了可能需要走代理。
问题接着就出现了，WSL无法ping通宿主机~
首先需要解决这个问题。
在PowerShell和WSL分别运行ipconfg和ifconfig命令，查看宿主机和WSL的ip：
Windows宿主机的网络属性
WSL的网络属性
在宿主机中运行ping 172.18.32.24通， 在WSL中运行ping 172.18.32.1不通。发现是Win防火墙的配置问题：
使用管理员权限运行PowerShell运行
1New-NetFirewallRule -DisplayName &amp;#34;WSL&amp;#34; -Direction Inbound -InterfaceAlias &amp;#34;vEthernet (WSL)&amp;#34; -Action Allow 即可。
接下来，就是让WSL走宿主机代理。
由于WSL的ip和宿主机的ip都是动态的，所以使用export http-proxy ...的方式配置.bashrc文件，每次ip变化都需要手动再配置一遍，推荐使用脚本获取上述2个ip ，再执行命令配置。方法参考 WSL2 中访问宿主机 Windows 的代理。
配置完成后，在WSL中运行proxy set即可开启代理。</description></item></channel></rss>