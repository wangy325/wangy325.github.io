<!doctype html><html lang=zh-CN dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Docker Compose æ˜¯ä¸€ä¸ªç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨ Docker åº”ç”¨ç¨‹åºçš„å·¥å…·ã€‚ å®ƒå…è®¸æ‚¨å®šä¹‰ç»„æˆåº”ç”¨ç¨‹åºçš„æœåŠ¡ã€å®ƒä»¬è¿æ¥åˆ°çš„ç½‘ç»œä»¥åŠå®ƒä»¬è¿è¡Œæ‰€éœ€çš„ç¯å¢ƒå˜é‡ã€‚
ä½¿ç”¨ Docker Composeï¼Œå¯ä»¥åœ¨å®¹å™¨ä¸­é€šè¿‡å¤šç§æ–¹å¼è®¾ç½®ç¯å¢ƒå˜é‡ã€‚å¯ä»¥ä½¿ç”¨ Compose æ–‡ä»¶æˆ– CLIã€‚
è¯·æ³¨æ„ï¼Œæ¯ç§æ–¹æ³•éƒ½å—
  ç¯å¢ƒå˜é‡ä¼˜å…ˆçº§ çš„çº¦æŸã€‚"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://wangy325.github.io/zh-cn/posts/2024/20241130_5_ways_to_docker_compose_envs/"><meta property="og:site_name" content="xf&pl"><meta property="og:title" content="åœ¨Docker Composeé…ç½®ç¯å¢ƒå˜é‡çš„å‡ ç§æ–¹æ³•"><meta property="og:description" content="Docker Compose æ˜¯ä¸€ä¸ªç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨ Docker åº”ç”¨ç¨‹åºçš„å·¥å…·ã€‚ å®ƒå…è®¸æ‚¨å®šä¹‰ç»„æˆåº”ç”¨ç¨‹åºçš„æœåŠ¡ã€å®ƒä»¬è¿æ¥åˆ°çš„ç½‘ç»œä»¥åŠå®ƒä»¬è¿è¡Œæ‰€éœ€çš„ç¯å¢ƒå˜é‡ã€‚
ä½¿ç”¨ Docker Composeï¼Œå¯ä»¥åœ¨å®¹å™¨ä¸­é€šè¿‡å¤šç§æ–¹å¼è®¾ç½®ç¯å¢ƒå˜é‡ã€‚å¯ä»¥ä½¿ç”¨ Compose æ–‡ä»¶æˆ– CLIã€‚
è¯·æ³¨æ„ï¼Œæ¯ç§æ–¹æ³•éƒ½å— ç¯å¢ƒå˜é‡ä¼˜å…ˆçº§ çš„çº¦æŸã€‚"><meta property="og:locale" content="zh_CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-11-30T00:00:00+08:00"><meta property="article:modified_time" content="2025-02-25T18:38:02+08:00"><meta property="article:tag" content="Docker"><title>åœ¨Docker Composeé…ç½®ç¯å¢ƒå˜é‡çš„å‡ ç§æ–¹æ³• | xf&amp;pl</title>
<link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=https://wangy325.github.io/zh-cn/posts/2024/20241130_5_ways_to_docker_compose_envs/><link rel=stylesheet href=/book.min.21a480c3e6e72098579e2787d343e35263286cda9742462341e6aa278fbea46c.css integrity="sha256-IaSAw+bnIJhXnieH00PjUmMobNqXQkYjQeaqJ4++pGw=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/zh-cn.search.min.c2df43b03e7a9ae96b82634fe3204a8b52c807150e1a240387fa9731a83ccbf5.js integrity="sha256-wt9DsD56mulrgmNP4yBKi1LIBxUOGiQDh/qXMag8y/U=" crossorigin=anonymous></script><script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js integrity="sha256-b2+Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC+NdcPIvZhzk=" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-HHNKR5H8KN"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-HHNKR5H8KN")}</script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><div class=navi-bar id=navibar><div id=page-title><h2 class=book-brand><a class="flex align-center" href=/zh-cn/><span>xf&amp;pl</span></a></h2></div><div class=page-navi-col><nav><ul><li><a href=/zh-cn/docs/java/>Java</a></li><li><a href=/zh-cn/docs/design_pattern/>DP</a></li><li class=book-section-flat><a href=/zh-cn/docs/note/>Mooc</a></li><li class=book-section-flat><a href=/zh-cn/docs/snippets/>Snippets</a></li></ul><ul><li><a href=/zh-cn/posts/>Blog</a></li><li><a href=/zh-cn/archive/>Archive</a></li></ul></nav></div><div class="book-search hidden"><input type=text id=book-search-input placeholder=æœç´¢ aria-label=æœç´¢ maxlength=64 data-hotkeys=s/ required pattern=\S+.*>
<span class=clear_search><img src=/svg/close.svg onclick=clearInput()></span><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><script>function clearInput(){document.getElementById("book-search-input").value="";for(var e=document.getElementById("book-search-results");e.firstChild;)e.removeChild(e.firstChild)}</script><ul class=book-languages><li><a class="flex align-center"><img src=/svg/language.svg class=book-icon alt=Languages>
ç®€ä½“ä¸­æ–‡</a></label><ul><li><a href=https://wangy325.github.io/en/>English</a></li></ul></li></ul></div><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label><h3>åœ¨Docker Composeé…ç½®ç¯å¢ƒå˜é‡çš„å‡ ç§æ–¹æ³•</h3><label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><div id=toc-new><ul class=nav><li class=nav-item><a id=tComposeæ–‡ä»¶ href=javascript:void(0) onclick='return scrolly("compose-æ–‡ä»¶"),!1'>Compose æ–‡ä»¶</a><ul class=nav><li class=nav-item><a id=tç”¨envæ–‡ä»¶ä»£æ›¿ href=javascript:void(0) onclick='return scrolly("ç”¨-env-æ–‡ä»¶ä»£æ›¿"),!1'>ç”¨ .env æ–‡ä»¶ä»£æ›¿</a><ul class=nav><li class=nav-item><a id=tenvæ–‡ä»¶çš„è¡¥å……ä¿¡æ¯ href=javascript:void(0) onclick='return scrolly("envæ–‡ä»¶çš„è¡¥å……ä¿¡æ¯"),!1'>.envæ–‡ä»¶çš„è¡¥å……ä¿¡æ¯</a></li></ul></li><li class=nav-item><a id=tä½¿ç”¨environmentå±æ€§ href=javascript:void(0) onclick='return scrolly("ä½¿ç”¨-environment-å±æ€§"),!1'>ä½¿ç”¨ environment å±æ€§</a><ul class=nav><li class=nav-item><a id=tenvironmentå±æ€§çš„è¡¥å……ä¿¡æ¯ href=javascript:void(0) onclick='return scrolly("environmentå±æ€§çš„è¡¥å……ä¿¡æ¯"),!1'>environmentå±æ€§çš„è¡¥å……ä¿¡æ¯</a></li></ul></li><li class=nav-item><a id=tä½¿ç”¨env_fileå±æ€§ href=javascript:void(0) onclick='return scrolly("ä½¿ç”¨-env_file-å±æ€§"),!1'>ä½¿ç”¨ env_file å±æ€§</a><ul class=nav><li class=nav-item><a id=tenv_fileå±æ€§çš„è¡¥å……ä¿¡æ¯ href=javascript:void(0) onclick='return scrolly("env_fileå±æ€§çš„è¡¥å……ä¿¡æ¯"),!1'>env_fileå±æ€§çš„è¡¥å……ä¿¡æ¯</a></li></ul></li><li class=nav-item><a id=tä»shellä¸­æ›¿æ¢ href=javascript:void(0) onclick='return scrolly("ä»-shell-ä¸­æ›¿æ¢"),!1'>ä» shell ä¸­æ›¿æ¢</a></li></ul></li><li class=nav-item><a id=tCLI href=javascript:void(0) onclick='return scrolly("cli"),!1'>CLI</a><ul class=nav><li class=nav-item><a id=tç”¨â€“envfileæ›¿æ¢ href=javascript:void(0) onclick='return scrolly("ç”¨-â€“env-file-æ›¿æ¢"),!1'>ç”¨ â€“env-file æ›¿æ¢</a><ul class=nav><li class=nav-item><a id=tå‘½ä»¤è¡Œenvflieé€‰é¡¹çš„è¡¥å……äº‹é¡¹ href=javascript:void(0) onclick='return scrolly("å‘½ä»¤è¡Œ-env-flieé€‰é¡¹çš„è¡¥å……äº‹é¡¹"),!1'>å‘½ä»¤è¡Œ-env-flieé€‰é¡¹çš„è¡¥å……äº‹é¡¹</a></li></ul></li><li class=nav-item><a id=tä½¿ç”¨dockercomposerunâ€“envè®¾ç½®ç¯å¢ƒå˜é‡ href=javascript:void(0) onclick='return scrolly("ä½¿ç”¨-docker-compose-run-â€“env-è®¾ç½®ç¯å¢ƒå˜é‡"),!1'>ä½¿ç”¨ docker compose run â€“env è®¾ç½®ç¯å¢ƒå˜é‡</a></li></ul></li><li class=nav-item><a id=tå…¶ä»–èµ„æº href=javascript:void(0) onclick='return scrolly("å…¶ä»–èµ„æº"),!1'>å…¶ä»–èµ„æº</a></li><li class=nav-item><a id=tå‚è€ƒèµ„æ–™ href=javascript:void(0) onclick='return scrolly("å‚è€ƒèµ„æ–™"),!1'>å‚è€ƒèµ„æ–™</a></li></ul></div><script>function scrolly(e){const t=40;var n=document.getElementById(e).offsetTop;window.scrollTo({top:n+t,behaviour:"smooth"})}</script></aside></header><article class="markdown book-post"><h1>åœ¨Docker Composeé…ç½®ç¯å¢ƒå˜é‡çš„å‡ ç§æ–¹æ³•</h1><div class="postmeta flex align-cneter" style=justify-content:center><div class="created flex align-cneter"><img src=/svg/calendar-event.svg class=book-icon alt>
<a title='åˆ›å»ºè€… wangy325'>2024-11-30</a></div><div class="tags flex align-center"><img src=/svg/tag-alt.svg class=book-icon alt>
<a href=/zh-cn/tags/Docker/>Docker</a></div><div class="last-modified flex align center"><img src=/svg/edit.svg class=book-icon alt>
<a title='æœ€åä¿®æ”¹è€… wangy325-win | 2025-02-25'>2025-02-25</a></div></div><p>Docker Compose æ˜¯ä¸€ä¸ªç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨ Docker åº”ç”¨ç¨‹åºçš„å·¥å…·ã€‚ å®ƒå…è®¸æ‚¨å®šä¹‰ç»„æˆåº”ç”¨ç¨‹åºçš„æœåŠ¡ã€å®ƒä»¬è¿æ¥åˆ°çš„ç½‘ç»œä»¥åŠå®ƒä»¬è¿è¡Œæ‰€éœ€çš„ç¯å¢ƒå˜é‡ã€‚</p><p>ä½¿ç”¨ Docker Composeï¼Œå¯ä»¥åœ¨å®¹å™¨ä¸­é€šè¿‡å¤šç§æ–¹å¼è®¾ç½®ç¯å¢ƒå˜é‡ã€‚å¯ä»¥ä½¿ç”¨ Compose æ–‡ä»¶æˆ– CLIã€‚</p><p>è¯·æ³¨æ„ï¼Œæ¯ç§æ–¹æ³•éƒ½å—
<a href=https://docs.docker.com/compose/environment-variables/envvars-precedence/>ç¯å¢ƒå˜é‡ä¼˜å…ˆçº§</a> çš„çº¦æŸã€‚</p><blockquote class="book-hint info"><a class=hint-start>â€œ</a><p>ä¸è¦ä½¿ç”¨ç¯å¢ƒå˜é‡å‘å®¹å™¨ä¼ é€’æ•æ„Ÿä¿¡æ¯ï¼Œä¾‹å¦‚å¯†ç ã€‚æ”¹ç”¨ secretsã€‚</p></blockquote><h2 id=compose-æ–‡ä»¶>Compose æ–‡ä»¶
<a class=anchor href=#compose-%e6%96%87%e4%bb%b6>#</a></h2><h3 id=ç”¨-env-æ–‡ä»¶ä»£æ›¿>ç”¨ .env æ–‡ä»¶ä»£æ›¿
<a class=anchor href=#%e7%94%a8-env-%e6%96%87%e4%bb%b6%e4%bb%a3%e6%9b%bf>#</a></h3><p>Docker Compose ä¸­çš„ <code>.env</code> æ–‡ä»¶æ˜¯ä¸€ä¸ªçº¯æ–‡æœ¬æ–‡ä»¶ï¼Œç”¨äºå®šä¹‰å½“è¿è¡Œ <code>docker compose up</code> æ—¶åº”åœ¨ Docker å®¹å™¨ä¸­æä¾›å“ªäº›ç¯å¢ƒå˜é‡ã€‚æ­¤æ–‡ä»¶é€šå¸¸åŒ…å«ç¯å¢ƒå˜é‡çš„é”®å€¼å¯¹ï¼Œå¯ç”¨äºé›†ä¸­ç®¡ç†å„å¤„é…ç½®ã€‚å¦‚æœéœ€è¦å­˜å‚¨å¤šä¸ªç¯å¢ƒå˜é‡ï¼Œå¯ä»¥ä½¿ç”¨ <code>.env</code> æ–‡ä»¶ã€‚</p><p><code>.env</code>æ–‡ä»¶æ˜¯å®¹å™¨ä¸­è®¾ç½®ç¯å¢ƒå˜é‡çš„é»˜è®¤æ–¹æ³•ã€‚<code>.env</code> æ–‡ä»¶åº”ä¸ <code>compose.yaml</code> æ–‡ä»¶æ”¾åœ¨é¡¹ç›®ç›®å½•çš„æ ¹ç›®å½•ä¸‹ã€‚æœ‰å…³ç¯å¢ƒæ–‡ä»¶çš„æ ¼å¼åŒ–ï¼Œè¯·å‚é˜… ç¯å¢ƒæ–‡ä»¶è¯­æ³•ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=ln>1</span><span class=cl>$ cat .env
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=nv>TAG</span><span class=o>=</span>v1.5
</span></span><span class=line><span class=ln>3</span><span class=cl>
</span></span><span class=line><span class=ln>4</span><span class=cl>$ cat compose.yml
</span></span><span class=line><span class=ln>5</span><span class=cl>services:
</span></span><span class=line><span class=ln>6</span><span class=cl>  web:
</span></span><span class=line><span class=ln>7</span><span class=cl>   image: <span class=s2>&#34;webapp:</span><span class=si>${</span><span class=nv>TAG</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span></code></pre></div><p>è¿è¡Œ <code>docker compose up</code> æ—¶ï¼ŒCompose æ–‡ä»¶ä¸­å®šä¹‰çš„ web æœåŠ¡ä¼šå†…æ’ <code>.env</code> æ–‡ä»¶ä¸­è®¾ç½®çš„é•œåƒ<code>webapp:v1.5</code>ã€‚å¯ä»¥é€šè¿‡ <code>config</code> å‘½ä»¤ éªŒè¯è¿™ä¸€ç‚¹ï¼Œæ­¤å‘½ä»¤å°†å·²è§£æçš„åº”ç”¨ç¨‹åºé…ç½®æ‰“å°åˆ°ç»ˆç«¯ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=ln>1</span><span class=cl>$ docker compose config
</span></span><span class=line><span class=ln>2</span><span class=cl>
</span></span><span class=line><span class=ln>3</span><span class=cl>services:
</span></span><span class=line><span class=ln>4</span><span class=cl>  web:
</span></span><span class=line><span class=ln>5</span><span class=cl>   image: <span class=s1>&#39;webapp:v1.5&#39;</span>
</span></span></code></pre></div><h4 id=envæ–‡ä»¶çš„è¡¥å……ä¿¡æ¯>.envæ–‡ä»¶çš„è¡¥å……ä¿¡æ¯
<a class=anchor href=#env%e6%96%87%e4%bb%b6%e7%9a%84%e8%a1%a5%e5%85%85%e4%bf%a1%e6%81%af>#</a></h4><ol><li><p>åœ¨ Docker Compose ç‰ˆæœ¬ 2.24.0 ä¸­ï¼Œå¯ä»¥è®¾ç½® <code>.env</code> æ–‡ä»¶ä¸ºå¯é€‰ï¼Œæ–¹æ³•æ˜¯ä½¿ç”¨ <code>env_file</code> å±æ€§ã€‚å½“ <code>required</code> è®¾ç½®ä¸º <code>false</code> ä¸” <code>.env</code> æ–‡ä»¶ä¸¢å¤±æ—¶ï¼ŒCompose ä¼šé™é»˜å¿½ç•¥è¯¥æ¡ç›®ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=ln>1</span><span class=cl><span class=nt>env_file</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>2</span><span class=cl><span class=w>  </span>- <span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>./default.env</span><span class=w>
</span></span></span><span class=line><span class=ln>3</span><span class=cl><span class=w>    </span><span class=nt>required</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w> </span><span class=c># default</span><span class=w>
</span></span></span><span class=line><span class=ln>4</span><span class=cl><span class=w>  </span>- <span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>./override.env</span><span class=w>
</span></span></span><span class=line><span class=ln>5</span><span class=cl><span class=w>    </span><span class=nt>required</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span></code></pre></div></li><li><p>å¦‚æœåœ¨<code>.env</code>æ–‡ä»¶ä¸­å®šä¹‰äº†ç¯å¢ƒå˜é‡ï¼Œå¯ä»¥ä½¿ç”¨ <code>environment</code>
<a href=https://docs.docker.com/compose/compose-file/05-services/#environment>å±æ€§</a> åœ¨ <code>compose.yml</code> ä¸­ç›´æ¥å¼•ç”¨å®ƒã€‚</p><p>ä¾‹å¦‚ï¼Œ</p><p><code>.env</code> æ–‡ä»¶:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-env data-lang=env><span class=line><span class=ln>1</span><span class=cl><span class=nv>DEBUG</span><span class=o>=</span><span class=m>1</span>
</span></span></code></pre></div><p><code>compose.yml</code> æ–‡ä»¶ç±»åˆ™å¯ä»¥ç›´æ¥ä½¿ç”¨å ä½ç¬¦å¼•ç”¨<code>.env</code>æ–‡ä»¶ä¸­çš„å¼•ç”¨ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=ln>1</span><span class=cl><span class=nt>services</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>2</span><span class=cl><span class=w>  </span><span class=nt>webapp</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>3</span><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>my-webapp-image</span><span class=w>
</span></span></span><span class=line><span class=ln>4</span><span class=cl><span class=w>  </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>5</span><span class=cl><span class=w>    </span>- <span class=l>DEBUG=${DEBUG}</span><span class=w>
</span></span></span></code></pre></div><p>Docker Compose ä¼šç”¨ <code>.env</code> æ–‡ä»¶ä¸­çš„å€¼æ›¿æ¢ <code>${DEBUG}</code></p></li><li><p>å¯ä»¥ä½¿ç”¨ <code>env_file</code> å±æ€§ åœ¨ <code>compose.yml</code> ä¸­ä½¿ç”¨å¤šä¸ª <code>.env</code> æ–‡ä»¶ï¼ŒDocker Compose ä¼šæŒ‰æŒ‡å®šçš„é¡ºåºè¯»å–è¿™äº›æ–‡ä»¶ã€‚å¦‚æœåœ¨å¤šä¸ªæ–‡ä»¶ä¸­å®šä¹‰äº†ç›¸åŒçš„å˜é‡ï¼Œåˆ™æœ€åä¸€ä¸ªå®šä¹‰ä¼˜å…ˆï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=ln>1</span><span class=cl><span class=nt>services</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>2</span><span class=cl><span class=w></span><span class=nt>webapp</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>3</span><span class=cl><span class=w>  </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>my-webapp-image</span><span class=w>
</span></span></span><span class=line><span class=ln>4</span><span class=cl><span class=w>  </span><span class=nt>env_file</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>5</span><span class=cl><span class=w>  </span>- <span class=l>.env</span><span class=w>
</span></span></span><span class=line><span class=ln>6</span><span class=cl><span class=w>  </span>- <span class=l>.env.override</span><span class=w>
</span></span></span></code></pre></div></li><li><p>å¯ä»¥å°† <code>.env</code> æ–‡ä»¶æ”¾åœ¨é¡¹ç›®ç›®å½•çš„æ ¹ç›®å½•<strong>ä»¥å¤–çš„ä½ç½®</strong>ï¼Œç„¶åä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ä¹‹ä¸€ï¼Œä½¿ Compose èƒ½å¤Ÿæ‰¾åˆ°å®ƒï¼š</p><ul><li>CLI ä¸­çš„ <code>--env-file</code>
<a href=https://simi.studio/ways-to-set-environment-variables-with-docker-compose/#substitute-with---env-file>é€‰é¡¹</a></li><li>ä½¿ç”¨ Compose æ–‡ä»¶ä¸­çš„ <code>env_file</code>
<a href=https://docs.docker.com/compose/compose-file/05-services/#env_file>å±æ€§</a></li></ul></li><li><p>å¯ä»¥é€šè¿‡ä½¿ç”¨ <code>docker-compose up -e</code> ä»å‘½ä»¤è¡Œè¦†ç›– <code>.env</code> æ–‡ä»¶ä¸­çš„å€¼ã€‚</p></li><li><p>å¦‚æœä½¿ç”¨<code>--env-file</code> æ›¿æ¢å¦ä¸€ä¸ª <code>.env</code> æ–‡ä»¶ï¼Œåˆ™ <code>.env</code> æ–‡ä»¶ä¼šè¢«è¦†ç›–ã€‚</p></li></ol><blockquote class="book-hint warning"><a class=hint-start>â€œ</a><p>ä» <code>.env</code> æ–‡ä»¶è¿›è¡Œæ›¿æ¢æ˜¯ä¸€ç§ Docker Compose CLI åŠŸèƒ½ã€‚</p><p>åœ¨è¿è¡Œ docker stack deploy æ—¶ï¼ŒSwarm ä¸æ”¯æŒæ­¤åŠŸèƒ½ã€‚</p></blockquote><h3 id=ä½¿ç”¨-environment-å±æ€§>ä½¿ç”¨ environment å±æ€§
<a class=anchor href=#%e4%bd%bf%e7%94%a8-environment-%e5%b1%9e%e6%80%a7>#</a></h3><p>æ— éœ€ä½¿ç”¨ <code>.env</code> æ–‡ä»¶ï¼Œä¾¿å¯ä»¥åœ¨ Compose æ–‡ä»¶ä¸­ç›´æ¥ä½¿ç”¨ <code>environment</code> å±æ€§è®¾ç½®<strong>ç¯å¢ƒå˜é‡</strong>ã€‚å…¶å·¥ä½œæ–¹å¼ä¸ <code>docker run -e VARIABLE=VALUE ...</code> ç›¸åŒã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=ln>1</span><span class=cl><span class=nt>web</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>2</span><span class=cl><span class=w>  </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>3</span><span class=cl><span class=w>    </span>- <span class=l>DEBUG=1</span><span class=w>
</span></span></span></code></pre></div><p>æœ‰å…³å¦‚ä½•ä½¿ç”¨å®ƒçš„æ›´å¤šç¤ºä¾‹ï¼Œè¯·å‚é˜…
<a href=https://docs.docker.com/compose/compose-file/05-services/#environment>environmentå±æ€§</a>ã€‚</p><h4 id=environmentå±æ€§çš„è¡¥å……ä¿¡æ¯>environmentå±æ€§çš„è¡¥å……ä¿¡æ¯
<a class=anchor href=#environment%e5%b1%9e%e6%80%a7%e7%9a%84%e8%a1%a5%e5%85%85%e4%bf%a1%e6%81%af>#</a></h4><ol><li><p>å¯ä»¥é€‰æ‹©ä¸è®¾ç½®å€¼ï¼Œè€Œæ˜¯å°† Shell ä¸­çš„<strong>ç¯å¢ƒå˜é‡</strong>ç›´æ¥ä¼ é€’åˆ°å®¹å™¨ä¸­ã€‚å…¶å·¥ä½œæ–¹å¼ä¸ <code>docker run -e VARIABLE ...</code> ç›¸åŒï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=ln>1</span><span class=cl><span class=nt>web</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>2</span><span class=cl><span class=w></span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>3</span><span class=cl><span class=w>  </span>- <span class=l>DEBUG</span><span class=w>
</span></span></span></code></pre></div></li><li><p>å®¹å™¨ä¸­ DEBUG å˜é‡çš„å€¼å–è‡ªè¿è¡Œ Compose çš„ shell ä¸­ç›¸åŒå˜é‡çš„å€¼ã€‚æ³¨æ„ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœ shell ç¯å¢ƒä¸­çš„ DEBUG å˜é‡æœªè®¾ç½®ï¼Œåˆ™<strong>ä¸ä¼š</strong>å‘å‡ºè­¦å‘Šã€‚</p><p>è¿˜å¯ä»¥åˆ©ç”¨
<a href=https://docs.docker.com/compose/environment-variables/env-file/#interpolation>å†…æ’</a>ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=ln>1</span><span class=cl><span class=nt>web</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>2</span><span class=cl><span class=w></span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>3</span><span class=cl><span class=w>  </span>- <span class=l>DEBUG=${DEBUG}</span><span class=w>
</span></span></span></code></pre></div><p>ç»“æœä¸ä¸Šé¢ç±»ä¼¼ï¼Œä½†å¦‚æœ shell ç¯å¢ƒä¸­æœªè®¾ç½® DEBUG å˜é‡ï¼ŒCompose <strong>ä¼šå‘å‡ºè­¦å‘Š</strong>ã€‚</p></li></ol><h3 id=ä½¿ç”¨-env_file-å±æ€§>ä½¿ç”¨ env_file å±æ€§
<a class=anchor href=#%e4%bd%bf%e7%94%a8-env_file-%e5%b1%9e%e6%80%a7>#</a></h3><p><code>env_file</code> å±æ€§ ä½¿ä½ å¯ä»¥åœ¨ Compose åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨å¤šä¸ª <code>.env</code> æ–‡ä»¶ã€‚æ­¤åŠŸèƒ½è¿˜æœ‰åŠ©äºå°†ç¯å¢ƒå˜é‡ä¸ä¸»é…ç½®æ–‡ä»¶åŒºåˆ†å¼€æ¥ï¼Œæä¾›äº†ä¸€ç§æ›´äº•ç„¶æœ‰åºä¸”æ›´å®‰å…¨çš„æ–¹å¼æ¥ç®¡ç†æ•æ„Ÿä¿¡æ¯ï¼Œå› ä¸ºæ— éœ€å°† <code>.env</code> æ–‡ä»¶æ”¾åœ¨é¡¹ç›®ç›®å½•çš„æ ¹ç›®å½•ä¸‹ã€‚</p><p>å…¶å·¥ä½œæ–¹å¼ä¸ <code>docker run --env-file=FILE ...</code> ç›¸åŒã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=ln>1</span><span class=cl><span class=nt>web</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>2</span><span class=cl><span class=w> </span><span class=nt>env_file</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>3</span><span class=cl><span class=w>  </span>- <span class=l>web-variables.env</span><span class=w>
</span></span></span></code></pre></div><h4 id=env_fileå±æ€§çš„è¡¥å……ä¿¡æ¯>env_fileå±æ€§çš„è¡¥å……ä¿¡æ¯
<a class=anchor href=#env_file%e5%b1%9e%e6%80%a7%e7%9a%84%e8%a1%a5%e5%85%85%e4%bf%a1%e6%81%af>#</a></h4><ol><li><p>å¦‚æœæŒ‡å®šäº†å¤šä¸ªæ–‡ä»¶ï¼Œå®ƒä»¬å°†æŒ‰é¡ºåºè¿›è¡Œè¯„ä¼°ï¼Œå¹¶å¯ä»¥è¦†ç›–ä¹‹å‰æ–‡ä»¶ä¸­è®¾ç½®çš„å€¼ã€‚</p></li><li><p>åœ¨ <code>.env</code> æ–‡ä»¶ä¸­å£°æ˜çš„ç¯å¢ƒå˜é‡ä¸èƒ½åœ¨ Compose æ–‡ä»¶ä¸­å†æ¬¡å•ç‹¬å¼•ç”¨ã€‚</p></li><li><p>å¦‚æœåŒæ—¶ä½¿ç”¨ <code>env_file</code> å’Œ <code>environment</code> å±æ€§ï¼Œåˆ™ç”± <code>environment</code> è®¾ç½®çš„ç¯å¢ƒå˜é‡<strong>ä¼˜å…ˆ</strong>ã€‚</p></li><li><p>åœ¨ <code>env_file</code> å±æ€§ä¸­æŒ‡å®šåˆ° <code>.env</code> æ–‡ä»¶çš„è·¯å¾„æ˜¯ç›¸å¯¹äº <code>compose.yml</code> æ–‡ä»¶çš„ä½ç½®ã€‚</p></li><li><p>å¯ä»¥é€šè¿‡ä½¿ç”¨ <code>docker compose run -e</code> ä»å‘½ä»¤è¡Œè¦†ç›– <code>.env</code> æ–‡ä»¶ä¸­çš„å€¼ã€‚</p></li><li><p>å¦‚æœä½¿ç”¨ <code>--env-file</code> æ›¿æ¢å¦ä¸€ä¸ª <code>.env</code> æ–‡ä»¶ï¼Œåˆ™ <code>.env</code> æ–‡ä»¶ä¼šè¢«è¦†ç›–ã€‚</p></li><li><p>åœ¨ Docker Compose ç‰ˆæœ¬ 2.24.0 ä¸­ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨ <code>required</code> å­—æ®µï¼Œå°† <code>.env</code> æ–‡ä»¶è®¾ç½®ä¸ºå¯é€‰ã€‚å½“ <code>required</code> è®¾ç½®ä¸º <code>false</code> ä¸” <code>.env</code> æ–‡ä»¶ä¸¢å¤±æ—¶ï¼ŒCompose ä¼šé™é»˜å¿½ç•¥è¯¥æ¡ç›®ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=ln>1</span><span class=cl><span class=nt>env_file</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>2</span><span class=cl><span class=w></span>- <span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>./default.env</span><span class=w>
</span></span></span><span class=line><span class=ln>3</span><span class=cl><span class=w>  </span><span class=nt>required</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w> </span><span class=c># default</span><span class=w>
</span></span></span><span class=line><span class=ln>4</span><span class=cl><span class=w></span>- <span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>./override.env</span><span class=w>
</span></span></span><span class=line><span class=ln>5</span><span class=cl><span class=w>  </span><span class=nt>required</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span></code></pre></div></li></ol><h3 id=ä»-shell-ä¸­æ›¿æ¢>ä» shell ä¸­æ›¿æ¢
<a class=anchor href=#%e4%bb%8e-shell-%e4%b8%ad%e6%9b%bf%e6%8d%a2>#</a></h3><p>å¯ä»¥ä½¿ç”¨ä¸»æœºæˆ–æ‰§è¡Œ docker compose å‘½ä»¤çš„ shell ç¯å¢ƒä¸­çš„ç°æœ‰ç¯å¢ƒå˜é‡ã€‚è¿™æ ·ä¾¿å¯ä»¥åœ¨è¿è¡Œæ—¶å°†å€¼åŠ¨æ€æ³¨å…¥åˆ° Docker Compose é…ç½®å½“ä¸­ã€‚</p><p>ä¾‹å¦‚ï¼Œå‡è®¾ shell ä¸­åŒ…å« <code>POSTGRES_VERSION</code>=9.3ï¼Œå¹¶ä¸”æä¾›äº†ä»¥ä¸‹é…ç½®ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=ln>1</span><span class=cl><span class=nt>db</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>2</span><span class=cl><span class=w>  </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;postgres:${POSTGRES_VERSION}&#34;</span><span class=w>
</span></span></span></code></pre></div><p>ä½¿ç”¨æ­¤é…ç½®è¿è¡Œ <code>docker compose up</code> æ—¶ï¼ŒCompose ä¼šåœ¨ shell ä¸­æŸ¥æ‰¾ <code>POSTGRES_VERSION</code> ç¯å¢ƒå˜é‡ï¼Œå¹¶åœ¨å…¶ä¸­æ›¿æ¢å…¶å€¼ã€‚å¯¹äºæ­¤ç¤ºä¾‹ï¼ŒCompose åœ¨è¿è¡Œé…ç½®ä¹‹å‰ï¼Œå°†é•œåƒè§£æä¸º postgres:9.3ã€‚</p><p>å¦‚æœæœªè®¾ç½®ç¯å¢ƒå˜é‡ï¼ŒCompose å°†æ›¿æ¢ä¸ºç©ºå­—ç¬¦ä¸²ã€‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œå¦‚æœæœªè®¾ç½® <code>POSTGRES_VERSIONï¼Œåˆ™</code> image é€‰é¡¹çš„å€¼ä¸º postgres:ã€‚</p><blockquote class="book-hint info"><a class=hint-start>â€œ</a><p>postgres: ä¸æ˜¯æœ‰æ•ˆçš„é•œåƒå¼•ç”¨ã€‚Docker æœŸæœ›æ²¡æœ‰æ ‡è®°çš„å¼•ç”¨ï¼ˆå¦‚ postgresï¼Œé»˜è®¤ä¸ºæœ€æ–°é•œåƒï¼‰æˆ–å¸¦æœ‰æ ‡è®°çš„å¼•ç”¨ï¼ˆå¦‚ postgres:15ï¼‰ã€‚</p><p>åœ¨ shell ç¯å¢ƒä¸­è®¾ç½®çš„å€¼ä¼šè¦†ç›–åœ¨ <code>.env</code> æ–‡ä»¶ã€<code>environment</code> å±æ€§å’Œ <code>env_file</code> å±æ€§ä¸­è®¾ç½®çš„å€¼ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…
<a href=https://docs.docker.com/compose/environment-variables/envvars-precedence/>ç¯å¢ƒå˜é‡ä¼˜å…ˆçº§</a>ã€‚</p></blockquote><h2 id=cli>CLI
<a class=anchor href=#cli>#</a></h2><h3 id=ç”¨-env-file-æ›¿æ¢>ç”¨ â€“env-file æ›¿æ¢
<a class=anchor href=#%e7%94%a8-env-file-%e6%9b%bf%e6%8d%a2>#</a></h3><p>å¯ä»¥åœ¨
<a href=https://docs.docker.com/compose/environment-variables/env-file/>ç¯å¢ƒæ–‡ä»¶</a> ä¸­ä¸ºå¤šä¸ªç¯å¢ƒå˜é‡è®¾ç½®é»˜è®¤å€¼ï¼Œç„¶ååœ¨ CLI ä¸­å°†è¯¥æ–‡ä»¶ä½œä¸ºå‚æ•°ä¼ é€’ã€‚</p><p>æ­¤æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯å¯ä»¥å°†æ–‡ä»¶å­˜å‚¨åœ¨ä»»ä½•ä½ç½®å¹¶å°†å…¶å‘½åä¸ºé€‚å½“çš„åç§°ï¼Œä¾‹å¦‚ï¼Œ</p><p>æ­¤æ–‡ä»¶è·¯å¾„æ˜¯ç›¸å¯¹äºæ‰§è¡Œ Docker Compose å‘½ä»¤çš„å½“å‰å·¥ä½œç›®å½•ã€‚ä½¿ç”¨ <code>--env-file</code> é€‰é¡¹ä¼ é€’æ–‡ä»¶è·¯å¾„ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=ln>1</span><span class=cl>docker compose --env-file ./config/.env.dev up
</span></span></code></pre></div><h4 id=å‘½ä»¤è¡Œ-env-flieé€‰é¡¹çš„è¡¥å……äº‹é¡¹>å‘½ä»¤è¡Œ-env-flieé€‰é¡¹çš„è¡¥å……äº‹é¡¹
<a class=anchor href=#%e5%91%bd%e4%bb%a4%e8%a1%8c-env-flie%e9%80%89%e9%a1%b9%e7%9a%84%e8%a1%a5%e5%85%85%e4%ba%8b%e9%a1%b9>#</a></h4><ol><li><p>å¦‚æœæƒ³ä¸´æ—¶è¦†ç›– <code>compose.yml</code> æ–‡ä»¶ä¸­å·²ç»å¼•ç”¨çš„ <code>.env</code> æ–‡ä»¶ï¼Œæ­¤æ–¹æ³•å¾ˆæœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œå¯èƒ½ä¸ºç”Ÿäº§ (.<code>env.prod</code> ) å’Œæµ‹è¯• (.<code>env.test</code>) æœ‰ä¸åŒçš„ <code>.env</code> æ–‡ä»¶ã€‚åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œæœ‰ä¸¤ä¸ªç¯å¢ƒæ–‡ä»¶ï¼Œ<code>.env</code> å’Œ <code>.env.dev</code>ã€‚ä¸¤è€…éƒ½ä¸º TAG è®¾ç½®äº†ä¸åŒçš„å€¼ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=ln>1</span><span class=cl>$ cat .env
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=nv>TAG</span><span class=o>=</span>v1.5
</span></span><span class=line><span class=ln>3</span><span class=cl>
</span></span><span class=line><span class=ln>4</span><span class=cl>$ cat ./config/.env.dev
</span></span><span class=line><span class=ln>5</span><span class=cl><span class=nv>TAG</span><span class=o>=</span>v1.6
</span></span><span class=line><span class=ln>6</span><span class=cl>
</span></span><span class=line><span class=ln>7</span><span class=cl>$ cat compose.yml
</span></span><span class=line><span class=ln>8</span><span class=cl>services:
</span></span><span class=line><span class=ln>9</span><span class=cl>web:  image: <span class=s2>&#34;webapp:</span><span class=si>${</span><span class=nv>TAG</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span></code></pre></div><p>å¦‚æœæ²¡æœ‰åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ <code>--env-file</code>ï¼Œåˆ™é»˜è®¤åŠ è½½ <code>.env</code> æ–‡ä»¶ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=ln>1</span><span class=cl>$ docker compose config
</span></span><span class=line><span class=ln>2</span><span class=cl>services:
</span></span><span class=line><span class=ln>3</span><span class=cl>web:  image: <span class=s1>&#39;webapp:v1.5&#39;</span>
</span></span></code></pre></div><p>ä¼ é€’ <code>--env-file</code> å‚æ•°ä¼šè¦†ç›–é»˜è®¤æ–‡ä»¶è·¯å¾„ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=ln>1</span><span class=cl>$ docker compose --env-file ./config/.env.dev config
</span></span><span class=line><span class=ln>2</span><span class=cl>services:
</span></span><span class=line><span class=ln>3</span><span class=cl>web:  image: <span class=s1>&#39;webapp:v1.6&#39;</span>
</span></span></code></pre></div><p>å½“ä¸€ä¸ªæ— æ•ˆçš„æ–‡ä»¶è·¯å¾„è¢«ä¼ é€’ä¸º <code>--env-file</code> å‚æ•°æ—¶ï¼ŒCompose ä¼šè¿”å›ä¸€ä¸ªé”™è¯¯ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=ln>1</span><span class=cl>$ docker compose --env-file ./doesnotexist/.env.dev config
</span></span><span class=line><span class=ln>2</span><span class=cl>ERROR: Couldn<span class=se>\&#39;</span>t find env file: /home/user/./doesnotexist/.env.dev
</span></span></code></pre></div></li><li><p>å¯ä»¥ä½¿ç”¨å¤šä¸ª<code>--env-file</code> é€‰é¡¹æ¥æŒ‡å®šå¤šä¸ªç¯å¢ƒæ–‡ä»¶ï¼ŒDocker Compose ä¼šæŒ‰é¡ºåºè¯»å–å®ƒä»¬ã€‚åé¢çš„æ–‡ä»¶å¯ä»¥è¦†ç›–å‰é¢çš„æ–‡ä»¶ä¸­çš„å˜é‡ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=ln>1</span><span class=cl>$ docker compose --env-file .env --env-file .env.override up
</span></span></code></pre></div></li><li><p>ä»å‘½ä»¤è¡Œå¯åŠ¨å®¹å™¨æ—¶ï¼Œå¯ä»¥è¦†ç›–ç‰¹å®šçš„ç¯å¢ƒå˜é‡ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=ln>1</span><span class=cl>$ docker compose --env-file .env.dev up -e <span class=nv>DATABASE_URL</span><span class=o>=</span>mysql://new_user:new_password@new_db:3306/new_database
</span></span></code></pre></div></li></ol><h3 id=ä½¿ç”¨-docker-compose-run-env-è®¾ç½®ç¯å¢ƒå˜é‡>ä½¿ç”¨ docker compose run â€“env è®¾ç½®ç¯å¢ƒå˜é‡
<a class=anchor href=#%e4%bd%bf%e7%94%a8-docker-compose-run-env-%e8%ae%be%e7%bd%ae%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f>#</a></h3><p>ä¸ <code>docker run --env</code> ç±»ä¼¼ï¼Œå¯ä»¥ä½¿ç”¨ <code>docker compose run --env</code> æˆ–å…¶ç®€ç§° <code>docker compose run -e</code> ä¸´æ—¶è®¾ç½®ç¯å¢ƒå˜é‡ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=ln>1</span><span class=cl>$ docker compose run -e <span class=nv>DEBUG</span><span class=o>=</span><span class=m>1</span> web python console.py
</span></span></code></pre></div><p>ä¹Ÿå¯ä»¥é€šè¿‡ä¸ç»™å˜é‡èµ‹å€¼çš„æ–¹å¼ä» shell ä¸­ä¼ é€’å½“å‰ç¯å¢ƒå˜é‡ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=ln>1</span><span class=cl>$ docker compose run -e DEBUG web python console.py
</span></span></code></pre></div><p>å®¹å™¨ä¸­ DEBUG å˜é‡çš„å€¼å–è‡ªè¿è¡Œ Compose çš„ shell ä¸­ç›¸åŒå˜é‡çš„å€¼ã€‚</p><h2 id=å…¶ä»–èµ„æº>å…¶ä»–èµ„æº
<a class=anchor href=#%e5%85%b6%e4%bb%96%e8%b5%84%e6%ba%90>#</a></h2><ul><li><a href=https://docs.docker.com/compose/environment-variables/envvars-precedence/>äº†è§£ç¯å¢ƒå˜é‡ä¼˜å…ˆçº§</a></li><li><a href=https://docs.docker.com/compose/environment-variables/envvars/>è®¾ç½®æˆ–æ›´æ”¹é¢„å®šä¹‰çš„ç¯å¢ƒå˜é‡</a></li><li><a href=https://docs.docker.com/compose/environment-variables/best-practices/>æ¢ç´¢æœ€ä½³å®è·µ</a></li><li><a href=https://docs.docker.com/compose/environment-variables/env-file/>äº†è§£ç¯å¢ƒæ–‡ä»¶çš„è¯­æ³•å’Œæ ¼å¼æŒ‡å—</a></li></ul><h2 id=å‚è€ƒèµ„æ–™>å‚è€ƒèµ„æ–™
<a class=anchor href=#%e5%8f%82%e8%80%83%e8%b5%84%e6%96%99>#</a></h2><p><a href=https://docs.docker.com/compose/environment-variables/set-environment-variables/>Ways to set environment variables with Compose</a></p><p><a href=https://simi.studio/ways-to-set-environment-variables-with-docker-compose/#%E4%BB%8E-shell-%E4%B8%AD%E6%9B%BF%E6%8D%A2>åŸæ–‡ğŸ”—ï¸</a></p></article><div class=next-prev><hr><div class="page-navi flex" id=pagenavi><div class=pre-page>â†
<a href=https://wangy325.github.io/zh-cn/posts/2024/20241130_4_ways_to_setting_spring_boot_applications/>ä¸ºSpring-Bootåº”ç”¨ç¨‹åºè®¾ç½®å‚æ•°çš„å‡ ç§æ–¹å¼</a></div><div class=next-page><a href=https://wangy325.github.io/zh-cn/posts/2024/20241126_HATEOAS%E5%9C%A8RESTful-API%E8%AE%BE%E8%AE%A1%E4%B8%AD%E7%9A%84%E4%BD%9C%E7%94%A8/>åœ¨RESTful APIè®¾è®¡ä¸­åº”ç”¨HATEOAS</a> â†’</div></div></div><section class=related><hr></section><div class=book-comments><div class=giscus-thread></div><script src=https://giscus.app/client.js data-repo=wangy325/wangy325.github.io data-repo-id=R_kgDOHhhDZg data-category=Announcements data-category-id=DIC_kwDOHhhDZs4ChbMn data-mapping=og:title data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=noborder_light data-loading=lazy data-lang=zh-CN crossorigin=anonymous async></script></div><div class=copyright><hr class=cline><p>Notes and Memos by wangy325
<a href=https://creativecommons.org/licenses/by/4.0/deed.en title="Creative Commons Attribution">&copy; CC BY 4.0</a></p><p>2019-2025. Powered by
<a href=https://github.com/alex-shpak/hugo-book>Hugo Book</a>
Presented by Github.</p></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><div id=toc-new><ul class=nav><li class=nav-item><a id=tComposeæ–‡ä»¶ href=javascript:void(0) onclick='return scrolly("compose-æ–‡ä»¶"),!1'>Compose æ–‡ä»¶</a><ul class=nav><li class=nav-item><a id=tç”¨envæ–‡ä»¶ä»£æ›¿ href=javascript:void(0) onclick='return scrolly("ç”¨-env-æ–‡ä»¶ä»£æ›¿"),!1'>ç”¨ .env æ–‡ä»¶ä»£æ›¿</a><ul class=nav><li class=nav-item><a id=tenvæ–‡ä»¶çš„è¡¥å……ä¿¡æ¯ href=javascript:void(0) onclick='return scrolly("envæ–‡ä»¶çš„è¡¥å……ä¿¡æ¯"),!1'>.envæ–‡ä»¶çš„è¡¥å……ä¿¡æ¯</a></li></ul></li><li class=nav-item><a id=tä½¿ç”¨environmentå±æ€§ href=javascript:void(0) onclick='return scrolly("ä½¿ç”¨-environment-å±æ€§"),!1'>ä½¿ç”¨ environment å±æ€§</a><ul class=nav><li class=nav-item><a id=tenvironmentå±æ€§çš„è¡¥å……ä¿¡æ¯ href=javascript:void(0) onclick='return scrolly("environmentå±æ€§çš„è¡¥å……ä¿¡æ¯"),!1'>environmentå±æ€§çš„è¡¥å……ä¿¡æ¯</a></li></ul></li><li class=nav-item><a id=tä½¿ç”¨env_fileå±æ€§ href=javascript:void(0) onclick='return scrolly("ä½¿ç”¨-env_file-å±æ€§"),!1'>ä½¿ç”¨ env_file å±æ€§</a><ul class=nav><li class=nav-item><a id=tenv_fileå±æ€§çš„è¡¥å……ä¿¡æ¯ href=javascript:void(0) onclick='return scrolly("env_fileå±æ€§çš„è¡¥å……ä¿¡æ¯"),!1'>env_fileå±æ€§çš„è¡¥å……ä¿¡æ¯</a></li></ul></li><li class=nav-item><a id=tä»shellä¸­æ›¿æ¢ href=javascript:void(0) onclick='return scrolly("ä»-shell-ä¸­æ›¿æ¢"),!1'>ä» shell ä¸­æ›¿æ¢</a></li></ul></li><li class=nav-item><a id=tCLI href=javascript:void(0) onclick='return scrolly("cli"),!1'>CLI</a><ul class=nav><li class=nav-item><a id=tç”¨â€“envfileæ›¿æ¢ href=javascript:void(0) onclick='return scrolly("ç”¨-â€“env-file-æ›¿æ¢"),!1'>ç”¨ â€“env-file æ›¿æ¢</a><ul class=nav><li class=nav-item><a id=tå‘½ä»¤è¡Œenvflieé€‰é¡¹çš„è¡¥å……äº‹é¡¹ href=javascript:void(0) onclick='return scrolly("å‘½ä»¤è¡Œ-env-flieé€‰é¡¹çš„è¡¥å……äº‹é¡¹"),!1'>å‘½ä»¤è¡Œ-env-flieé€‰é¡¹çš„è¡¥å……äº‹é¡¹</a></li></ul></li><li class=nav-item><a id=tä½¿ç”¨dockercomposerunâ€“envè®¾ç½®ç¯å¢ƒå˜é‡ href=javascript:void(0) onclick='return scrolly("ä½¿ç”¨-docker-compose-run-â€“env-è®¾ç½®ç¯å¢ƒå˜é‡"),!1'>ä½¿ç”¨ docker compose run â€“env è®¾ç½®ç¯å¢ƒå˜é‡</a></li></ul></li><li class=nav-item><a id=tå…¶ä»–èµ„æº href=javascript:void(0) onclick='return scrolly("å…¶ä»–èµ„æº"),!1'>å…¶ä»–èµ„æº</a></li><li class=nav-item><a id=tå‚è€ƒèµ„æ–™ href=javascript:void(0) onclick='return scrolly("å‚è€ƒèµ„æ–™"),!1'>å‚è€ƒèµ„æ–™</a></li></ul></div><script>function scrolly(e){const t=40;var n=document.getElementById(e).offsetTop;window.scrollTo({top:n+t,behaviour:"smooth"})}</script></div></aside></main><div class=back-to-top><div id=back-to-top><img src=/svg/chevrons-up.svg srcset="/svg/chevrons-up.svg 500w" onclick=topFunction() class=black>
<img title=å›åˆ°é¡¶éƒ¨ src=/svg/chevrons-up-blue.svg srcset="/svg/chevrons-up-blue.svg 500w" onclick=topFunction() class=blue></div><script>let mybutton=document.getElementById("back-to-top");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>500||document.documentElement.scrollTop>500?mybutton.style.display="block":mybutton.style.display="none"}function topFunction(){window.scrollTo({top:0,behavior:"smooth"})}</script></div><script src=/js/scroll-listening.js></script></body></html>