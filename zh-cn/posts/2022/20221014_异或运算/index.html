<!doctype html><html lang=zh-CN dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="异或运算(exclusive or)又记作XOR，一般用插入符号(caret)^表示，其可以看到是更加单纯的或运算(|)。我们知道，或运算的规则是：

a=1，b=1，a|b=1 ①
a，b任意一个为1，a|b=1 ②

异或运算则是去除了或运算中的规则①，即只有a、b相异时，结果才为真，其他情形都为假。因此异或运算的真值表为：
0^0 = 0
0^1 = 1
1^0 = 1
1^1 = 0

与0异或，其值不变；与1异或，相当于取反。
异或运算有一些特殊的性质，利用这些性质，可以解决特定的问题。这也是本文所要讨论的重点。"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://wangy325.github.io/zh-cn/posts/2022/20221014_%E5%BC%82%E6%88%96%E8%BF%90%E7%AE%97/"><meta property="og:site_name" content="xf&pl"><meta property="og:title" content="异或运算"><meta property="og:description" content="异或运算(exclusive or)又记作XOR，一般用插入符号(caret)^表示，其可以看到是更加单纯的或运算(|)。我们知道，或运算的规则是：
a=1，b=1，a|b=1 ① a，b任意一个为1，a|b=1 ② 异或运算则是去除了或运算中的规则①，即只有a、b相异时，结果才为真，其他情形都为假。因此异或运算的真值表为：
0^0 = 0 0^1 = 1 1^0 = 1 1^1 = 0 与0异或，其值不变；与1异或，相当于取反。
异或运算有一些特殊的性质，利用这些性质，可以解决特定的问题。这也是本文所要讨论的重点。"><meta property="og:locale" content="zh_CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-10-14T12:01:23+08:00"><meta property="article:modified_time" content="2022-10-14T12:01:23+08:00"><title>异或运算 | xf&amp;pl</title>
<link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=https://wangy325.github.io/zh-cn/posts/2022/20221014_%E5%BC%82%E6%88%96%E8%BF%90%E7%AE%97/><link rel=stylesheet href=/book.min.dc7b67613526b8d54c97dc54357067bc78ca03922ac3d66ac764ed621486ec48.css integrity="sha256-3HtnYTUmuNVMl9xUNXBnvHjKA5Iqw9Zqx2TtYhSG7Eg=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/zh-cn.search.min.65e7e7e06dcefc1c6073cbcc2be10d85a52b896ba9159689decb413f5f9858d6.js integrity="sha256-Zefn4G3O/Bxgc8vMK+ENhaUriWupFZaJ3stBP1+YWNY=" crossorigin=anonymous></script><script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js integrity="sha256-b2+Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC+NdcPIvZhzk=" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-HHNKR5H8KN"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-HHNKR5H8KN")}</script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><div class=navi-bar id=navibar><div id=page-title><h2 class=book-brand><a class="flex align-center" href=/zh-cn/><span>xf&amp;pl</span></a></h2></div><div class=page-navi-col><nav><ul><li><a href=/zh-cn/docs/java/>Java</a></li><li><a href=/zh-cn/docs/design_pattern/>DP</a></li><li class=book-section-flat><a href=/zh-cn/docs/note/>Mooc</a></li><li class=book-section-flat><a href=/zh-cn/docs/snippets/>Snippets</a></li></ul><ul><li><a href=/zh-cn/posts/>Blog</a></li><li><a href=/zh-cn/archive/>Archive</a></li></ul></nav></div><div class="book-search hidden"><input type=text id=book-search-input placeholder=搜索 aria-label=搜索 maxlength=64 data-hotkeys=s/ required pattern=\S+.*>
<span class=clear_search><img src=/svg/close.svg onclick=clearInput()></span><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><script>function clearInput(){document.getElementById("book-search-input").value="";for(var e=document.getElementById("book-search-results");e.firstChild;)e.removeChild(e.firstChild)}</script><ul class=book-languages><li><a class="flex align-center"><img src=/svg/language.svg class=book-icon alt=Languages>
简体中文</a></label><ul><li><a href=https://wangy325.github.io/en/>English</a></li></ul></li></ul></div><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label><h3>异或运算</h3><label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><div id=toc-new><ul class=nav><li class=nav-item><a id=t1异或运算的性质 href=javascript:void(0) onclick='return scrolly("1-异或运算的性质"),!1'>1. 异或运算的性质</a></li><li class=nav-item><a id=t2异或运算的典型应用 href=javascript:void(0) onclick='return scrolly("2-异或运算的典型应用"),!1'>2. 异或运算的典型应用</a><ul class=nav><li class=nav-item><a id=t21交换2个数 href=javascript:void(0) onclick='return scrolly("21-交换2个数"),!1'>2.1 交换2个数</a></li><li class=nav-item><a id=t22经典面试题 href=javascript:void(0) onclick='return scrolly("22-经典面试题"),!1'>2.2 经典面试题</a><ul class=nav><li class=nav-item><a id=t找出唯一数 href=javascript:void(0) onclick='return scrolly("找出唯一数"),!1'>找出唯一数</a></li><li class=nav-item><a id=t找出重复数 href=javascript:void(0) onclick='return scrolly("找出重复数"),!1'>找出重复数</a></li></ul></li><li class=nav-item><a id=t23加解密 href=javascript:void(0) onclick='return scrolly("23-加解密"),!1'>2.3 加解密</a></li><li class=nav-item><a id=t备份文件 href=javascript:void(0) onclick='return scrolly("备份文件"),!1'>备份文件</a></li></ul></li></ul></div><script>function scrolly(e){const t=40;var n=document.getElementById(e).offsetTop;window.scrollTo({top:n+t,behaviour:"smooth"})}</script></aside></header><article class="markdown book-post"><h1>异或运算</h1><div class="postmeta flex align-cneter" style=justify-content:center><div class="created flex align-cneter"><img src=/svg/calendar-event.svg class=book-icon alt>
<a title='创建者 wangy325'>2022-10-14</a></div><div class="cates flex align-center"><img src=/svg/cates.svg class=book-icon alt>
<a href=/zh-cn/categories/algo/>Algo</a></div></div><p>异或运算(<em>exclusive or</em>)又记作<em>XOR</em>，一般用插入符号(<em>caret</em>)<code>^</code>表示，其可以看到是更加单纯的或运算(|)。我们知道，或运算的规则是：</p><ul><li>a=1，b=1，a|b=1 ①</li><li>a，b任意一个为1，a|b=1 ②</li></ul><p>异或运算则是去除了或运算中的规则①，即只有a、b相异时，结果才为真，其他情形都为假。因此异或运算的真值表为：</p><pre tabindex=0><code>0^0 = 0
0^1 = 1
1^0 = 1
1^1 = 0
</code></pre><blockquote><p>与0异或，其值不变；与1异或，相当于取反。</p></blockquote><p>异或运算有一些特殊的性质，利用这些性质，可以解决特定的问题。这也是本文所要讨论的重点。</p><h2 id=1-异或运算的性质>1. 异或运算的性质
<a class=anchor href=#1-%e5%bc%82%e6%88%96%e8%bf%90%e7%ae%97%e7%9a%84%e6%80%a7%e8%b4%a8>#</a></h2><ul><li>交换律： <code>A^B = B^A</code></li><li>结合律： <code>(A^B)^C = A^(B^C)</code></li><li>对于任意数A，都有<code>A^A=0</code>，<code>A^0=A</code></li><li>自反性：<code>A^B^B = A</code></li></ul><p>其中，自反性尤其重要。其内涵为，对于任意数A，给定任意运算因子B，做偶数次异或运算后，得到A本身。异或运算的很多应用，都是基于自反性。</p><h2 id=2-异或运算的典型应用>2. 异或运算的典型应用
<a class=anchor href=#2-%e5%bc%82%e6%88%96%e8%bf%90%e7%ae%97%e7%9a%84%e5%85%b8%e5%9e%8b%e5%ba%94%e7%94%a8>#</a></h2><h3 id=21-交换2个数>2.1 交换2个数
<a class=anchor href=#21-%e4%ba%a4%e6%8d%a22%e4%b8%aa%e6%95%b0>#</a></h3><p>一般地，如果想交换2个数，我们会引入一个中间变量来完成这一操作。但是，利用异或运算，可以在不需要额外空间的情况下完成2个数的交换：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=ln>1</span><span class=cl><span class=k>var</span> <span class=py>a</span> <span class=p>=</span> <span class=m>1</span>
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=k>var</span> <span class=py>b</span> <span class=p>=</span> <span class=m>2</span>
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=c1>// swap
</span></span></span><span class=line><span class=ln>4</span><span class=cl><span class=c1></span><span class=n>a</span> <span class=p>=</span> <span class=n>a</span><span class=p>^</span><span class=n>b</span>
</span></span><span class=line><span class=ln>5</span><span class=cl><span class=n>b</span> <span class=p>=</span> <span class=n>b</span><span class=p>^</span><span class=n>a</span> <span class=c1>// b^a^b = a
</span></span></span><span class=line><span class=ln>6</span><span class=cl><span class=c1></span><span class=n>a</span> <span class=p>=</span> <span class=n>a</span><span class=p>^</span><span class=n>b</span> <span class=c1>// a^b^b^a^b = b
</span></span></span><span class=line><span class=ln>7</span><span class=cl><span class=c1></span><span class=n>println</span><span class=p>(</span><span class=s2>&#34;a=</span><span class=si>$a</span><span class=s2>, b=</span><span class=si>$b</span><span class=s2>&#34;</span><span class=p>)</span> <span class=c1>// a = 2, b=1
</span></span></span></code></pre></div><blockquote><p>在kotlin中，交换2个数可以这样实现：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=ln>1</span><span class=cl><span class=k>var</span> <span class=py>a</span> <span class=p>=</span> <span class=m>1</span>
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=k>var</span> <span class=py>b</span> <span class=p>=</span> <span class=m>2</span>
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=n>a</span> <span class=p>=</span> <span class=n>b</span><span class=p>.</span><span class=n>also</span> <span class=p>{</span> <span class=n>b</span> <span class=p>=</span> <span class=n>a</span><span class=p>}</span>
</span></span></code></pre></div></blockquote><h3 id=22-经典面试题>2.2 经典面试题
<a class=anchor href=#22-%e7%bb%8f%e5%85%b8%e9%9d%a2%e8%af%95%e9%a2%98>#</a></h3><h4 id=找出唯一数>找出唯一数
<a class=anchor href=#%e6%89%be%e5%87%ba%e5%94%af%e4%b8%80%e6%95%b0>#</a></h4><blockquote><p>在一个整数数组中，仅存在唯一一个不重复的数字，其他的数字均出现2次或2次以上（偶数次），找出那个不重复的数字。</p></blockquote><p>如果熟悉异或运算的自反性，阅读题干就能自然联想到，使用异或运算能够快速求解：</p><pre tabindex=0><code>设唯一元素为N，那么

A^B^C^...N^D^E^F...

由于除了N外，A、B、C、D、E、F都出现偶数次，其异或运算结果为0，故原式即为
N^0
</code></pre><p>当然，此题还有其他解法，如典型的使用嵌套循环，即可找出唯一数：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=ln> 1</span><span class=cl><span class=k>fun</span> <span class=nf>solution</span><span class=p>(</span><span class=n>arr</span><span class=p>:</span> <span class=n>IntArray</span><span class=p>):</span> <span class=n>Int</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=n>j</span> <span class=k>in</span> <span class=n>arr</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>            <span class=k>var</span> <span class=py>count</span> <span class=p>=</span> <span class=m>0</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>            <span class=k>for</span> <span class=p>(</span><span class=n>k</span> <span class=k>in</span> <span class=n>arr</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>                <span class=k>if</span> <span class=p>(</span><span class=n>j</span> <span class=o>==</span> <span class=n>k</span><span class=p>)</span> <span class=n>count</span><span class=o>++</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>count</span> <span class=o>==</span> <span class=m>1</span><span class=p>)</span> <span class=k>return</span> <span class=n>j</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>        <span class=k>return</span> <span class=p>-</span><span class=m>1</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>    <span class=p>}</span>
</span></span></code></pre></div><h4 id=找出重复数>找出重复数
<a class=anchor href=#%e6%89%be%e5%87%ba%e9%87%8d%e5%a4%8d%e6%95%b0>#</a></h4><blockquote><p>将1-999放在一个容量为1000的集合中，只有1个元素重复，其他的元素均只出现1次，找出这个重复的元素。</p></blockquote><p>在数据不溢出的情况下，此题可通过所有元素和轻松解出。不过，我们讨论的是使用异或运算的性质来解题。</p><pre tabindex=0><code>记重复数为N，
设 1^2^3^...^(N-1)^N^N^(N+1)^...^997^998^999 = T
则 1^2^3^...^(N-1)^N^(N+1)^...^997^998^999 = T^N
故 N = T^T^N
</code></pre><p>上述题还有一相关变体：</p><blockquote><p>一个数组包含 n-1 个成员，这些成员是 1 到 n 之间的整数，且没有重复，请找出缺少的那个数字。</p></blockquote><p>同样地，对集合中的元素和1-n的有序序列数做异或运算，既可得到缺少的那个值（只出现一次）。</p><h3 id=23-加解密>2.3 加解密
<a class=anchor href=#23-%e5%8a%a0%e8%a7%a3%e5%af%86>#</a></h3><p>若有明文A以及密钥K，那么密文S可以由</p><p><code>A^K=S</code></p><p>获得。同理，当需要解密时，可以使用</p><p><code>S^K=A</code>
获得明文。</p><h3 id=备份文件>备份文件
<a class=anchor href=#%e5%a4%87%e4%bb%bd%e6%96%87%e4%bb%b6>#</a></h3><p>若有A、B两个文件，只要A、B不同时损坏，即可以通过异或运算的备份T来恢复其中一个损坏的文件：</p><p><code>A^B=T</code></p><p>若文件A损坏，则可以通过</p><p><code>T^B=A</code></p><p>来恢复损坏的文件A。反之亦然。</p></article><div class=next-prev><hr><div class="page-navi flex" id=pagenavi><div class=pre-page>←
<a href=https://wangy325.github.io/zh-cn/posts/2022/20221015_%E7%A7%BB%E4%BD%8D%E8%BF%90%E7%AE%97/>移位运算</a></div><div class=next-page><a href=https://wangy325.github.io/zh-cn/posts/2022/20221014_%E5%90%8C%E4%BD%99%E5%AE%9A%E7%90%86%E4%B8%8E%E4%BA%8C%E8%BF%9B%E5%88%B6%E8%A1%A5%E7%A0%81/>同余定理与二进制补码</a> →</div></div></div><section class=related><div class=rel-title>相似文章</div><div class=rel-items><a href=/zh-cn/posts/2022/20221014_%E5%90%8C%E4%BD%99%E5%AE%9A%E7%90%86%E4%B8%8E%E4%BA%8C%E8%BF%9B%E5%88%B6%E8%A1%A5%E7%A0%81/ class=related__link><div>同余定理与二进制补码</div></a><a href=/zh-cn/docs/snippets/algo/sort/MergeSort/ class=related__link><div>归并排序</div></a><a href=/zh-cn/docs/snippets/algo/sort/InsertSort/ class=related__link><div>插入排序</div></a></div><hr></section><div class=book-comments><div class=giscus-thread></div><script src=https://giscus.app/client.js data-repo=wangy325/wangy325.github.io data-repo-id=R_kgDOHhhDZg data-category=Announcements data-category-id=DIC_kwDOHhhDZs4ChbMn data-mapping=og:title data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=noborder_light data-loading=lazy data-lang=zh-CN crossorigin=anonymous async></script></div><div class=copyright><hr class=cline><p>Notes and Memos by wangy325
<a href=https://creativecommons.org/licenses/by/4.0/deed.en title="Creative Commons Attribution">&copy; CC BY 4.0</a></p><p>2019-2025. Powered by
<a href=https://github.com/alex-shpak/hugo-book>Hugo Book</a>
Presented by Github.</p></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><div id=toc-new><ul class=nav><li class=nav-item><a id=t1异或运算的性质 href=javascript:void(0) onclick='return scrolly("1-异或运算的性质"),!1'>1. 异或运算的性质</a></li><li class=nav-item><a id=t2异或运算的典型应用 href=javascript:void(0) onclick='return scrolly("2-异或运算的典型应用"),!1'>2. 异或运算的典型应用</a><ul class=nav><li class=nav-item><a id=t21交换2个数 href=javascript:void(0) onclick='return scrolly("21-交换2个数"),!1'>2.1 交换2个数</a></li><li class=nav-item><a id=t22经典面试题 href=javascript:void(0) onclick='return scrolly("22-经典面试题"),!1'>2.2 经典面试题</a><ul class=nav><li class=nav-item><a id=t找出唯一数 href=javascript:void(0) onclick='return scrolly("找出唯一数"),!1'>找出唯一数</a></li><li class=nav-item><a id=t找出重复数 href=javascript:void(0) onclick='return scrolly("找出重复数"),!1'>找出重复数</a></li></ul></li><li class=nav-item><a id=t23加解密 href=javascript:void(0) onclick='return scrolly("23-加解密"),!1'>2.3 加解密</a></li><li class=nav-item><a id=t备份文件 href=javascript:void(0) onclick='return scrolly("备份文件"),!1'>备份文件</a></li></ul></li></ul></div><script>function scrolly(e){const t=40;var n=document.getElementById(e).offsetTop;window.scrollTo({top:n+t,behaviour:"smooth"})}</script></div></aside></main><div class=back-to-top><div id=back-to-top><img src=/svg/chevrons-up.svg srcset="/svg/chevrons-up.svg 500w" onclick=topFunction() class=black>
<img title=回到顶部 src=/svg/chevrons-up-blue.svg srcset="/svg/chevrons-up-blue.svg 500w" onclick=topFunction() class=blue></div><script>let mybutton=document.getElementById("back-to-top");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>500||document.documentElement.scrollTop>500?mybutton.style.display="block":mybutton.style.display="none"}function topFunction(){window.scrollTo({top:0,behavior:"smooth"})}</script></div><script src=/js/scroll-listening.js></script></body></html>