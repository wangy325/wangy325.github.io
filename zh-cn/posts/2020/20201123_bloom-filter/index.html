<!doctype html><html lang=zh-CN dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="海量数据处理以及缓存穿透这两个场景让我认识了 布隆过滤器 ，我查阅了一些资料来了解它，但是很多现成资料并不满足我的需求，所以就决定自己总结一篇关于布隆过滤器的文章。希望通过这篇文章让更多人了解布隆过滤器，并且会实际去使用它！
下面我们将分为几个方面来介绍布隆过滤器：

什么是布隆过滤器？
布隆过滤器的原理介绍。
布隆过滤器使用场景。
通过 Java 编程手动实现布隆过滤器。
利用Google开源的Guava中自带的布隆过滤器。
Redis 中的布隆过滤器。
"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://wangy325.github.io/zh-cn/posts/2020/20201123_bloom-filter/"><meta property="og:site_name" content="xf&pl"><meta property="og:title" content="布隆过滤器(转)"><meta property="og:description" content="海量数据处理以及缓存穿透这两个场景让我认识了 布隆过滤器 ，我查阅了一些资料来了解它，但是很多现成资料并不满足我的需求，所以就决定自己总结一篇关于布隆过滤器的文章。希望通过这篇文章让更多人了解布隆过滤器，并且会实际去使用它！
下面我们将分为几个方面来介绍布隆过滤器：
什么是布隆过滤器？ 布隆过滤器的原理介绍。 布隆过滤器使用场景。 通过 Java 编程手动实现布隆过滤器。 利用Google开源的Guava中自带的布隆过滤器。 Redis 中的布隆过滤器。"><meta property="og:locale" content="zh_CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-11-23T00:00:00+08:00"><meta property="article:modified_time" content="2025-02-25T18:53:53+08:00"><title>布隆过滤器(转) | xf&amp;pl</title>
<link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=https://wangy325.github.io/zh-cn/posts/2020/20201123_bloom-filter/><link rel=stylesheet href=/book.min.21a480c3e6e72098579e2787d343e35263286cda9742462341e6aa278fbea46c.css integrity="sha256-IaSAw+bnIJhXnieH00PjUmMobNqXQkYjQeaqJ4++pGw=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/zh-cn.search.min.c2df43b03e7a9ae96b82634fe3204a8b52c807150e1a240387fa9731a83ccbf5.js integrity="sha256-wt9DsD56mulrgmNP4yBKi1LIBxUOGiQDh/qXMag8y/U=" crossorigin=anonymous></script><script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js integrity="sha256-b2+Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC+NdcPIvZhzk=" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-HHNKR5H8KN"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-HHNKR5H8KN")}</script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><div class=navi-bar id=navibar><div id=page-title><h2 class=book-brand><a class="flex align-center" href=/zh-cn/><span>xf&amp;pl</span></a></h2></div><div class=page-navi-col><nav><ul><li><a href=/zh-cn/docs/java/>Java</a></li><li><a href=/zh-cn/docs/design_pattern/>DP</a></li><li class=book-section-flat><a href=/zh-cn/docs/note/>Mooc</a></li><li class=book-section-flat><a href=/zh-cn/docs/snippets/>Snippets</a></li></ul><ul><li><a href=/zh-cn/posts/>Blog</a></li><li><a href=/zh-cn/archive/>Archive</a></li></ul></nav></div><div class="book-search hidden"><input type=text id=book-search-input placeholder=搜索 aria-label=搜索 maxlength=64 data-hotkeys=s/ required pattern=\S+.*>
<span class=clear_search><img src=/svg/close.svg onclick=clearInput()></span><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><script>function clearInput(){document.getElementById("book-search-input").value="";for(var e=document.getElementById("book-search-results");e.firstChild;)e.removeChild(e.firstChild)}</script><ul class=book-languages><li><a class="flex align-center"><img src=/svg/language.svg class=book-icon alt=Languages>
简体中文</a></label><ul><li><a href=https://wangy325.github.io/en/>English</a></li></ul></li></ul></div><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label><h3>布隆过滤器(转)</h3><label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><div id=toc-new><ul class=nav><li class=nav-item><a id=t1什么是布隆过滤器 href=javascript:void(0) onclick='return scrolly("1什么是布隆过滤器"),!1'>1.什么是布隆过滤器？</a></li><li class=nav-item><a id=t2布隆过滤器的原理介绍 href=javascript:void(0) onclick='return scrolly("2布隆过滤器的原理介绍"),!1'>2.布隆过滤器的原理介绍</a></li><li class=nav-item><a id=t3布隆过滤器使用场景 href=javascript:void(0) onclick='return scrolly("3布隆过滤器使用场景"),!1'>3.布隆过滤器使用场景</a></li><li class=nav-item><a id=t4通过Java编程手动实现布隆过滤器 href=javascript:void(0) onclick='return scrolly("4通过-java-编程手动实现布隆过滤器"),!1'>4.通过 Java 编程手动实现布隆过滤器</a></li><li class=nav-item><a id=t5利用Google开源的Guava中自带的布隆过滤器 href=javascript:void(0) onclick='return scrolly("5利用google开源的-guava中自带的布隆过滤器"),!1'>5.利用Google开源的 Guava中自带的布隆过滤器</a></li><li class=nav-item><a id=t6Redis中的布隆过滤器 href=javascript:void(0) onclick='return scrolly("6redis-中的布隆过滤器"),!1'>6.Redis 中的布隆过滤器</a><ul class=nav><li class=nav-item><a id=t61介绍 href=javascript:void(0) onclick='return scrolly("61介绍"),!1'>6.1介绍</a></li><li class=nav-item><a id=t62使用Docker安装 href=javascript:void(0) onclick='return scrolly("62使用docker安装"),!1'>6.2使用Docker安装</a></li><li class=nav-item><a id=t63常用命令一览 href=javascript:void(0) onclick='return scrolly("63常用命令一览"),!1'>6.3常用命令一览</a></li><li class=nav-item><a id=t64实际使用 href=javascript:void(0) onclick='return scrolly("64实际使用"),!1'>6.4实际使用</a></li></ul></li></ul></div><script>function scrolly(e){const t=40;var n=document.getElementById(e).offsetTop;window.scrollTo({top:n+t,behaviour:"smooth"})}</script></aside></header><article class="markdown book-post"><h1>布隆过滤器(转)</h1><div class="postmeta flex align-cneter" style=justify-content:center><div class="created flex align-cneter"><img src=/svg/calendar-event.svg class=book-icon alt>
<a title='创建者 wangy325'>2020-11-23</a></div><div class="cates flex align-center"><img src=/svg/cates.svg class=book-icon alt>
<a href=/zh-cn/categories/redis/>Redis</a></div><div class="last-modified flex align center"><img src=/svg/edit.svg class=book-icon alt>
<a title='最后修改者 wangy325-win | 2025-02-25'>2025-02-25</a></div></div><p>海量数据处理以及缓存穿透这两个场景让我认识了 布隆过滤器 ，我查阅了一些资料来了解它，但是很多现成资料并不满足我的需求，所以就决定自己总结一篇关于布隆过滤器的文章。希望通过这篇文章让更多人了解布隆过滤器，并且会实际去使用它！</p><p>下面我们将分为几个方面来介绍布隆过滤器：</p><ol><li>什么是布隆过滤器？</li><li>布隆过滤器的原理介绍。</li><li>布隆过滤器使用场景。</li><li>通过 Java 编程手动实现布隆过滤器。</li><li>利用Google开源的Guava中自带的布隆过滤器。</li><li>Redis 中的布隆过滤器。</li></ol><h3 id=1什么是布隆过滤器>1.什么是布隆过滤器？
<a class=anchor href=#1%e4%bb%80%e4%b9%88%e6%98%af%e5%b8%83%e9%9a%86%e8%bf%87%e6%bb%a4%e5%99%a8>#</a></h3><p>首先，我们需要了解布隆过滤器的概念。</p><p>布隆过滤器（Bloom Filter）是一个叫做 Bloom 的老哥于1970年提出的。我们可以把它看作由二进制向量（或者说位数组）和一系列随机映射函数（哈希函数）两部分组成的数据结构。相比于我们平时常用的的 List、Map 、Set 等数据结构，它占用空间更少并且效率更高，但是缺点是其返回的结果是概率性的，而不是非常准确的。理论情况下添加到集合中的元素越多，误报的可能性就越大。并且，存放在布隆过滤器的数据不容易删除。</p><img src=/img/bloom-filter-1.png alt=布隆过滤器示意图 width=500px position=center><p>位数组中的每个元素都只占用 1 bit ，并且每个元素只能是 0 或者 1。这样申请一个 100w 个元素的位数组只占用 1000000Bit / 8 = 125000 Byte = 125000/1024 kb ≈ 122kb 的空间。</p><p>总结：<strong>一个名叫 Bloom 的人提出了一种来检索元素是否在给定大集合中的数据结构，这种数据结构是高效且性能很好的，但缺点是具有一定的错误识别率和删除难度。并且，理论情况下，添加到集合中的元素越多，误报的可能性就越大。</strong></p><h3 id=2布隆过滤器的原理介绍>2.布隆过滤器的原理介绍
<a class=anchor href=#2%e5%b8%83%e9%9a%86%e8%bf%87%e6%bb%a4%e5%99%a8%e7%9a%84%e5%8e%9f%e7%90%86%e4%bb%8b%e7%bb%8d>#</a></h3><p><strong>当一个元素加入布隆过滤器中的时候，会进行如下操作：</strong></p><ol><li>使用布隆过滤器中的哈希函数对元素值进行计算，得到哈希值（有几个哈希函数得到几个哈希值）。</li><li>根据得到的哈希值，在位数组中把对应下标的值置为 1。</li></ol><p><strong>当我们需要判断一个元素是否存在于布隆过滤器的时候，会进行如下操作：</strong></p><ol><li>对给定元素再次进行相同的哈希计算；</li><li>得到值之后判断位数组中的每个元素是否都为 1，如果值都为 1，那么说明这个值在布隆过滤器中，如果存在一个值不为 1，说明该元素不在布隆过滤器中。</li></ol><p>举个简单的例子：</p><img src=/img/bloom-filter-2.png alt=布隆过滤器hash计算 width=500px position=center><p>如图所示，当字符串存储要加入到布隆过滤器中时，该字符串首先由多个哈希函数生成不同的哈希值，然后在对应的位数组的下表的元素设置为 1（当位数组初始化时 ，所有位置均为0）。当第二次存储相同字符串时，因为先前的对应位置已设置为 1，所以很容易知道此值已经存在（去重非常方便）。</p><p>如果我们需要判断某个字符串是否在布隆过滤器中时，只需要对给定字符串再次进行相同的哈希计算，得到值之后判断位数组中的每个元素是否都为 1，如果值都为 1，那么说明这个值在布隆过滤器中，如果存在一个值不为 1，说明该元素不在布隆过滤器中。</p><p><strong>不同的字符串可能哈希出来的位置相同，这种情况我们可以适当增加位数组大小或者调整我们的哈希函数。</strong></p><p>综上，我们可以得出：<strong>布隆过滤器说某个元素存在，小概率会误判。布隆过滤器说某个元素不在，那么这个元素一定不在。</strong></p><h3 id=3布隆过滤器使用场景>3.布隆过滤器使用场景
<a class=anchor href=#3%e5%b8%83%e9%9a%86%e8%bf%87%e6%bb%a4%e5%99%a8%e4%bd%bf%e7%94%a8%e5%9c%ba%e6%99%af>#</a></h3><ol><li>判断给定数据是否存在：比如判断一个数字是否存在于包含大量数字的数字集中（数字集很大，5亿以上！）、 防止缓存穿透（判断请求的数据是否有效避免直接绕过缓存请求数据库）等等、邮箱的垃圾邮件过滤、黑名单功能等等。</li><li>去重：比如爬给定网址的时候对已经爬取过的 URL 去重。</li></ol><h3 id=4通过-java-编程手动实现布隆过滤器>4.通过 Java 编程手动实现布隆过滤器
<a class=anchor href=#4%e9%80%9a%e8%bf%87-java-%e7%bc%96%e7%a8%8b%e6%89%8b%e5%8a%a8%e5%ae%9e%e7%8e%b0%e5%b8%83%e9%9a%86%e8%bf%87%e6%bb%a4%e5%99%a8>#</a></h3><p>我们上面已经说了布隆过滤器的原理，知道了布隆过滤器的原理之后就可以自己手动实现一个了。</p><p>如果你想要手动实现一个的话，你需要：</p><ol><li>一个合适大小的位数组保存数据</li><li>几个不同的哈希函数</li><li>添加元素到位数组（布隆过滤器）的方法实现</li><li>判断给定元素是否存在于位数组（布隆过滤器）的方法实现。</li></ol><p>下面给出一个我觉得写的还算不错的代码（参考网上已有代码改进得到，对于所有类型对象皆适用）：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=kn>import</span><span class=w> </span><span class=nn>java.util.BitSet</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>MyBloomFilter</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=w>    </span><span class=cm>/**
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=cm>     * 位数组的大小
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=cm>     */</span><span class=w>
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>DEFAULT_SIZE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>2</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>24</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=w>    </span><span class=cm>/**
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=cm>     * 通过这个数组可以创建 6 个不同的哈希函数
</span></span></span><span class=line><span class=ln>11</span><span class=cl><span class=cm>     */</span><span class=w>
</span></span></span><span class=line><span class=ln>12</span><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=kt>int</span><span class=o>[]</span><span class=w> </span><span class=n>SEEDS</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=kt>int</span><span class=o>[]</span><span class=p>{</span><span class=n>3</span><span class=p>,</span><span class=w> </span><span class=n>13</span><span class=p>,</span><span class=w> </span><span class=n>46</span><span class=p>,</span><span class=w> </span><span class=n>71</span><span class=p>,</span><span class=w> </span><span class=n>91</span><span class=p>,</span><span class=w> </span><span class=n>134</span><span class=p>};</span><span class=w>
</span></span></span><span class=line><span class=ln>13</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln>14</span><span class=cl><span class=w>    </span><span class=cm>/**
</span></span></span><span class=line><span class=ln>15</span><span class=cl><span class=cm>     * 位数组。数组中的元素只能是 0 或者 1
</span></span></span><span class=line><span class=ln>16</span><span class=cl><span class=cm>     */</span><span class=w>
</span></span></span><span class=line><span class=ln>17</span><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>BitSet</span><span class=w> </span><span class=n>bits</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>BitSet</span><span class=p>(</span><span class=n>DEFAULT_SIZE</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=ln>18</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln>19</span><span class=cl><span class=w>    </span><span class=cm>/**
</span></span></span><span class=line><span class=ln>20</span><span class=cl><span class=cm>     * 存放包含 hash 函数的类的数组
</span></span></span><span class=line><span class=ln>21</span><span class=cl><span class=cm>     */</span><span class=w>
</span></span></span><span class=line><span class=ln>22</span><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>SimpleHash</span><span class=o>[]</span><span class=w> </span><span class=n>func</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>SimpleHash</span><span class=o>[</span><span class=n>SEEDS</span><span class=p>.</span><span class=na>length</span><span class=o>]</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>23</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln>24</span><span class=cl><span class=w>    </span><span class=cm>/**
</span></span></span><span class=line><span class=ln>25</span><span class=cl><span class=cm>     * 初始化多个包含 hash 函数的类的数组，每个类中的 hash 函数都不一样
</span></span></span><span class=line><span class=ln>26</span><span class=cl><span class=cm>     */</span><span class=w>
</span></span></span><span class=line><span class=ln>27</span><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>MyBloomFilter</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=ln>28</span><span class=cl><span class=w>        </span><span class=c1>// 初始化多个不同的 Hash 函数</span><span class=w>
</span></span></span><span class=line><span class=ln>29</span><span class=cl><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>SEEDS</span><span class=p>.</span><span class=na>length</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=ln>30</span><span class=cl><span class=w>            </span><span class=n>func</span><span class=o>[</span><span class=n>i</span><span class=o>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>SimpleHash</span><span class=p>(</span><span class=n>DEFAULT_SIZE</span><span class=p>,</span><span class=w> </span><span class=n>SEEDS</span><span class=o>[</span><span class=n>i</span><span class=o>]</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=ln>31</span><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=ln>32</span><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=ln>33</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln>34</span><span class=cl><span class=w>    </span><span class=cm>/**
</span></span></span><span class=line><span class=ln>35</span><span class=cl><span class=cm>     * 添加元素到位数组
</span></span></span><span class=line><span class=ln>36</span><span class=cl><span class=cm>     */</span><span class=w>
</span></span></span><span class=line><span class=ln>37</span><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>add</span><span class=p>(</span><span class=n>Object</span><span class=w> </span><span class=n>value</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=ln>38</span><span class=cl><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>SimpleHash</span><span class=w> </span><span class=n>f</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=n>func</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=ln>39</span><span class=cl><span class=w>            </span><span class=n>bits</span><span class=p>.</span><span class=na>set</span><span class=p>(</span><span class=n>f</span><span class=p>.</span><span class=na>hash</span><span class=p>(</span><span class=n>value</span><span class=p>),</span><span class=w> </span><span class=kc>true</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=ln>40</span><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=ln>41</span><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=ln>42</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln>43</span><span class=cl><span class=w>    </span><span class=cm>/**
</span></span></span><span class=line><span class=ln>44</span><span class=cl><span class=cm>     * 判断指定元素是否存在于位数组
</span></span></span><span class=line><span class=ln>45</span><span class=cl><span class=cm>     */</span><span class=w>
</span></span></span><span class=line><span class=ln>46</span><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>contains</span><span class=p>(</span><span class=n>Object</span><span class=w> </span><span class=n>value</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=ln>47</span><span class=cl><span class=w>        </span><span class=kt>boolean</span><span class=w> </span><span class=n>ret</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>48</span><span class=cl><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>SimpleHash</span><span class=w> </span><span class=n>f</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=n>func</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=ln>49</span><span class=cl><span class=w>            </span><span class=n>ret</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ret</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>bits</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>f</span><span class=p>.</span><span class=na>hash</span><span class=p>(</span><span class=n>value</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=ln>50</span><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=ln>51</span><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>ret</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>52</span><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=ln>53</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln>54</span><span class=cl><span class=w>    </span><span class=cm>/**
</span></span></span><span class=line><span class=ln>55</span><span class=cl><span class=cm>     * 静态内部类。用于 hash 操作！
</span></span></span><span class=line><span class=ln>56</span><span class=cl><span class=cm>     */</span><span class=w>
</span></span></span><span class=line><span class=ln>57</span><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kd>class</span> <span class=nc>SimpleHash</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=ln>58</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln>59</span><span class=cl><span class=w>        </span><span class=kd>private</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>cap</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>60</span><span class=cl><span class=w>        </span><span class=kd>private</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>seed</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>61</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln>62</span><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=nf>SimpleHash</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>cap</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>seed</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=ln>63</span><span class=cl><span class=w>            </span><span class=k>this</span><span class=p>.</span><span class=na>cap</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cap</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>64</span><span class=cl><span class=w>            </span><span class=k>this</span><span class=p>.</span><span class=na>seed</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>seed</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>65</span><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=ln>66</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln>67</span><span class=cl><span class=w>        </span><span class=cm>/**
</span></span></span><span class=line><span class=ln>68</span><span class=cl><span class=cm>         * 计算 hash 值
</span></span></span><span class=line><span class=ln>69</span><span class=cl><span class=cm>         */</span><span class=w>
</span></span></span><span class=line><span class=ln>70</span><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=nf>hash</span><span class=p>(</span><span class=n>Object</span><span class=w> </span><span class=n>value</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=ln>71</span><span class=cl><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>h</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>72</span><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>(</span><span class=n>value</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=n>0</span><span class=w> </span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>73</span><span class=cl><span class=w>                </span><span class=n>Math</span><span class=p>.</span><span class=na>abs</span><span class=p>(</span><span class=n>seed</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=p>(</span><span class=n>cap</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>1</span><span class=p>)</span><span class=w> </span><span class=o>&amp;</span><span class=w>
</span></span></span><span class=line><span class=ln>74</span><span class=cl><span class=w>                </span><span class=p>((</span><span class=n>h</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>value</span><span class=p>.</span><span class=na>hashCode</span><span class=p>())</span><span class=w> </span><span class=o>^</span><span class=w> </span><span class=p>(</span><span class=n>h</span><span class=w> </span><span class=o>&gt;&gt;&gt;</span><span class=w> </span><span class=n>16</span><span class=p>)));</span><span class=w>
</span></span></span><span class=line><span class=ln>75</span><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=ln>76</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln>77</span><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=ln>78</span><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>测试：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln>1</span><span class=cl><span class=n>String</span><span class=w> </span><span class=n>value1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;https://javaguide.cn/&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>2</span><span class=cl><span class=w></span><span class=n>String</span><span class=w> </span><span class=n>value2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;https://github.com/Snailclimb&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>3</span><span class=cl><span class=w></span><span class=n>MyBloomFilter</span><span class=w> </span><span class=n>filter</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>MyBloomFilter</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=ln>4</span><span class=cl><span class=w></span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>filter</span><span class=p>.</span><span class=na>contains</span><span class=p>(</span><span class=n>value1</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=ln>5</span><span class=cl><span class=w></span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>filter</span><span class=p>.</span><span class=na>contains</span><span class=p>(</span><span class=n>value2</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=ln>6</span><span class=cl><span class=w></span><span class=n>filter</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>value1</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=ln>7</span><span class=cl><span class=w></span><span class=n>filter</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>value2</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=ln>8</span><span class=cl><span class=w></span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>filter</span><span class=p>.</span><span class=na>contains</span><span class=p>(</span><span class=n>value1</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=ln>9</span><span class=cl><span class=w></span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>filter</span><span class=p>.</span><span class=na>contains</span><span class=p>(</span><span class=n>value2</span><span class=p>));</span><span class=w>
</span></span></span></code></pre></div><p>Output:</p><pre tabindex=0><code>false
false
true
true
</code></pre><p>测试：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln>1</span><span class=cl><span class=n>Integer</span><span class=w> </span><span class=n>value1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>13423</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>2</span><span class=cl><span class=w></span><span class=n>Integer</span><span class=w> </span><span class=n>value2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>22131</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>3</span><span class=cl><span class=w></span><span class=n>MyBloomFilter</span><span class=w> </span><span class=n>filter</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>MyBloomFilter</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=ln>4</span><span class=cl><span class=w></span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>filter</span><span class=p>.</span><span class=na>contains</span><span class=p>(</span><span class=n>value1</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=ln>5</span><span class=cl><span class=w></span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>filter</span><span class=p>.</span><span class=na>contains</span><span class=p>(</span><span class=n>value2</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=ln>6</span><span class=cl><span class=w></span><span class=n>filter</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>value1</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=ln>7</span><span class=cl><span class=w></span><span class=n>filter</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>value2</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=ln>8</span><span class=cl><span class=w></span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>filter</span><span class=p>.</span><span class=na>contains</span><span class=p>(</span><span class=n>value1</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=ln>9</span><span class=cl><span class=w></span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>filter</span><span class=p>.</span><span class=na>contains</span><span class=p>(</span><span class=n>value2</span><span class=p>));</span><span class=w>
</span></span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln>1</span><span class=cl><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=ln>2</span><span class=cl><span class=w></span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=ln>3</span><span class=cl><span class=w></span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=ln>4</span><span class=cl><span class=w></span><span class=kc>true</span><span class=w>
</span></span></span></code></pre></div><h3 id=5利用google开源的-guava中自带的布隆过滤器>5.利用Google开源的 Guava中自带的布隆过滤器
<a class=anchor href=#5%e5%88%a9%e7%94%a8google%e5%bc%80%e6%ba%90%e7%9a%84-guava%e4%b8%ad%e8%87%aa%e5%b8%a6%e7%9a%84%e5%b8%83%e9%9a%86%e8%bf%87%e6%bb%a4%e5%99%a8>#</a></h3><p>自己实现的目的主要是为了让自己搞懂布隆过滤器的原理，Guava 中布隆过滤器的实现算是比较权威的，所以实际项目中我们不需要手动实现一个布隆过滤器。</p><p>首先我们需要在项目中引入 Guava 的依赖：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln>1</span><span class=cl><span class=o>&lt;</span><span class=n>dependency</span><span class=o>&gt;</span><span class=w>
</span></span></span><span class=line><span class=ln>2</span><span class=cl><span class=w>    </span><span class=o>&lt;</span><span class=n>groupId</span><span class=o>&gt;</span><span class=n>com</span><span class=p>.</span><span class=na>google</span><span class=p>.</span><span class=na>guava</span><span class=o>&lt;/</span><span class=n>groupId</span><span class=o>&gt;</span><span class=w>
</span></span></span><span class=line><span class=ln>3</span><span class=cl><span class=w>    </span><span class=o>&lt;</span><span class=n>artifactId</span><span class=o>&gt;</span><span class=n>guava</span><span class=o>&lt;/</span><span class=n>artifactId</span><span class=o>&gt;</span><span class=w>
</span></span></span><span class=line><span class=ln>4</span><span class=cl><span class=w>    </span><span class=o>&lt;</span><span class=n>version</span><span class=o>&gt;</span><span class=n>28</span><span class=p>.</span><span class=na>0</span><span class=o>-</span><span class=n>jre</span><span class=o>&lt;/</span><span class=n>version</span><span class=o>&gt;</span><span class=w>
</span></span></span><span class=line><span class=ln>5</span><span class=cl><span class=w></span><span class=o>&lt;/</span><span class=n>dependency</span><span class=o>&gt;</span><span class=w>
</span></span></span></code></pre></div><p>实际使用如下：</p><p>我们创建了一个最多存放 最多 1500个整数的布隆过滤器，并且我们可以容忍误判的概率为百分之（0.01）</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln> 1</span><span class=cl><span class=c1>// 创建布隆过滤器对象</span><span class=w>
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=w></span><span class=n>BloomFilter</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>filter</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>BloomFilter</span><span class=p>.</span><span class=na>create</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=w>        </span><span class=n>Funnels</span><span class=p>.</span><span class=na>integerFunnel</span><span class=p>(),</span><span class=w>
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=w>        </span><span class=n>1500</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=w>        </span><span class=n>0</span><span class=p>.</span><span class=na>01</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=w></span><span class=c1>// 判断指定元素是否存在</span><span class=w>
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=w></span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>filter</span><span class=p>.</span><span class=na>mightContain</span><span class=p>(</span><span class=n>1</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=w></span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>filter</span><span class=p>.</span><span class=na>mightContain</span><span class=p>(</span><span class=n>2</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=w></span><span class=c1>// 将元素添加进布隆过滤器</span><span class=w>
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=w></span><span class=n>filter</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=n>1</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=ln>11</span><span class=cl><span class=w></span><span class=n>filter</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=n>2</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=ln>12</span><span class=cl><span class=w></span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>filter</span><span class=p>.</span><span class=na>mightContain</span><span class=p>(</span><span class=n>1</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=ln>13</span><span class=cl><span class=w></span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>filter</span><span class=p>.</span><span class=na>mightContain</span><span class=p>(</span><span class=n>2</span><span class=p>));</span><span class=w>
</span></span></span></code></pre></div><p>在我们的示例中，当<code>mightContain（）</code> 方法返回<strong>true</strong>时，我们可以99％确定该元素在过滤器中，当过滤器返回<em>false</em>时，我们可以100％确定该元素不存在于过滤器中。</p><p><strong>Guava 提供的布隆过滤器的实现还是很不错的（想要详细了解的可以看一下它的源码实现），但是它有一个重大的缺陷就是只能单机使用（另外，容量扩展也不容易），而现在互联网一般都是分布式的场景。为了解决这个问题，我们就需要用到 Redis 中的布隆过滤器了。</strong></p><h3 id=6redis-中的布隆过滤器>6.Redis 中的布隆过滤器
<a class=anchor href=#6redis-%e4%b8%ad%e7%9a%84%e5%b8%83%e9%9a%86%e8%bf%87%e6%bb%a4%e5%99%a8>#</a></h3><h4 id=61介绍>6.1介绍
<a class=anchor href=#61%e4%bb%8b%e7%bb%8d>#</a></h4><p>Redis v4.0 之后有了 Module（模块/插件） 功能，Redis Modules 让 Redis 可以使用外部模块扩展其功能 。布隆过滤器就是其中的 Module。详情可以查看 Redis 官方对 Redis Modules 的介绍 ：https://redis.io/modules</p><p>另外，官网推荐了一个 RedisBloom 作为 Redis 布隆过滤器的 Module,地址：https://github.com/RedisBloom/RedisBloom. 其他还有：</p><ul><li>redis-lua-scaling-bloom-filter （lua 脚本实现）：https://github.com/erikdubbelboer/redis-lua-scaling-bloom-filter</li><li>pyreBloom（Python中的快速Redis 布隆过滤器） ：https://github.com/seomoz/pyreBloom</li><li>......</li></ul><p>RedisBloom 提供了多种语言的客户端支持，包括：Python、Java、JavaScript 和 PHP。</p><h4 id=62使用docker安装>6.2使用Docker安装
<a class=anchor href=#62%e4%bd%bf%e7%94%a8docker%e5%ae%89%e8%a3%85>#</a></h4><p>如果我们需要体验 Redis 中的布隆过滤器非常简单，通过 Docker 就可以了！我们直接在 Google 搜索<strong>docker redis bloomfilter</strong> 然后在排除广告的第一条搜素结果就找到了我们想要的答案（这是我平常解决问题的一种方式，分享一下），具体地址：https://hub.docker.com/r/redislabs/rebloom/ （介绍的很详细 ）。</p><p><strong>具体操作如下：</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=ln>1</span><span class=cl>➜  ~ docker run -p 6379:6379 --name redis-redisbloom redislabs/rebloom:latest
</span></span><span class=line><span class=ln>2</span><span class=cl>➜  ~ docker <span class=nb>exec</span> -it redis-redisbloom bash
</span></span><span class=line><span class=ln>3</span><span class=cl>root@21396d02c252:/data# redis-cli
</span></span><span class=line><span class=ln>4</span><span class=cl>127.0.0.1:6379&gt;
</span></span></code></pre></div><h4 id=63常用命令一览>6.3常用命令一览
<a class=anchor href=#63%e5%b8%b8%e7%94%a8%e5%91%bd%e4%bb%a4%e4%b8%80%e8%a7%88>#</a></h4><blockquote><p>注意： key:布隆过滤器的名称，item : 添加的元素。</p></blockquote><ol><li><strong><code>BF.ADD </code></strong>：将元素添加到布隆过滤器中，如果该过滤器尚不存在，则创建该过滤器。格式：<code>BF.ADD {key} {item}</code>。</li><li><strong><code>BF.MADD </code></strong>: 将一个或多个元素添加到“布隆过滤器”中，并创建一个尚不存在的过滤器。该命令的操作方式<code>BF.ADD</code>与之相同，只不过它允许多个输入并返回多个值。格式：<code>BF.MADD {key} {item} [item ...]</code> 。</li><li><strong><code>BF.EXISTS</code></strong> : 确定元素是否在布隆过滤器中存在。格式：<code>BF.EXISTS {key} {item}</code>。</li><li><strong><code>BF.MEXISTS</code></strong> ： 确定一个或者多个元素是否在布隆过滤器中存在格式：<code>BF.MEXISTS {key} {item} [item ...]</code>。</li></ol><p>另外，<code>BF.RESERVE</code> 命令需要单独介绍一下：</p><p>这个命令的格式如下：</p><p><code>BF.RESERVE {key} {error_rate} {capacity} [EXPANSION expansion] </code>。</p><p>下面简单介绍一下每个参数的具体含义：</p><ol><li>key：布隆过滤器的名称</li><li>error_rate :误报的期望概率。这应该是介于0到1之间的十进制值。例如，对于期望的误报率0.1％（1000中为1），error_rate应该设置为0.001。该数字越接近零，则每个项目的内存消耗越大，并且每个操作的CPU使用率越高。</li><li>capacity: 过滤器的容量。当实际存储的元素个数超过这个值之后，性能将开始下降。实际的降级将取决于超出限制的程度。随着过滤器元素数量呈指数增长，性能将线性下降。</li></ol><p>可选参数：</p><ul><li>expansion：如果创建了一个新的子过滤器，则其大小将是当前过滤器的大小乘以<code>expansion</code>。默认扩展值为2。这意味着每个后续子过滤器将是前一个子过滤器的两倍。</li></ul><h4 id=64实际使用>6.4实际使用
<a class=anchor href=#64%e5%ae%9e%e9%99%85%e4%bd%bf%e7%94%a8>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=ln> 1</span><span class=cl>127.0.0.1:6379&gt; BF.ADD myFilter java
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=o>(</span>integer<span class=o>)</span> <span class=m>1</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>127.0.0.1:6379&gt; BF.ADD myFilter javaguide
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=o>(</span>integer<span class=o>)</span> <span class=m>1</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>127.0.0.1:6379&gt; BF.EXISTS myFilter java
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=o>(</span>integer<span class=o>)</span> <span class=m>1</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>127.0.0.1:6379&gt; BF.EXISTS myFilter javaguide
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=o>(</span>integer<span class=o>)</span> <span class=m>1</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>127.0.0.1:6379&gt; BF.EXISTS myFilter github
</span></span><span class=line><span class=ln>10</span><span class=cl><span class=o>(</span>integer<span class=o>)</span> <span class=m>0</span>
</span></span></code></pre></div><hr><p><a href=https://github.com/Snailclimb/JavaGuide/blob/master/docs/dataStructures-algorithms/data-structure/bloom-filter.md>点击查看原文</a></p></article><div class=next-prev><hr><div class="page-navi flex" id=pagenavi><div class=pre-page>←
<a href=https://wangy325.github.io/zh-cn/posts/2020/20201124_redis-all/>redis必知必会(转)</a></div><div class=next-page><a href=https://wangy325.github.io/zh-cn/posts/2020/20200314_SpringBoot-aop-demo/>SpringBoot使用AOP的简单示例</a> →</div></div></div><section class=related><div class=rel-title>相似文章</div><div class=rel-items><a href=/zh-cn/posts/2019/20190814_build-redis-sentinel/ class=related__link><div>Redis Sentinel高可用实现</div></a></div><hr></section><div class=book-comments><div class=giscus-thread></div><script src=https://giscus.app/client.js data-repo=wangy325/wangy325.github.io data-repo-id=R_kgDOHhhDZg data-category=Announcements data-category-id=DIC_kwDOHhhDZs4ChbMn data-mapping=og:title data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=noborder_light data-loading=lazy data-lang=zh-CN crossorigin=anonymous async></script></div><div class=copyright><hr class=cline><p>Notes and Memos by wangy325
<a href=https://creativecommons.org/licenses/by/4.0/deed.en title="Creative Commons Attribution">&copy; CC BY 4.0</a></p><p>2019-2025. Powered by
<a href=https://github.com/alex-shpak/hugo-book>Hugo Book</a>
Presented by Github.</p></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><div id=toc-new><ul class=nav><li class=nav-item><a id=t1什么是布隆过滤器 href=javascript:void(0) onclick='return scrolly("1什么是布隆过滤器"),!1'>1.什么是布隆过滤器？</a></li><li class=nav-item><a id=t2布隆过滤器的原理介绍 href=javascript:void(0) onclick='return scrolly("2布隆过滤器的原理介绍"),!1'>2.布隆过滤器的原理介绍</a></li><li class=nav-item><a id=t3布隆过滤器使用场景 href=javascript:void(0) onclick='return scrolly("3布隆过滤器使用场景"),!1'>3.布隆过滤器使用场景</a></li><li class=nav-item><a id=t4通过Java编程手动实现布隆过滤器 href=javascript:void(0) onclick='return scrolly("4通过-java-编程手动实现布隆过滤器"),!1'>4.通过 Java 编程手动实现布隆过滤器</a></li><li class=nav-item><a id=t5利用Google开源的Guava中自带的布隆过滤器 href=javascript:void(0) onclick='return scrolly("5利用google开源的-guava中自带的布隆过滤器"),!1'>5.利用Google开源的 Guava中自带的布隆过滤器</a></li><li class=nav-item><a id=t6Redis中的布隆过滤器 href=javascript:void(0) onclick='return scrolly("6redis-中的布隆过滤器"),!1'>6.Redis 中的布隆过滤器</a><ul class=nav><li class=nav-item><a id=t61介绍 href=javascript:void(0) onclick='return scrolly("61介绍"),!1'>6.1介绍</a></li><li class=nav-item><a id=t62使用Docker安装 href=javascript:void(0) onclick='return scrolly("62使用docker安装"),!1'>6.2使用Docker安装</a></li><li class=nav-item><a id=t63常用命令一览 href=javascript:void(0) onclick='return scrolly("63常用命令一览"),!1'>6.3常用命令一览</a></li><li class=nav-item><a id=t64实际使用 href=javascript:void(0) onclick='return scrolly("64实际使用"),!1'>6.4实际使用</a></li></ul></li></ul></div><script>function scrolly(e){const t=40;var n=document.getElementById(e).offsetTop;window.scrollTo({top:n+t,behaviour:"smooth"})}</script></div></aside></main><div class=back-to-top><div id=back-to-top><img src=/svg/chevrons-up.svg srcset="/svg/chevrons-up.svg 500w" onclick=topFunction() class=black>
<img title=回到顶部 src=/svg/chevrons-up-blue.svg srcset="/svg/chevrons-up-blue.svg 500w" onclick=topFunction() class=blue></div><script>let mybutton=document.getElementById("back-to-top");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>500||document.documentElement.scrollTop>500?mybutton.style.display="block":mybutton.style.display="none"}function topFunction(){window.scrollTo({top:0,behavior:"smooth"})}</script></div><script src=/js/scroll-listening.js></script></body></html>